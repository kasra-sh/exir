!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={};function n(){return void 0!==e.window&&void 0!==e.document&&void 0!==e.navigator}n()||(e.HTMLElement=e.HTMLElement?e.HTMLElement:function(){},e.Element=e.Element?e.Element:function(){},e.Node=e.Node?e.Node:function(){},e.HTMLCollection=e.HTMLCollection?e.HTMLCollection:function(){},e.NodeList=e.NodeList?e.NodeList:function(){}),t={setGlobal:function(t){for(let n of Object.keys(t))e[n]=t[n]},Extension:class{constructor(e){this.types=e,this.types=[],this.pcode="\n"}define(e){if(!e.name){let t=`Function must have a name [Extension.define(f)]\n<<${e}>>`;return console.error(t),`\n/**\n *${t}\n */`}let t="\n";for(let n of this.types)void 0!==n&&(t+=`${n.name||n}.prototype.${e.name} = `);return t+=e.toString()+";\n",this.pcode+=t,t}polyfill(e){if(!e.name){let t=`Extension function must have a name:\n<<${e}>>`;return console.error(t),`\n/**\n *${t}\n */`}let t="\n";for(let n of this.types)t+=`if (${n.name||n}.prototype.${e.name} === undefined) ${n.name||n}.prototype.${e.name} = ${e.toString()};\n`;this.pcode+=t}},isBrowser:n};var r,o,i={},s={};function a(e){return null!==e&&void 0===e}function l(e){return null===e}function c(e){return!a(e)&&!l(e)}function u(e){return"function"==typeof e}function f(e){return null!==e&&"object"==typeof e}function h(e,t,n){return!!c(e)&&(u(n)?n(e[t]):e.hasOwnProperty(t))}s={typeName:function(e){return e.hasOwnProperty("constructor")?e.constructor.name:typeof e},isUnd:a,isNull:l,isVal:c,isNum:function(e){return"number"==typeof e},isStr:function(e){return"string"==typeof e||e instanceof String},isFun:u,isObj:f,isArr:function(e){return e instanceof Array},isPrim:function(e){return c(e)&&!f(e)&&!u(e)||"symbol"==typeof e},isList:function(e){return c(e.length)&&u(e.item)},isMutableList:function(e){return c(e.length)&&u(e.item)&&u(e.add)},isSet:function(e){return e instanceof Set},isMap:function(e){return e instanceof Map},isError:function(e){return e instanceof Error},isEl:function(e){return e instanceof Element||e instanceof HTMLElement||e instanceof Node},isEls:function(e){return e instanceof HTMLCollection||e instanceof NodeList},hasField:h,isEmpty:function(e){return h(e,"length")?e.length<=0:!u(e)&&(!f(e)||Object.keys(e).length<=0)},Enum:function(e){let t=0,n={};for(let r of Object.keys(e))n[n[t]=r]=t++;return n},dict:function(...e){let t={};for(let n=0;n<e.length;n++)n%2==0&&(t[e[n]]=e[n+1]);return t}},e._X_LOOP_BREAK_||(e._X_LOOP_BREAK_=Symbol("BREAK_LOOP"),e._X_ANY_=Symbol("ANY"),e._X_ALL_=Symbol("ALL"));const p=e._X_LOOP_BREAK_,d=e._X_ANY_,m=e._X_ALL_,y=["__proto__","constructor","__defineGetter__","__defineSetter__","prototype"];function _(e,t){if(s.isVal(e))return s.isObj(e)||s.isStr(e)||s.isArr(e)?e[t]:e.item(t)}function g(e,t,n){return!!s.isVal(e)&&(!s.isArr(e)&&s.isObj(e)?e[n]===t:e.indexOf(t)>=0)}function v(e,...t){s.isArr(e)?k(t,(t=>e.push(t))):s.isMutableList(e)&&e.add(t)}function b(e,...t){t=F(t);let n=!1;return k(t,(t=>{let r=e.indexOf(t);r>=0&&(n=!0,e.splice(r,1))})),n}function E(e,t){let n=Object.keys(t);for(let r of n){if(t[r]===d&&e.hasOwnProperty(r))return!0;if(t[r]===e[r])return!0}return!1}function w(e,t){let n=Object.keys(t);for(let r of n)if(t[r]!==d&&t[r]!==e[r])return!1;return!0}function T(e,t=(()=>!0),n=!0){return s.isUnd(e)?t:s.isFun(e)?e:e instanceof RegExp?(t,n,r,o)=>!s.isObj(t)&&e.test(t.toString()):s.isObj(e)?0===Object.keys(e).length?t:n?(t,n,r,o)=>E(t,e):(t,n,r,o)=>w(t,e):(t,n,r,o)=>t===e}function x(e){if(s.isUnd(e))return e=>e;if(s.isFun(e))return e;if(s.isStr(e)){const t=e;e=e=>e[t]}throw Error(`Predicate ${e} cannot be of type ${typeof e}`)}function $(e,t={}){return s.isStr(e)?"":s.isList(e)||s.isArr(e)?[]:s.isObj(e)?s.isEl(e)?3===e.nodeType||8===e.nodeType?document.createTextNode(e.textContent):document.createElement(e.tagName):e.__proto__?Object.create(e.__proto__):{}:t}function C(e,t,n=!1){if(s.isStr(e))return e.concat(t);if(s.isArr(e))return e.concat(t);for(let r of Object.keys(t))e[r]&&!n||(e[r]=t[r]);return e}function k(e,t){if(!s.isVal(e))return-1;if(!s.isArr(e)||!s.isStr(e)||!s.isList(e)){let n=0,r=Object.keys(e);const o=r.length;for(;n<o;n++){const o=r[n];if(t(e[o],o,n,e)===p)return n}return n}const n=e.length;if(s.isArr(e))for(let r=0;r<n;r++){if(t(_(e,r),r,r,e)===p)return r}else for(let r=0;r<n;r++){if(t(e[r],r,r,e)===p)return r}return e.length}function A(e,t,n=[]){if(!s.isArr(e)||!s.isStr(e)){let r=0,o=Object.keys(e);for(let r=o.length-1;r>=0;r--){if(r<n[1])continue;if(r>=n[0])return r;if(t(e[o[r]],o[r],r,e)===p)return r}return r}for(let n=e.length-1;n>=0;n--){if(t(_(e,n),n,n,e)===p)return n}return e.length}function O(e,t){t=T(t,(()=>!0));let n=-1;return k(e,(function(r,o,i){if(n=t(r,o,i,e),!0===n)return n=i,p})),n}function S(e,t){return _(e,O(e,t))}function L(e,t){t=T(t,(()=>!0));let n=-1;return A(e,(function(e,r,o){if(n=t(e,r,o),!0===n)return n=o,p})),n}function N(e,t){return e[L(e,t)]}function j(e,t){let n=T(t),r=!1;return k(e,(function(e,t,o,i){if(r=n(e,t,o,i),!0===r)return p})),r}function P(e,t){t=T(t,(()=>!0));let n=!0;return k(e,(function(e,r,o,i){if(n=t(e,r,o,i),!1===n)return p})),n}function R(e,t,n=!1,r=!1){t=T(t,(()=>!0));let o="";return(n?A:k)(e,(function(n,i,s){t&&t(n,i,s,e)!==r||(o+=n)})),o}function q(e,t,n=!1,r=!1){if(s.isArr(t)){let e=Object.assign({},t);t=r?(t,n)=>!j(e,n):(t,n)=>j(e,n)}else t=T(t,(()=>!0));let o={};const i=Object.keys(e),a=i.length;if(n)for(let n=a-1;n>=0;n--){const s=i[n],a=e[s];t(a,s,n,e)!==r&&(o[s]=a)}else for(let n=0;n<a;n++){const s=i[n],a=e[s];t(a,s,n,e)!==r&&(o[s]=a)}return o}function V(e,t,n=!1,r=!1){if(s.isArr(t)){let e=Object.assign([],t);t=r?(t,n,r)=>!j(e,r):(t,n,r)=>j(e,r)}else t=T(t,(()=>!0));let o=[];const i=e.length;if(n)for(let n=i-1;n>=0;n--){const i=e[n];!t(i,n,n,e)!==r&&o.push(i)}else for(let n=0;n<i;n++){const i=e[n];t(i,n,n,e)!==r&&o.push(i)}return o}function D(e,t,n=!1){return s.isStr(e)?R(e,t,n):s.isArr(e)||s.isList(e)?V(e,t,n):q(e,t,n)}function M(e,t){let n;t=x(t);let r=-1;return k(e,(function(e,o){let i=t(e,o);n?i>=n&&(n=i,r=o):(n=i,r=o)})),r}function U(e,t){let n;t=x(t);let r=-1;return k(e,(function(e,o){let i=t(e,o);n?i<=n&&(n=i,r=o):(n=i,r=o)})),r}function H(e,t,n=!1){return t=T(t,(e=>e)),s.isArr(e)?function(e,t,n=!1){let r=[];const o=e.length;if(n)for(let n=o;n>=0;n--){let o=t(e[n],n,e);if(o===p)break;s.isUnd(o)||r.push(o)}else for(let n=0;n<o;n++){let o=t(e[n],n,e);if(o===p)break;s.isUnd(o)||r.push(o)}return r}(e,t,n):s.isObj(e)?function(e,t,n=!1){let r={};const o=Object.keys(e),i=e.length;if(n)for(let n=i;n>=0;n--){const i=o[n];let a=t(e[i],i,n,e);if(a===p)break;s.isUnd(a)||(r[i]=a)}else for(let n=0;n<i;n++){const i=o[n];let a=t(e[i],i,n,e);if(a===p)break;s.isUnd(a)||(r[i]=a)}return r}(e,t,n):void 0}function F(e,t){let n;return n=s.isStr(e)?"":s.isArr(e)?[]:{},k(e,(function(r,o){let i;t?i=t(r,o,e):!s.isArr(n)&&s.isObj(n)?(i={},i[o]=r):i=r,n=C(n,i)})),n}function I(e,t,n=e){return s.isUnd(t)&&(t=(e,t)=>e+t),k(e,((e,r,o)=>{n=t(n,e,r,o)})),n}function W(e,t,{excludeKeys:n=[],maxDepth:r=999,allowUnsafeProps:o=!1}={excludeKeys:[],maxDepth:999,allowUnsafeProps:!1},i=0){return i>=r||k(t,((a,l)=>{n&&g(n,l)||o&&g(y,l)||(s.isObj(t[l])?e[l]=W($(t[l]),t[l],{excludeKeys:n,maxDepth:r,depth:i+1}):e[l]=a)})),e}function X(e,t){let n=e;if(s.isStr(e))n=t=>t[e];else if(s.isArr(e))n=t=>I(t,((t,n,r)=>{if(g(e,r))return t+n}),"");else if(!s.isFun(e))throw Error(`${t} key only accepts: String, [String,...], Function`);return n}i={ANY:d,ALL:m,BREAK:p,item:_,contains:g,add:v,remove:b,toggle:function(e,...t){if(0===t.length)return;let n;if(1===(t=F(t)).length)b(e,t)||v(e,t[0]);else{t.push(t[0]);let r=!1;k(e,((o,i)=>{n=t.indexOf(o),n>=0&&t.length>n+1&&(r=!0,e[i]=t[n+1])})),r||e.push(t[0])}},concat:C,emptyOf:$,objMatchOne:E,objMatchAll:w,deepMerge:W,deepClone:function(e,{excludeKeys:t=[],maxDepth:n=999,allowUnsafeProps:r=!1}={excludeKeys:[],maxDepth:999,allowUnsafeProps:!1}){return W($(e),e,{excludeKeys:t,maxDepth:n,allowUnsafeProps:r})},forN:function(e,t=0,n=0,r=(t<n?1:-1)){if(r>0)for(;t<=n;t+=r)e(t);for(;t>=n;t+=r)e(t)},forEachRange:function(e,t,n=0,r){if(!s.isArr(e)||!s.isStr(e)){let o=Object.keys(e);r=r||o.length-1;for(let i=n;i<=r;i++){if(t(e[o[i]],o[i],i,e)===p)return i}return r}r=r||e.length;for(let o=n;o<r;o++){if(t(_(e,o),o,o,e)===p)return o}return r},forEach:k,forEachRight:A,firstIndex:O,first:S,startsWith:function(e,t){return s.isStr(e)&&s.isStr(t)?0===e.indexOf(t):(t=T(t,(()=>!0)))(S(e))},lastIndex:L,last:N,endsWith:function(e,t){return s.isStr(e)&&s.isStr(t)?e.indexOf(t)===e.length-t.length:(t=T(t,(()=>!0)))(N(e))},reverse:function(e){if(s.isArr(e))return e.reverse();let t="";return A(e,(function(e){t+=e})),t},any:j,all:P,filter:D,filterRight:function(e,t){return D(e,t,!0)},reduce:I,reduceRight:function(e,t,n=e){A(e,((e,r,o)=>{n=t(n,e,r,o)}))},map:H,flatMap:F,keyValuePairs:function(e){let t=[];return k(e,((e,n)=>{t.push(s.dict(n,e))})),t},entries:function(e){let t=[];return k(e,((e,n)=>{t.push([n,e])})),t},maxIndex:M,max:function(e,t){return e[M(e,t)]},minIndex:U,min:function(e,t){return e[U(e,t)]},shuffle:function(e){return Array.prototype.sort.call(e,(()=>Math.random()-.5))},sortAsc:function(e,t,n="en"){let r=t?function(e,r){return(""+t(e)).localeCompare(""+t(r),n)}:void 0;return Array.prototype.sort.call(e,r)},sortDesc:function(e,t,n="en"){let r=t?function(e,r){return(""+t(r)).localeCompare(""+t(e),n)}:void 0;return Array.prototype.sort.call(e,r)},translateObject:function(e,t){s.isArr(t)&&D(e,t);const n=Object.keys(t);let r=D(e,n);for(let e of n)r[t[e]]=r[e],delete r[e];return r},omit:function(e,t,n=!1){return s.isStr(e)?R(e,t,n,!0):s.isArr(e)||s.isList(e)?V(e,t,n,!0):q(e,t,n,!0)},join:function(e,...t){if(0===t.length)return[];if(!P(t,s.isArr))throw Error("Join only accepts arrays of data!");let n=X(e,"Join");const r={};return k(t,(e=>{k(e,(e=>{const t=n(e),o=r[t];r[t]=o?C(o,e):e}))})),r},groupBy:function(e,...t){if(0===t.length)return{};if(!P(t,s.isArr))throw Error("GroupBy only accepts arrays of data!");let n=X(e,"GroupBy");const r={};return k(t,(e=>{k(e,(e=>{const t=n(e),o=r[t];r[t]=o?C(o,e):[e]}))})),r},objectValues:function(e){return Object.values?Object.values(e):H(e,(e=>e))}};var G={};function B(e){return`[${e}] [${function(){let e=new Date;return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}:${e.getMilliseconds()}`}()}]`}function z(e,t){e.reverse(),e.push("display: inline-block; font-weight: bold; color: black","%c"+t),e.reverse()}const K={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:-1},J={LogLevel:K.TRACE};function Y(e){return J.LogLevel!==K.SILENT&&J.LogLevel<=e}G={Config:J,LogLevels:K,showTrace:function(){J.LogLevel=K.TRACE},showInfo:function(){J.LogLevel=K.INFO},showWarn:function(){J.LogLevel=K.WARN},showError:function(){J.LogLevel=K.ERROR},silent:function(){J.LogLevel=K.SILENT},trace:function(...e){Y(K.TRACE)&&(e.reverse(),e.push(B("ðŸ” TRACE")),e.reverse(),console.trace.apply(this,e))},info:function(...e){Y(K.INFO)&&(z(e,B("ðŸ”µ INFO")),console.log.apply(this,e))},warn:function(...e){Y(K.WARN)&&(z(e,B("ðŸš¨ WARN")),console.warn.apply(this,e))},error:function(...e){Y(K.ERROR)&&(z(e,B("ðŸ’¥ ERROR")),console.error.apply(this,e))}};var Q;Q={kebab:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let o=e.charAt(r);"_"!==o?(o>="A"&&o<="Z"&&r>0&&!n&&(t+="-"),t+=o.toLowerCase(),n=!1):(t+="-",n=!0)}return t},camel:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let o=e.charAt(r);"-"===o||"_"===o?n=!0:!0===n?(t+=o.toUpperCase(),n=!1):t+=0===r?o.toLowerCase():o}return t},pascal:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let o=e.charAt(r);"-"===o||"_"===o?n=!0:!0===n?(t+=o.toUpperCase(),n=!1):t+=0===r?o.toUpperCase():o}return t},snake:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let o=e.charAt(r);"-"!==o?(o>="A"&&o<="Z"&&r>0&&!n&&(t+="_"),t+=o.toLowerCase(),n=!1):(t+="_",n=!0)}return t}};var Z;const ee=/^[-+]?\d*(\.\d+|\d*)(e[-+]?\d+)?$/,te=/^[-+]?[a-f0-9]+$/,ne=/^[-+]?[0][0-7]+$/,re=/^[-+]?[01]+$/,oe=/^[a-z0-9]([a-z0-9._%-+][a-z0-9]|[a-z0-9])*@[a-z0-9]([a-z0-9.-][a-z0-9]|[a-z0-9])*\.[a-z]{2,6}$/i;Z={isDecimal:function(e){return ee.test(e)},isHex:function(e){return te.test(e)},isOctal:function(e){return ne.test(e)},isBinary:function(e){return re.test(e)},isEmail:function(e){return oe.test(e)},startsWith:function(e,t){return 0===e.indexOf(t)},endsWith:function(e,t){return e.indexOf(t)===t.length-1},contains:function(e,t){return e.indexOf(t)>=0}};var ie;class se{constructor(){this.__src__=void 0,this.keys=void 0}get count(){return this.keys.length}static of(e){let t=new se;return t.__src__=e,t.keys=Object.keys(e),t.len=t.keys.length,t}slice(e=0,t=this.count-1){this.keys=this.keys.slice(e,t)}key(e=0){return this.keys[e]}value(e=0){return this.__src__[this.key(e)]}loop(e,t=!1){if(t)for(let t=this.count-1;t>=0&&null!==e(this.value(t),this.key(t),t);t--);else for(let t=0;t<this.count&&null!==e(this.value(t),this.key(t),t);t++);return this}values(e=!1){let t=[];return this.loop((function(e,n,r){t.push(e)}),e),t}item(e){if(void 0===e)return;if(s.isArr(this.__src__))return this.value(e);let t={};return t[this.key(e)]=this.value(e),t}asObject(){let e={};return this.loop((function(t,n,r){e[n]=t})),e}asArray(e=!1){return this.values(e)}filter(e,t=!1){let n=[];return this.loop((function(t,r,o){let i=e(t,r,o);if(!0===i)n.push(r);else if(null===i)return null}),t),this.keys=n,this}map(e,t=!1){let n=[];return this.loop((function(t,r,o){n.push(e(t,r,o))}),t),n}any(e){let t=!1;return this.loop((function(n,r,o){if(t=e(n,r,o),!0===t)return null})),t}all(e){let t=!0;return this.loop((function(n,r,o){if(t=e(n,r,o),!1===t)return null})),t}first(e){if(!e)return this.item(0);let t;return this.loop((function(n,r,o){if(!0===e(n,r,o))return t=o,null})),this.item(t)}last(e){if(!e)return this.item(this.count-1);let t;return this.loop((function(n,r,o){if(!0===e(n,r,o))return t=o,null}),!0),this.item(t)}}ie={Queryable:se};var ae;function le(e){let t=e.toString().match(/{[\w\W]*}/);return null===t?e.toString():t[0]}ae={funcBodyEquals:function(e,t){return le(e)===le(t)},throttle:function(e,t){var n=(new Date).getTime();return function(r){(new Date).getTime()-n>=t&&(n=(new Date).getTime(),e.call(this,r))}},debounce:function(e,t){var n=null;function r(...r){clearTimeout(n),n=setTimeout((function(t){return e.apply(t,r)}),t,this)}return r.flush=function(...t){return clearTimeout(n),e.apply(this,t)},r},bindArgs:function(e,t){return function(){return e.apply(this,t)}},once:function(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}},o={...i,...G,...s,...Q,...Z,...ie,...ae};var ce,ue;const{isEl:fe,isEls:he,isStr:pe,isVal:de}=s;var me;const{toggle:ye,any:_e,all:ge,contains:ve,filter:be,flatMap:Ee,forEach:we}=i;class Te{static split(e){return e.trim().replace(/\s+/," ").split(" ")}constructor(e){this.element=e,Object.defineProperty(this,"items",{get(){return this.classes},set(e){let t=!1;this.classes&&(t=!0),!s.isVal(e)||s.isEmpty(e)?this.classes=[]:s.isArr(e)?this.classes=e:s.isStr(e)?this.classes=Te.split(e):e instanceof DOMTokenList&&(this.classes=Array.from(e)),t&&this.__update__()}}),this.items=e.getAttribute("class")}static of(e){return new Te(e)}__update__(){this.element.setAttribute("class",this.classes.join(" "))}contains(...e){return e=Ee(e),ge(e,(e=>ve(this.classes,e)))}add(...e){e=Ee(e),we(e,(e=>{this.contains(e)||this.classes.push(e.toString())})),this.__update__()}remove(...e){e=Ee(e);let t=this.classes.length;return this.classes=be(this.classes,(t=>!_e(e,(e=>e.endsWith("*")?t.startsWith(e.replace("*","")):t===e)))),this.__update__(),t!==this.classes.length}toggle(...e){ye(this.classes,e),this.__update__()}}Object.seal(Te),me={Classes:Te,cls:function(e){return Te.of(e)},addClass:function(e,...t){Te.of(e).add(t)},hasClass:function(e,...t){Te.of(e).contains(t)},removeClass:function(e,...t){Te.of(e).remove(t)},toggleClass:function(e,...t){Te.of(e).toggle(t)}};const{cls:xe}=me;function $e(e,t=document){return fe(e)?Array.of(e):he(e)?Array.from(e):pe(e)?fe(t)?Array.from(t.querySelectorAll(e)):(G.error(`Query root is not a node!\t[X.$(${e}, ${t})]`),null):(G.error(`Query is not string nor element X.$(${e})`),null)}ue={$:$e,$$:function(e,t=document){return fe(e)?Array.of(e):pe(e)?fe(t)?Array.of(t.querySelector(e)):(G.error(`Query root is not a node!\t[X.$(${e}, ${t})]`),null):(G.error(`Query is not string nor element X.$$(${e})`),null)},queryOf:function e(t,n,r){if(!de(t)||!fe(t))return G.error(`\nQuery generator's first parameter must be Element/Node! CAUSE: X.queryOf(${t}, ${n})`),null;n=n||document.body;let o=t.tagName;if(r=r||"",t.id)return o+=t.id?"#"+t.id:"",o+(""!==r?" "+r:"");if(xe(t).items.forEach((function(e){o+=""!==e?"."+e:""})),o){if($e(o,t.parentElement).length>1){let e=Array.from(t.parentElement.children).findIndex((function(e){return t===e}));e>0&&(o=o+":nth-child("+(e+1)+")")}}return t.parentElement&&t.parentElement!==n&&t.parentElement!==document?e(t.parentElement,n)+" > "+o+(""!==r?" "+r:""):o+(""!==r?" "+r:"")}};var Ce;const{isArr:ke,hasField:Ae,isEmpty:Oe}=s,{contains:Se,forEach:Le,filter:Ne}=i,{error:je}=G,{funcBodyEquals:Pe}=ae;Ce={setEvent:function(e,n,r,o){t.isBrowser()?(ke(n)||(n=Se(n," ")?n.split(" ").Map((e=>e.trim())):[n]),e.__EVENTS__=e.__EVENTS__||{},Le(n,(t=>{e.__EVENTS__[t]=e.__EVENTS__[t]||[];let n=function(t){r(t,e)};Ae(o,"duplicates",(e=>e))||(e.__EVENTS__[t]=Ne(e.__EVENTS__[t],(n=>{if(Pe(n.l,r))return e.removeEventListener(t,n.f,n.o),!1}))),e.__EVENTS__[t].push({f:n,l:r,o:o}),e.addEventListener(t,n,o)}))):je("Events are browser only!")},clearEvent:function(e,n){t.isBrowser()?(ke(n)||(n=Se(n," ")?n.split(" ").Map((e=>e.trim())):[n]),e.__EVENTS__=e.__EVENTS__||{},Oe(e.__EVENTS__)||Le(n,(function(t){e.__EVENTS__[t]=e.__EVENTS__[t]||[],Oe(e.__EVENTS__[t])||(Le(e.__EVENTS__[t],(n=>(e.removeEventListener(t,n.f,n.o),!1))),e.__EVENTS__[t]=[])}))):je("Events are browser only!")},hasEvent:function(e,t){return e.__EVENTS__&&e.__EVENTS__[t]&&!Oe(e.__EVENTS__[t])}};var Re;function qe(e){let t={};return i.forEach(e.getAttributeNames(),(n=>t[n]=e.getAttribute(n))),t}function Ve(e,t,n){return!!e.hasAttribute(t)&&(!n||e.getAttribute(t)===n)}function De(e,t){return e.getAttribute(t)}function Me(e,t,n){s.isArr(t)?i.forEach(t,(e=>this.set(e,n))):s.isObj(t)?i.forEach(t,((e,t)=>this.set(t,e))):e.setAttribute(t,n)}class Ue{constructor(e){this.element=e}keys(){return this.element.getAttributeNames()}all(){return qe(this.element)}set(e,t){return Me(this.element,e,t),this}get(e){return De(this.element,e)}has(e,t){return Ve(this.element,e,t)}remove(e){this.set(e,void 0)}}Re={getAttributes:qe,Attributes:Ue,getAttr:De,hasAttr:Ve,setAttr:Me,attrs:function(e){return new Ue(e)}};var He;function Fe(e){return e.offsetLeft}function Ie(e){return e.clientLeft}function We(e){return e.offsetWidth}function Xe(e){return e.clientWidth}He={left:Fe,leftWin:Ie,right:function(e){return Fe(e)+We(e)},rightWin:function(e){return Ie(e)+Xe(e)},width:We,widthWin:Xe};var Ge;Ge={append:function(e,...t){window.dispatchEvent(new CustomEvent("x.dom.append",{detail:{parent:e,elements:t}})),e.append(...t)}};var Be;const{error:ze}=G,{forEach:Ke}=i,{isVal:Je,isArr:Ye,isObj:Qe,isEl:Ze,hasField:et}=s,{setAttr:tt}=Re,{setEvent:nt}=Ce,rt="atr",ot="evt";Be={patch:function(e,t){if(Je(e))if(Ze(e)){if(et(t,rt)&&Qe(t.atr)&&Ke(t.atr,((t,n)=>{tt(e,n,t)})),et(t,"cls")){const n=t.cls;Ye(n)?e.className=n.join(" "):e.className=n}et(t,ot)&&Qe(t.evt)&&Ke(t.evt,((t,n)=>{nt(e,n,t)}))}else ze(`"${e}" is not Element or Node`);else ze(`Node is ${e}`)}};var it;const{isUnd:st,isStr:at}=s,{filter:lt,contains:ct}=i,ut=["","initial","unset",void 0,null];function ft(e,t,n){if(st(t)){let t=getComputedStyle(e);return t=lt(t,((e,t)=>at(t)&&!ct(ut,e))),t}if(st(n))return e.style[t]||getComputedStyle(e)[t];e.style[t]=n}it={style:ft,hasStyle:function(e,t){let n=ft(e,t);return!ct(ut,n)}},ce={...ue,...Ce,...me,...Re,...He,...Ge,...Be,...it};var ht,pt;const{$:dt,$$:mt}=ue;class yt{constructor(e,t){this.type=e,this.data=t}}pt={HttpContent:yt,HttpRq:class{setMethod(e){this.method=e.toUpperCase()}setUrl(e){this.url=encodeURI(e)}setArg(e,t){this.args[e]=t}buildUrlEncoded(e){let t="";e=e||this.args;let n=Object.keys(e);if(n.length>0)for(let r=0;r<n.length;r++)t+=encodeURIComponent(n[r])+"="+encodeURIComponent(e[n[r]]),r<n.length-1&&(t+="&");return t}setHeader(e,t){this.headers[e]=t.toString()}getHeader(e){return this.headers[e]}setContent(e,t){this.content.type=e.toLowerCase(),this.content.data=t}jsonContent(e){let t="";t="string"==typeof e?e:JSON.stringify(e),this.setContent("json",t),this.setHeader("Content-Type","application/json")}xmlContent(e){s.isStr(e)?this.setContent("xml",e):this.setContent("xml",e.outerHTML),this.setHeader("Content-Type","application/xml")}formContent(e){let t=mt(e)[0],n=new FormData(t);this.formMultiPartContent(n)}formMultiPartContent(e){this.setContent("form_multipart",e)}formUrlEncodedContent(e){this.setContent("form_urlencoded",this.buildUrlEncoded(e)),this.setHeader("Content-Type","application/x-www-form-urlencoded")}constructor(e="GET",t,n,r,o){this.args=n||{},this.headers=r||{},this.content=o||new yt("#urlencoded",{}),this.setMethod(e),this.setUrl(t)}}};var _t;_t={HttpRs:class{constructor(e){this.xhr=e,this.status={code:e.status,text:e.statusText},this.headers=e.getAllResponseHeaders(),this.contentLength=e.response.length||0,this.data=e.response,this.json=void 0,this.xml=void 0,"text"!==e.responseType&&""!==e.responseType||(this.text=e.responseText),Object.defineProperty(this,"json",{get(){try{e.responseJSON||(e.responseJSON=JSON.parse(this.xhr.responseText))}catch(e){console.log(e)}return e.responseJSON}}),Object.defineProperty(this,"xml",{get(){try{if(!e.responseXML&&!e.responseXml){let t=new DOMParser;e.responseXml=t.parseFromString(self.text,"text/xml")}}catch(e){console.log(e)}return e.responseXml}})}}};var gt;const{HttpRq:vt,HttpContent:bt}=pt,{HttpRs:Et}=_t,{error:wt}=G,{forEach:Tt,deepClone:xt}=i;gt={Ajax:class{constructor(e,t,n={},r={},o=new bt){this.rq={},this.rs={},this.rq=e instanceof vt?e:new vt(e,t,n,r,o),this.rs={readyState:0},this.xhr=new XMLHttpRequest,this.preparedCallback=function(e){},this.progressCallback=function(e,t){},this.uploadProgressCallback=function(e,t){},this.successCallback=function(e){},this.uploadFinishCallback=function(e){},this.failCallback=function(e,t){},this.timeoutCallback=function(e){},this.abortCallback=function(e){},Object.defineProperty(this,"xhr",{enumerable:!1})}header(e,t){return this.rq.setHeader(e,t),this}headers(e={}){return Tt(e,((e,t)=>{this.rq.setHeader(t,e)})),this}onSuccess(e){return this.successCallback=e,this}onUploadSuccess(e){return this.uploadFinishCallback=e,this}onFail(e){return this.failCallback=e,this}onTimeout(e){return this.timeoutCallback=e,this}onAbort(e){return this.abortCallback=e,this}onProgress(e){return this.progressCallback=e,this}onUploadProgress(e){return this.uploadProgressCallback=e,this}withContent(e={}){switch(e.type){case"json":this.rq.jsonContent(e.data);break;case"xml":this.rq.xmlContent(e.data);break;case"form":this.rq.formContent(e.data);break;case"form_multipart":this.rq.formMultiPartContent(e.data);break;case"form_urlencoded":this.rq.formUrlEncodedContent(e.data);break;default:this.rq.setContent(e.type,e.data)}return this}xmlData(e){return this.rq.xmlContent(e),this}formData(e){return this.rq.formContent(e),this}jsonData(e){return this.rq.jsonContent(e),this}urlEncodedData(e){return this.rq.formUrlEncodedContent(e),this}prepare(e){if(this.isPrepared&&!e)return this;let t=this.rq.url;this.rq.args&&!s.isEmpty(this.rq.args)&&(t.indexOf("?")>=0||(t+="?"),t+=this.rq.buildUrlEncoded()),this.rs={readyState:0},e&&(this.xhr=new XMLHttpRequest),this.xhr.open(this.rq.method,t),Tt(this.rq.headers,((e,t)=>{try{this.xhr.setRequestHeader(t,this.rq.headers[e])}catch(e){wt("Error while setting default header \n>>(",t,")<< Non-standard header name.")}}));let n=this,r=this.xhr;return this.xhr.onreadystatechange=function(e){if(4===r.readyState&&0!==r.status){let e=n.failCallback;r.status>=200&&r.status<=399&&(e=n.successCallback),n.rs=new Et(r),e&&e(n)}},this.xhr.onerror=function(e){n.failCallback&&n.failCallback(n,e)},this.xhr.onprogress=function(e){n.progressCallback&&n.progressCallback(n,e)},this.xhr.upload.onprogress=function(e){n.uploadProgressCallback&&n.uploadProgressCallback(n,e)},this.xhr.upload.onloadend=function(e){n.uploadFinishCallback&&n.uploadFinishCallback(n,e)},this.xhr.ontimeout=function(e){n.timeoutCallback&&n.timeoutCallback(n,e)},this.xhr.onabort=function(e){n.abortCallback&&n.abortCallback(n,e)},this.isPrepared=!0,this.preparedCallback&&this.preparedCallback(this.rq),this}send(){this.prepare();try{this.xhr.send(this.rq.content.data)}catch(e){this.failCallback(this,e)}return this}resend(){return this.prepare(!0).send()}async sendAsync(){const e=this,t=new Promise(((t,n)=>{e.onSuccess((()=>t(e))),e.onFail((()=>{n(e)}))}));return e.send(),t}}};var $t={};const{Ajax:Ct}=gt,{HttpContent:kt}=pt;function At(e,t,n,r,o,i){let s=new Ct(e.toUpperCase(),t,n,r);return o&&o.type&&("json"===o.type.toLowerCase()?s.jsonData(o.data):"urlencoded"===o.type.toLowerCase()?s.urlEncodedData(o.data):"form"===o.type.toLowerCase()?s.formData(o.data):s.Rq.setContent(o.type,o.data)),i.success&&s.onSuccess(i.success),i.fail&&s.onFail(i.fail),i.progress&&s.onProgress(i.progress),i.prepare&&(s.preparedCallback=i.prepare),i.uploadProgress&&(s.uploadProgressCallback=i.uploadProgress),i.uploadFinish&&(s.uploadFinishCallback=i.uploadFinish),s}function Ot(e){return At(e.method||"OPTIONS",e.url,e.params,e.headers,new kt(e.type,e.data),{success:e.success,fail:e.fail,progress:e.progress,prepare:e.prepare,uploadProgress:e.uploadProgress,uploadFinish:e.uploadFinish})}function St(e,t={},n={}){return new Promise(((r,o)=>{e.onSuccess((async()=>{t.default&&t.default(e,r,o,n);let i=t.onSuccess;if(i)try{i(e,r,o,n)}catch(e){}else r(e)})),e.onFail((async()=>{t.default&&t.default(e,r,o,n);let i=t.onFail;if(i)try{i(e,r,o,n)}catch(e){}else o(e)})),e.onAbort((async()=>{t.default&&t.default(e,r,o,n);let i=t.onAbort;if(i)try{i(e,r,o,n)}catch(e){}else o(e)})),e.onTimeout((async()=>{t.default&&t.default(e,r,o,n);let i=t.onTimeout;if(i)try{i(e,r,o,n)}catch(e){}else o(e)}))}))}async function Lt(e){let t=Ot(e);return t.send(e.finish),await St(t)}$t={makeHttpRequest:At,makeRequest:Ot,makePromise:St,sendRequest:Lt,Get:function(e,t){return new Ct("GET",e,t)},Post:function(e,t){return new Ct("POST",e,t)},Delete:function(e,t){return new Ct("DELETE",e,t)},Put:function(e,t){return new Ct("PUT",e,t)},Patch:function(e,t){return new Ct("PATCH",e,t)},sendGet:function(e){return e.method="GET",e.type=void 0,e.data=void 0,Lt(e)},sendDelete:function(e){return e.method="DELETE",Lt(e)},sendPost:function(e){return e.method="POST",Lt(e)},sendPut:function(e){return e.method="PUT",Lt(e)},sendPatch:function(e){return e.method="PATCH",Lt(e)}};var Nt;const{error:jt}=G,{Ajax:Pt}=gt,{startsWith:Rt,endsWith:qt,filter:Vt,forEach:Dt}=i;class Mt{constructor(){this.all=[],this.any=!1}use(e){this.all.push(e),this.any=!0}async intercept(e){for(let t=0;t<this.all.length;t++)e=await this.all[t](e);return e}}Nt={XHttpClient:class{constructor(e="",{ratePerMinute:t=300,defaultParams:n,defaultHeaders:r,timeout:o,retries:i}={}){qt(e,"/")&&(e=e.split("").splice(e.length-1).join()),this.interceptors={request:new Mt,response:new Mt},this.host=e,this.__queue=[],this.__sending=[],this.__interval=void 0,this.__ratePerMinute=t,this.__timeBetween=6e4/t,this.__lastRequestTime=(new Date).getTime()-this.__timeBetween,this.timeout=o||6e4,this.retries=i||0,this.defaultHeaders=r||{},this.defaultParams=n||{}}_intervalSend(e){if(0===e.__queue.length)return clearInterval(e.__interval),void(e.__interval=void 0);let t=(new Date).getTime();if(t-e.__lastRequestTime>e.__timeBetween){let n=e.__queue.shift();e._sendImmediately(n,t)}}_sendImmediately(e,t){this.interceptors.request.any?this.interceptors.request.intercept(e).then((()=>{e.send(),this.__sending.push(e),this.__lastRequestTime=t})).catch((e=>{console.error(e)})):(e.send(),this.__sending.push(e),this.__lastRequestTime=t)}_removeSendingRequest(e){let t=this.__sending.indexOf(e);t>=0&&this.__sending.splice(t)}_addRequest(e,{responseType:t,cancelToken:n}){this.__queue.push(e),this.__interval||(this.__interval=setInterval(this._intervalSend,1,this)),e.cancelToken=n,t&&(e.xhr.responseType=t),e.RETRIES=0,e.xhr.timeout=this.timeout,this.defaultHeaders&&e.headers(this.defaultHeaders),this.defaultParams&&Dt(this.defaultParams,((t,n)=>{e.rq.setArg(n,t)}));let r=$t.makePromise(e,{default(e,t,n,r){r._removeSendingRequest(e)},onSuccess(e,t,n,r){r.interceptors.response.any?r.interceptors.response.intercept(e).then((()=>t(e))).catch((e=>n(e))):t(e)},onFail:(e,t,n,r)=>(r.interceptors.response.any?r.interceptors.response.intercept(e).then((()=>n(e))).catch(((e,t)=>n(e,t))):n(e),n(e,Error("Request failed."))),onTimeout(e,t,n,r){if(e.RETRIES>=r.retries)return n(e,Error("Request timed out after "+e.RETRIES+" retries."));r.__sending.push(e.resend()),e.RETRIES+=1}},this);return e._promise_=r,r}send(e){return this._addRequest(e)}_contentRequest(e,t,{params:n,headers:r,content:o,responseType:i,cancelToken:s}){return!Rt(t,"/")&&t.length>1&&(t="/"+t),this._addRequest(e(this.host+t,n||{}).headers(r||{}).withContent(o||{type:"",data:""}),{responseType:i,cancelToken:s})}get(e,{params:t,headers:n,responseType:r,cancelToken:o}={}){return!Rt(e,"/")&&e.length>1&&(e="/"+e),this._addRequest($t.Get(this.host+e,t).headers(n),{responseType:r,cancelToken:o})}post(e,{params:t,headers:n,content:r,responseType:o,cancelToken:i}={}){return this._contentRequest($t.Post,e,{params:t,headers:n,content:r,responseType:o,cancelToken:i})}put(e,{params:t,headers:n,content:r,responseType:o,cancelToken:i}={}){return this._contentRequest($t.Put,e,{params:t,headers:n,content:r,responseType:o,cancelToken:i})}patch(e,{params:t,headers:n,content:r,responseType:o,cancelToken:i}={}){return this._contentRequest($t.Patch,e,{params:t,headers:n,content:r,responseType:o,cancelToken:i})}delete(e,{params:t,headers:n,content:r,responseType:o,cancelToken:i}={}){return this._contentRequest($t.Delete,e,{params:t,headers:n,content:r,responseType:o,cancelToken:i})}cancel(e){this.__queue=Vt(this.__queue,(t=>t.cancelToken!==e));let t=Vt(this.__sending,(t=>t.cancelToken===e));Dt(t,(e=>{try{e.xhr.abort()}catch(e){console.error(e)}})),this.__sending=Vt(this.__sending,(t=>t.cancelToken!==e))}cancelAll(){this.__interval>=0&&clearInterval(this.__interval),setTimeout((()=>{Dt(this.__sending,(function(e){try{e.xhr.abort()}catch(e){}})),this.__queue=[]}),1)}}},ht={...pt,..._t,...gt,...$t,...Nt};var Ut,Ht,Ft,It;const{error:Wt}=G,{flatMap:Xt}=i;var Gt,Bt;Bt={FRAG:-1,TEXT:0,NODE:1,VIEW:2};const{deepClone:zt}=i,{flatMap:Kt}=i;var Jt,Yt={};const{kebab:Qt}=Q,{forEach:Zt}=i;function en(e){let t=[];return Zt(e,((e,n)=>{t.push(`${Qt(n)}: ${e};`)})),t}Yt={generateStyles:en,generateCss:function(e,t="\n"){return en(e).sort(((e,t)=>e[0].localeCompare(t[0]))).join(t)}};const{setEvent:tn}=Ce,{forEach:nn}=i,{isPrim:rn,isArr:on,isStr:sn,isVal:an}=s;function ln(e,t){return an(e)?sn(e)?e:on(e)?e.join(t):Yt.generateCss(e,t):""}Jt={randomId:function(){return Date.now().toString(24).slice(2)+Math.random().toString(24).slice(6)},normalize:function e(t,{createText:n,parent:r,empty:o=[],list:i}){if(!(t instanceof Array)){if(null==t)return o;t=[t]}let s=[];const a=t.length;for(let o=0;o<a;o++){let i=t[o];if(null==i||rn(i))"symbol"==typeof i&&(i=i.toString()),i=n(""+i),i.$parent=r,s.push(i);else if(i.isNode&&null===i.tag&&(i=i.children||[]),i instanceof Array){i=e(i,{createText:n,parent:r});for(let e=0;e<i.length;e++)i[e].$parent=r,s.push(i[e])}else i.$parent=r,s.push(i)}return 0===s.length&&(s=o),s},setElementProps:function(e,t,n,r){t&&nn(t,((t,n)=>{"style"===n?t=ln(t," "):"className"===n&&(n="class"),e.setAttribute(n,t)})),n&&nn(n,((t,n)=>{r&&(t=t.bind(r)),tn(e,n,t)}))},compileProps:function(e){const t={events:{},attrs:{}};return nn(e,((e,n)=>{var r;/on[A-Z]+/.test(n)?t.events[(r=n,r.slice(2).toLowerCase())]=e:t.attrs[n]=e})),t},compileStyles:ln,sameProps:function(e={},t={}){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r of n)if(t[r]!==e[r])return!1;return!0},randomHexColor:function(){return"#"+Math.random().toString(16).slice(2,8)}};const{setElementProps:cn,compileProps:un,normalize:fn}=Jt;function hn(e="#text",t,n){if(e=e.toLowerCase(),this.tag=e,this.element=void 0,"#text"===e)return this.$t=Bt.TEXT,this.isText=!0,this.text=t,void Object.defineProperty(this,"$clone",{value:function(){return pn(this.text)},configurable:!1,writable:!1,enumerable:!1});this.$t=Bt.NODE,this.isNode=!0;let r=un(t||{});this.attrs=r.attrs,this.events=r.events,this.props=r.props,this.children=fn(n||[],{createText:pn,parent:this}),this.isEmpty=()=>0===this.children.length,Object.defineProperty(this,"$clone",{value:function(){return new hn(this.tag,zt(this.props||{}),(n||[]).map((e=>e.$clone())))}})}function pn(e){return new hn("#text",e)}Object.defineProperty(hn.prototype,"$parent",{value:void 0,configurable:!1,writable:!0,enumerable:!1}),Object.defineProperty(hn.prototype,"isEmpty",{get(){return 0===this.children.length}}),hn.prototype.$destroy=function(){this.element.remove()},Gt={VNode:hn,TYPE:Bt,createNode:function(e,t,n){return new hn(e,t,n)},createText:pn};const{createNode:dn}=Gt,{normalize:mn,setElementProps:yn}=Jt,{createText:_n}=Gt;function gn(e,t,n,r){let o=document.createElement(e);return yn(o,t,n,r),o}function vn(e){return document.createTextNode(e)}function bn(e,t){if(e.beforeMount)try{e.beforeMount.call(e)}catch(t){setTimeout(Wt("("+e.$name+").beforeMount",t))}e.$nodes||e.$renderAndSetNodes(),e.$rootElement=t;let n=e.$nodes.map((n=>n.$isView?bn(n,t):En(n,e)));return e.Mounted&&setTimeout((function(){try{e.Mounted.call(e)}catch(t){Wt("("+e.$name+").Mounted",t)}}),0),e.$isDirty=!1,n}function En(e,t){if(e.isText)return e.element=vn(e.text),e.element.__node=e,e.element;if(e.element=gn(e.tag,e.attrs,e.events,t),e.element.__node=e,!e.isEmpty){let n=e.children.map((n=>wn(n,t,e.element)));HTMLElement.prototype.append.apply(e.element,mn(n,{createText:_n,parent:this}))}return e.element}function wn(e,t,n){return e.$isView?bn(e,n):En(e,t)}It={render:function(e,t){if(!t)throw Error("render(): rootElement is undefined");if(t.__app)return void console.error("already rendered");e.$rootElement=t,t.innerHTML="";let n=wn(e,e,t);n instanceof Array||(n=[n]),n=Xt(n);for(let e=0;e<n.length;e++)Node.prototype.appendChild.call(t,n[e]);t.__app=e},createDom:wn,createNodeDom:En,createViewDom:bn,createTextDom:vn,createChildrenDom:function(e,t,n){return e.flatMap((e=>wn(e,t,n)))},createElement:gn};const Tn=Object.seal({queue:[],busy:!1,running:!1,idle:0});var xn;const{clearEvent:$n,setEvent:Cn}=Ce,{forEach:kn}=i,{compileStyles:An}=Jt;function On(){if(0===Tn.queue.length)return Tn.idle++,Tn.idle>3?void(Tn.running=!1):void 0;if(Tn.idle=0,!Tn.busy){let e=Tn.queue.shift();Tn.busy=!0,e(),e=null,setTimeout((function(){Tn.busy=!1}))}setTimeout(On,20)}xn={patchAttrs:function(e,t,n){const r=Object.keys(e),o=Object.keys(t),i=Object.keys(e);for(let r of i){const o=e[r],i=t[r];if("style"===r){const e=An(o," ");e!==An(i," ")&&n.setAttribute("style",e)}else"className"===r?n.setAttribute("class",o):n.setAttribute(r,o)}for(let e of o)r.indexOf(e)<0&&n.removeAttribute(e)},patchEvents:function(e={},t={},n){kn(t,(function(t,r){e[r]!==t&&$n(n,r)})),kn(e,(function(e,t){Cn(n,t,e)}))}},Ft={dispatchTask:function(e){e&&(Tn.queue.push(e),Tn.running||setTimeout(On,1))},scheduler:Tn};const{dispatchTask:Sn,scheduler:Ln}=Ft,{createDom:Nn,createNodeDom:jn,createViewDom:Pn,createChildrenDom:Rn}=It,{error:qn}=G,{patchAttrs:Vn,patchEvents:Dn}=xn,{createText:Mn,createNode:Un}=Gt,{normalize:Hn,sameProps:Fn}=Jt;function In(e,t,n){if(e.shouldUpdate)try{if(!e.shouldUpdate.call(e,{oldProps:e.props,newProps:t}))return}catch(t){setTimeout(qn("("+e.$name+").shouldUpdate",t),0)}else if(!e.$isDirty)return;if(e.beforeUpdate)try{e.beforeUpdate.call(e,t)}catch(t){setTimeout(qn("("+e.$name+").Updated",t))}e.$updateWith(t,n);const r=e.$renderNodes();e.$nodes=zn(r,e.$nodes,e,e.$rootElement),e.$isDirty=!1,e.Updated&&setTimeout((function(){try{e.Updated.call(e)}catch(t){qn("("+e.$name+").Updated",t)}}),0)}function Wn(e,t,n){e.tag===t.tag?(e.element=t.element,e.element.__node=e,t.element=null,Fn(t.props,e.props)||(Vn(e.attrs,t.attrs,e.element),Dn(e.events,t.events,e.element)),e.element||qn("Fatal: current node has no element",t,e),zn(e.children,t.children,n,e.element)):(e.element=jn(e,n),t.element.replaceWith(e.element),e.element.__node=e)}function Xn(e,t){e.text!==t.text&&(t.element.nodeValue=e.text),e.element=t.element,e.element.__node=e}function Gn(e,t,n,r,o,i,s,a,l){let c=!1;if(void 0!==e.props.key){let n=-1;for(let t=o;t<i;t++)if(r[t].props.key===e.props.key){n=t,c=!0;break}n>o&&(!function(e,t){let n=jn(Un("div",{style:"display: none"})),r=t.$isView?t.$elements:[t.element],o=e.$isView?e.$elements:[e.element];r[0].insertAdjacentElement("beforeBegin",n),o[0].replaceWith(...r),n.replaceWith(...o)}(r[n],r[o]),r[o]=r[n],r[n]=t,t=r[o])}if(t.$name===e.$name&&c)In(t,e.props,e.$children),t.$parent=e.$parent,e.$parent=void 0,n[o]=t;else{let n=t.$destroy(!0);if(e.$isView){let t=Pn(e,l);Element.prototype.replaceWith.apply(n,t)}else{let t=jn(e,a);n.replaceWith(t),e.element=t,e.element.__node=e}}}function Bn(e,t,n,r){const o=Nn(e,n,r);let i;i=t.isNode||t.isText?t.element:t.$destroy(!0),i?(Element.prototype.replaceWith.apply(i,o instanceof Array?o:[o]),e.element=o,e.element.__node=e):console.error("Empty anchor",t)}function zn(e,t,n,r){if(!r)throw Error("patchNodes: rootElement is not defined");let o=e.length,i=t.length,s=o>i,a=s?i:o,l=0;for(;l<a;l++){const o=t[l],s=e[l];if(o.$t===s.$t){if(o.isNode){Wn(s,o,n);continue}if(o.isText){Xn(s,o);continue}Gn(s,o,e,t,l,i,0,n,r)}else Bn(s,o,n,r)}if(s){let t=Rn(e.slice(l),n,r);HTMLElement.prototype.append.apply(r,t)}else if(i>o)for(let e=l;e<i;e++)t[e].$destroy();return e}Ht={patchView:In,updateView:function(e){Sn((()=>{In(e,e.props,e.$children)}),e)}};const{updateView:Kn}=Ht,{debounce:Jn}=ae,{error:Yn}=G,{randomId:Qn,normalize:Zn,sameProps:er}=Jt,{createNode:tr}=Gt,{warn:nr}=G,{deepClone:rr}=i,{createText:or}=Gt;function ir(e={}){this.$t=Bt.VIEW,e.name=e.name||"View::"+Qn(),this.$name=e.name,this.$proto=Object.freeze(e);let t=Object.getOwnPropertyNames(e);for(let n=0;n<t.length;n++){const r=t[n];e[r]instanceof Function?this[r]=e[r].bind(this):this[r]=rr(e[r])}this.props=this.props||{},this.state=this.state||{},this.render||(nr("View has no render!"),this.render=()=>""),Object.defineProperty(this,"$elements",{get(){return this.$nodes.flatMap((e=>null==e?[]:e.$isView?e.$elements:e.element))}})}function sr(e){return Object.prototype.isPrototypeOf.call(ir,e)}Object.defineProperty(ir.prototype,"$parent",{value:void 0,configurable:!1,writable:!0,enumerable:!1}),ir.prototype.$isView=!0,ir.prototype.$clone=function(){return new ir({...this.$proto})},ir.prototype.$updateWith=function(e,t){return e.key&&(this.$key=e.key),this.props={...this.props,...e},this.$children=Zn(t,{createText:or}),this},ir.prototype.$renderNodes=function(){return Zn(this.render({props:this.props,state:this.state}),{createText:or,parent:this,empty:[tr("slot",{style:"display: none"})]})},ir.prototype.$renderAndSetNodes=function(){if(this.beforeCreate)try{this.beforeCreate()}catch(e){setTimeout(Yn("("+this.$name+").beforeCreate()",e))}if(this.$nodes=this.$renderNodes(),this.Created)try{this.Created()}catch(e){setTimeout(Yn("("+this.$name+").Created()",e))}return this},ir.prototype.$destroy=function(e){if(this.beforeDestroy)try{this.beforeDestroy()}catch(e){setTimeout(Yn("("+this.$name+").beforeDestroy()",e))}let t;for(let e=0;e<this.$nodes.length;e++){let n=this.$nodes[e];n.element?t?n.element.remove():t=n.element:t=t||n.$destroy()}if(e)return t;t&&t.remove()},ir.prototype.$clean=function(){this.$nodes=void 0,this.state=void 0,this.props=void 0},ir.prototype.$update=Jn((function(){Kn(this)}),20),ir.prototype.setState=function(e){let t=this.state;e.call(this,t),this.$isDirty=!0,this.$update()},Ut={View:ir,isViewClass:sr,getViewInstance:function(e,t){if(sr(e))return new e(t);if(e instanceof ir)return e;if(e===ir)return new ir(t);throw TypeError("Cannot get view instance of "+e)},createView:function(e){return new ir(e)},renderView:function(e,t,n){return n=Zn(n||[],{createText:or}),e.$children=n,e.$updateWith(t,n),e.$renderAndSetNodes(),e}};const{View:ar,createView:lr}=Ut;var cr;const{normalize:ur}=Jt,{renderView:fr}=Ut,{createNode:hr,createText:pr}=Gt;cr={h:function(e,t,...n){return null===e?n||[]:(null==t&&(t={}),e.$isView?e.$clone().$updateWith(t,n):hr(e,t,ur(n,{createText:pr})))},t:function(e){return pr(e)}};const{h:dr}=cr,{render:mr}=It;r={Core:o,Dom:ce,Http:ht,UI:{Exir:{View:ar,createComponent:lr,jsx:dr,mount:mr,use:function(e){e.attachTo(ar)}}}},t.setGlobal({X:{...r.Core,...r.Dom,...r.Http},...r.UI});var yr=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new A(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=$(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?d:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={};function y(){}function _(){}function g(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,E=b&&b(b(O([])));E&&E!==n&&r.call(E,i)&&(v=E);var w=g.prototype=y.prototype=Object.create(v);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,s,a){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(l.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function $(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,$(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function O(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:S}}function S(){return{value:t,done:!0}}return _.prototype=w.constructor=g,g.constructor=_,_.displayName=l(g,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,a,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},T(x.prototype),x.prototype[s]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new x(c(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(w),l(w,a,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}({});try{regeneratorRuntime=yr}catch(e){Function("r","regeneratorRuntime = r")(yr)}}();
//# sourceMappingURL=exir-bundle-legacy.js.map

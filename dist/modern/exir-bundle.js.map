{"mappings":"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","sources":["./home/blkr/src/js/exir/node_modules/.pnpm/@parcel/scope-hoisting@2.0.0-beta.1/node_modules/@parcel/scope-hoisting/lib/helpers.js","./core/scope.js","./core/types.js","./core/collections.js","./core/logging.js","./core/cases.js","./core/strings.js","./core/queryable.js","./core/functions.js","./core/index.js","./dom/query.js","./dom/classes.js","./dom/event.js","./dom/attributes.js","./dom/position.js","./dom/append.js","./dom/patch.js","./dom/styles.js","./dom/index.js","./http/request.js","./http/response.js","./http/ajax.js","./http/methods.js","./http/client.js","./http/index.js","./vm/component.js","./dom/tic.js","./vm/vnode.js","./vm/utility.js","./vm/renderer.js","./vm/app.js","./index.js","./exir-bundle.js"],"sourcesContent":[null,"/**\n * Merges an object with global namespace\n * @private\n * @param {Object} obj\n */\nfunction setGlobal(obj) {\n    for (let key of Object.keys(obj)) {\n        global[key] = obj[key];\n    }\n}\n\n/**\n * Code generator for prototype modification, used in polyfills\n */\nclass Extension {\n    types = []\n    /** Generated code */\n    pcode = \"\\n\"\n\n    /**\n     * @constructor\n     * @param {any[]} types - Array of prototypes\n     */\n    constructor(types) {\n        this.types = types;\n    }\n\n    /**\n     * Defines a new function for given prototypes\n     *\n     * @param {Function} namedFunc A named function\n     * @return {string}\n     */\n    define(namedFunc) {\n        if (!namedFunc.name) {\n            let err = `Function must have a name [Extension.define(f)]\\n<<${namedFunc}>>`;\n            console.error(err);\n            return `\\n/**\\n *${err}\\n */`;\n        }\n        let code = \"\\n\";\n        for (let p of this.types) {\n            if (p !== undefined)\n                code += `${p.name || p}.prototype.${namedFunc.name} = `;\n        }\n        code += namedFunc.toString() + \";\\n\";\n\n        this.pcode += code;\n\n        return code\n    }\n\n    polyfill(namedFunc) {\n        if (!namedFunc.name) {\n            let err = `Extension function must have a name:\\n<<${namedFunc}>>`;\n            console.error(err);\n            return `\\n/**\\n *${err}\\n */`;\n        }\n        let code = \"\\n\";\n        for (let p of this.types) {\n            code += `if (${p.name || p}.prototype.${namedFunc.name} === undefined) ${p.name || p}.prototype.${namedFunc.name} = ${namedFunc.toString()};\\n`;\n        }\n        this.pcode += code;\n    }\n}\n\nfunction isBrowser() {\n    return global.window !== undefined && global.document !== undefined && global.navigator !== undefined\n}\n\nif (!isBrowser()) {\n// -------------\n    global.HTMLElement = !global.HTMLElement? function HTMLElement(){}: global.HTMLElement\n    global.Element = !global.Element? function Element(){}: global.Element\n    global.Node = !global.Node? function Node(){}: global.Node\n    global.HTMLCollection = !global.HTMLCollection? function HTMLCollection(){}: global.HTMLCollection\n    global.NodeList = !global.NodeList? function NodeList(){}: global.NodeList\n// -------------\n}\n\nmodule.exports = {setGlobal, Extension, isBrowser}","/**\n * @module core/types\n * @memberOf core\n */\n\n/**\n * If is class or function return class/function name else returns typeof\n * @param x\n * @return {\"undefined\"|\"object\"|\"boolean\"|\"number\"|\"string\"|\"function\"|\"symbol\"|\"bigint\"|*}\n */\nfunction typeName(x) {\n    if (x.hasOwnProperty('constructor')) {\n        return x.constructor.name;\n    }\n    return typeof x;\n}\n\n/** Is undefined\n * @param x\n * @returns {boolean}\n */\nfunction isUnd(x) {\n    return x !== null && x === undefined;\n}\n\n/** Is null\n * @param x\n * @return {boolean}\n */\nfunction isNull(x) {\n    return x === null;\n}\n\n/** Is value !null && !undefined\n * @param x\n * @return {boolean|boolean}\n */\nfunction isVal(x) {\n    return !isUnd(x) && !isNull(x);\n}\n\n/** Is number\n * @param x\n * @return {boolean}\n */\nfunction isNum(x) {\n    return typeof x === \"number\";\n}\n\n/** Is string|String\n * @param x\n * @return {boolean}\n */\nfunction isStr(x) {\n    return typeof x === \"string\" || x instanceof String;\n}\n\n/** Is function\n * @param x\n * @return {boolean}\n */\nfunction isFun(x) {\n    return typeof x === \"function\";\n}\n\n/** Is object\n * @param x\n * @return {boolean|boolean}\n */\nfunction isObj(x) {\n    return x !== null && typeof x === \"object\";\n}\n\n/** Is Array\n * @param x\n * @return {boolean}\n */\nfunction isArr(x) {\n    return x instanceof Array\n}\n\n/** Is primitive isVal && !isObj && !isFun\n * @param x\n * @return {boolean}\n */\nfunction isPrim(x) {\n    return isVal(x) && !isObj(x) && !isFun(x);\n}\n\n/** Is List (has length property and item() function)\n * @param x\n * @return {boolean|boolean}\n */\nfunction isList(x) {\n    return isVal(x.length) && isFun(x.item)\n}\n\n/** Is MutableList (has length property, item() and add() functions)\n * @param x\n * @return {boolean}\n */\nfunction isMutableList(x) {\n    return isVal(x.length) && isFun(x.item) && isFun(x.add)\n}\n\n/** Is Set type\n * @param x\n * @return {boolean}\n */\nfunction isSet(x) {\n    return x instanceof Set\n}\n\n/** Is Map type\n * @param x\n * @return {boolean}\n */\nfunction isMap(x) {\n    return x instanceof Map\n}\n\n/** Is Error type\n * @param x\n * @return {boolean}\n */\nfunction isError(x) {\n    return x instanceof Error\n}\n\n/** Is Element/Node\n * @param x\n * @return {boolean}\n */\nfunction isEl(x) {\n    return x instanceof Element || x instanceof HTMLElement || x instanceof Node;\n}\n\n/** Is NodeList || HTMLCollection\n * @param x\n * @return {boolean}\n */\nfunction isEls(x) {\n    return x instanceof HTMLCollection || x instanceof NodeList;\n}\n\n/**\n * Object has field\n * @param {Object} obj - source object\n * @param {String} field - field/property name\n * @param {Function} [pred] - optional predicate function to check field\n * @return {boolean}\n */\nfunction hasField(obj, field, pred) {\n    if (!isVal(obj)) return false;\n    if (isFun(pred)) {\n        return pred(obj[field]);\n    }\n    return obj.hasOwnProperty(field);\n}\n\n/** Is Empty Array/List/Object/String\n * @param x\n * @return {boolean}\n */\nfunction isEmpty(x) {\n    if (hasField(x, 'length')) return x.length <= 0;\n    if (isFun(x)) return false;\n    if (isObj(x)) return Object.keys(x).length <= 0\n    return true;\n}\n\n/**\n * Custom Enum implementation\n *\n * @param src {Object | String[]}\n * @return {Object}\n * @constructor\n */\nfunction Enum(src) {\n    let c = 0;\n    let MAP = {};\n    for (let i of Object.keys(src)) {\n        MAP[MAP[c] = i] = c++;\n    }\n    return MAP;\n}\n\n/**\n * Deserialize sequence of key values (key, value, ...) into an object\n *\n * @param {any} args - key{String}, value{*} sequence\n * @return {Object}\n */\nfunction dict(...args) {\n    let o = {};\n    for (let i = 0; i < args.length; i++) {\n        if (i % 2 !== 0) continue;\n        o[args[i]] = args[i + 1]\n    }\n    return o;\n}\n\nmodule.exports = {\n    typeName,\n    isUnd, isNull, isVal,\n    isNum, isStr, isFun,\n    isObj, isArr, isPrim,\n    isList, isMutableList,\n    isSet,isMap, isError,\n    isEl, isEls, hasField,\n    isEmpty, Enum, dict\n};","/**\n * @module core/collections\n * @memberOf core\n */\n\nconst T = require(\"./types\");\n\nif (!global._X_LOOP_BREAK_) {\n    global._X_LOOP_BREAK_ = Symbol(\"BREAK_LOOP\");\n    global._X_ANY_ = Symbol(\"ANY\");\n    global._X_ALL_ = Symbol(\"ALL\");\n}\n/**\n * Break from functional loops: forEach, filter, ...\n * @type {symbol}\n */\nconst BREAK = global._X_LOOP_BREAK_;\n/**\n * Match Any: Used as value in predicate object\n * @type {symbol}\n */\nconst ANY = global._X_ANY_;\nconst ALL = global._X_ALL_;\nconst UNSAFE_PROPS = ['__proto__', 'constructor', '__defineGetter__', '__defineSetter__', 'prototype'];\n\n/**\n * Get item by index from multiple source types\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} s - source\n * @param {Number|String} i - item index\n * @returns {any|null|undefined}\n */\nfunction item(s, i) {\n    if (!T.isVal(s)) return undefined;\n    if (T.isObj(s)) return s[i]\n    if (T.isStr(s)) return s[i]\n    if (T.isArr(s)) return s[i]\n    else return s.item(i)\n}\n\n/**\n * Source contains value or key:value\n *\n * @param {Array|Object|String} src\n * @param {any} value\n * @param {String|undefined} [key]\n * @returns {boolean}\n */\nfunction contains(src, value, key) {\n    if (!T.isVal(src)) return false;\n    if (!T.isArr(src) && T.isObj(src)) return src[key] === value;\n    return src.indexOf(value) >= 0;\n}\n\n/**\n * Add item(s) to source\n *\n * @param {Array|{add:Function}} src - source\n * @param {any} v - values\n */\nfunction add(src, ...v) {\n    if (T.isArr(src)) {\n        forEach(v, (vi) => src.push(vi))\n    } else if (T.isMutableList(src)) {\n        src.add(v);\n    }\n}\n\n/**\n * Remove item(s) from source\n *\n * @param {Array|String} src\n * @param {...any} it\n * @returns {boolean}\n */\nfunction remove(src, ...it) {\n    it = flatMap(it);\n    let any = false;\n    forEach(it, (item) => {\n        let idx = src.indexOf(item);\n        if (idx >= 0) {\n            any = true\n            src.splice(idx, 1);\n        }\n    });\n\n    return any;\n}\n\n/**\n * Toggles items in source\n *\n * @param {Array} src\n * @param {...any} c\n */\nfunction toggle(src, ...c) {\n    if (c.length === 0) return;\n    c = flatMap(c);\n    let idx = undefined;\n    if (c.length === 1) {\n        if (!remove(src, c)) {\n            add(src, c[0])\n        }\n    } else {\n        c.push(c[0]);\n        let any = false;\n        forEach(src, (cl, i) => {\n            idx = c.indexOf(cl);\n            if (idx >= 0 && c.length > (idx + 1)) {\n                any = true;\n                src[i] = c[idx + 1]\n            }\n        });\n        if (!any) {\n            src.push(c[0])\n        }\n    }\n}\n\nfunction objMatchOne(o, match) {\n    let m = Object.keys(match);\n    for (let k of m) {\n        // if (!T.isObj(o[k])) continue;\n        if (match[k] === ANY && o.hasOwnProperty(k)) return true;\n        if (match[k] === o[k]) return true;\n    }\n    return false\n}\n\nfunction objMatchAll(o, match) {\n    let m = Object.keys(match);\n    for (let k of m) {\n        // if (!T.isObj(o[k])) return false;\n        if (match[k] === ANY) continue;\n        if (match[k] !== o[k]) return false\n    }\n    return true\n}\n\nfunction predicate(f, def = () => true, inc = true) {\n    if (T.isUnd(f)) return def;\n    if (T.isFun(f)) return f;\n    else if (f instanceof RegExp) return (v) => !T.isObj(v) ? f.test(v.toString()) : false;\n    else if (T.isObj(f)) {\n        if (Object.keys(f).length === 0) return def;\n        return inc ? (v) => objMatchOne(v, f) : (v) => objMatchAll(v, f);\n    } else return (v) => v === f;\n}\n\nfunction funOrKey(f) {\n    if (T.isUnd(f)) return (v) => v;\n    if (T.isFun(f)) return f;\n    if (T.isStr(f)) {\n        const key = f;\n        f = (v) => v[key];\n    }\n    throw Error(`Predicate ${f} cannot be of type ${typeof f}`)\n}\n\n/**\n * Create empty instance of given source\n *\n * @param {any} src - source object\n * @param {any} def - default value for primitives\n * @returns {any} empty instance of src\n */\nfunction emptyOf(src, def = {}) {\n    if (T.isStr(src)) return \"\";\n    if (T.isList(src)) return [];\n    if (T.isObj(src)) {\n        if (T.isEl(src)) {\n            if (src.nodeType === 3 || src.nodeType === 8) {\n                return document.createTextNode(src.textContent);\n            } else {\n                return document.createElement(src.tagName);\n            }\n        }\n        if (src.__proto__)\n            return Object.create(src.__proto__);\n        return {};\n    }\n    return def\n}\n\n/**\n * Type-agnostic concat\n *\n * @param {Array|String|Object} target\n * @param {Array|String|Object} source\n * @returns {Array|String|Object}\n */\nfunction concat(target, source) {\n    if (T.isStr(target)) {\n        return target.concat(source);\n    }\n    if (T.isArr(target)) {\n        return target.concat(source);\n    }\n\n    for (let k of Object.keys(source)) {\n        if (!target[k])\n            target[k] = source[k];\n    }\n    return target\n}\n\n/**\n * Polyfill-like for Object.values (uses native method if available)\n *\n * @param {Object} obj\n * @returns {Array|undefined} - array of values\n */\nfunction objectValues(obj) {\n    if (Object.values) {\n        return Object.values(obj);\n    } else {\n        return map(obj, (v)=>v)\n    }\n}\n\n/**\n * Index for loop from \"init\" to \"finish\"(included) by \"step\"\n *\n * @param {Function} func\n * @param {Number} init\n * @param {Number} finish\n * @param {Number} [step]\n */\nfunction forN(func, init=0, finish=0, step=init<finish?1:-1) {\n    if (step>0) {\n        for (; init<=finish; init+=step) {\n            func(init)\n        }\n    }\n    for (; init>=finish; init+=step) {\n        func(init)\n    }\n}\n\n/**\n * forEach(left) with limited range\n *\n * @param {Array|Object|NodeList|HTMLCollection} src\n * @param {Function} func\n * @param {Number} [start]\n * @param {Number?} [end]\n * @returns {*|number}\n */\nfunction forEachRange(src, func, start = 0, end) {\n    if (!T.isArr(src) || !T.isStr(src)) {\n        let keys = Object.keys(src);\n        end = end || keys.length - 1\n        for (let i = start; i <= end; i++) {\n            let r = func(src[keys[i]], keys[i], i, src);\n            if (r === BREAK) return i;\n        }\n        return end;\n    }\n    end = end || src.length;\n    for (let i = start; i < end; i++) {\n        let r = func(item(src, i), i, i, src);\n        if (r === BREAK) return i;\n    }\n    return end\n}\n\n/**\n * Type-agnostic forEach loop\n *\n * @param src\n * @param func\n * @returns {number|*}\n */\nfunction forEach(src, func) {\n    if (!T.isVal(src)) return -1;\n    if (!T.isArr(src) || !T.isStr(src) || !T.isList(src)) {\n        let i = 0;\n        let keys = Object.keys(src);\n        const len = keys.length;\n        for (; i < len; i++) {\n            // let r = ;\n            const k = keys[i], v = src[k];\n            if (func(v, k, i, src) === BREAK) return i;\n        }\n        return i;\n    }\n    const len = src.length;\n    if (!T.isArr(src)) {\n        for (let i = 0; i < len; i++) {\n            const v = src[i];\n            let r = func(v, i, i, src);\n            if (r === BREAK) return i;\n        }\n    } else {\n        for (let i = 0; i < len; i++) {\n            const v = item(src, i);\n            let r = func(v, i, i, src);\n            if (r === BREAK) return i;\n        }\n    }\n    return src.length\n}\n\n/**\n * Type-agnostic forEachRight loop\n *\n * @param src\n * @param func\n * @param range\n * @returns {number|*}\n */\nfunction forEachRight(src, func, range = []) {\n    if (!T.isArr(src) || !T.isStr(src)) {\n        let i = 0;\n        let keys = Object.keys(src);\n        for (let i = keys.length - 1; i >= 0; i--) {\n            if (i < range[1]) continue;\n            if (i >= range[0]) return i;\n            let r = func(src[keys[i]], keys[i], i, src);\n            if (r === BREAK) return i;\n        }\n        return i;\n    }\n    for (let i = src.length - 1; i >= 0; i--) {\n        let r = func(item(src, i), i, i, src);\n        if (r === BREAK) return i;\n    }\n    return src.length\n}\n\n/**\n * Extended version of native indexOf method, using {@link forEach}\n * @see forEach\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Object|Array} pred - predicate function/{key:value}/[keys]\n * @returns {number}\n */\nfunction firstIndex(src, pred) {\n    pred = predicate(pred, () => true);\n    let r = -1;\n    forEach(src, function (v, k, i) {\n        r = pred(v, k, i, src);\n        if (r === true) {\n            r = i;\n            return BREAK;\n        }\n    })\n    return r;\n}\n\n/**\n * Extended version of native first method, using {@link firstIndex}\n * @see firstIndex\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Object|Array} pred - predicate function/{key:value}/[keys]\n * @returns {*}\n */\nfunction first(src, pred) {\n    return item(src, firstIndex(src, pred))\n}\n\n/**\n * Returns true if first item matches predicate\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Object|Array} pred - predicate function/{key:value}/[keys] pred\n * @returns {boolean|*}\n */\nfunction startsWith(src, pred) {\n    if (T.isStr(src) && T.isStr(pred)) {\n        return src.indexOf(pred) === 0\n    }\n    pred = predicate(pred, () => true);\n    return pred(first(src))\n}\n\n/**\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Array|Object} pred\n * @returns {number}\n */\nfunction lastIndex(src, pred) {\n    pred = predicate(pred, () => true);\n    let r = -1;\n    forEachRight(src, function (v, k, i) {\n        r = pred(v, k, i);\n        if (r === true) {\n            r = i;\n            return BREAK;\n        }\n    })\n    return r;\n}\n\n/**\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Array|Object} pred\n * @returns {*}\n */\nfunction last(src, pred) {\n    return src[lastIndex(src, pred)]\n}\n\n/**\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Array|Object} pred\n * @returns {boolean|*}\n */\nfunction endsWith(src, pred) {\n    if (T.isStr(src) && T.isStr(pred)) {\n        return src.indexOf(pred) === src.length - pred.length\n    }\n    pred = predicate(pred, () => true);\n    return pred(last(src))\n}\n\n/**\n * Reverse array-like src\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @returns {Array|Object|String|NodeList|HTMLCollection} - reversed src\n */\nfunction reverse(src) {\n    if (T.isArr(src)) return src.reverse();\n    let rev = \"\";\n    forEachRight(src, function (it) {\n        rev += it;\n    });\n    return rev;\n}\n\n/**\n * A more versatile alternative to native \"some\" method\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Array|Object} pred\n * @returns {boolean}\n */\nfunction any(src, pred) {\n    // if (!func){\n    //     if (T.isArr(src) || T.isStr(src)) return src.length>0;\n    //     return Object.keys(src).length>0;\n    // }\n    let fn = predicate(pred);\n    let r = false;\n    forEach(src, function (v, k, i, src) {\n        r = fn(v, k, i, src);\n        if (r === true) return BREAK;\n    });\n    return r;\n}\n\n/**\n * A more versatile alternative to native \"every\" method\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src\n * @param {Function|Array|Object} pred\n * @returns {boolean}\n */\nfunction all(src, pred) {\n    pred = predicate(pred, () => true);\n    let r = true;\n    forEach(src, function (v, k, i, src) {\n        r = pred(v, k, i, src);\n        if (r === false) return BREAK;\n    })\n    return r;\n}\n\nfunction filterStr(src, pred, right = false, omit = false) {\n    pred = predicate(pred, () => true);\n    let res = \"\";\n    let loop = right ? forEachRight : forEach;\n    loop(src, function (v, k, i) {\n        if (!pred || pred(v, k, i, src) === omit) res += v;\n    });\n    return res;\n}\n\nfunction filterObj(src, pred, right = false, omit = false) {\n    if (T.isArr(pred)) {\n        let a = Object.assign({}, pred)\n        if (omit) pred = (v, k) => !any(a, k);\n        else pred = (v, k) => any(a, k);\n    } else\n        pred = predicate(pred, () => true);\n    let res = {};\n    // let loop = right ? ForEachRight : ForEach;\n    const keys = Object.keys(src);\n    const len = keys.length;\n\n    if (!right) {\n        for (let i = 0; i < len; i++) {\n            const k = keys[i]\n            const v = src[k]\n            if (pred(v, k, i, src) !== omit) res[k] = v;\n        }\n    } else {\n        for (let i = len-1; i >=0; i--) {\n            const k = keys[i]\n            const v = src[k]\n            if (pred(v, k, i, src) !== omit) res[k] = v;\n        }\n    }\n\n    // loop(src, function (v, k, i) {\n    //     if (pred(v, k, i, src) !== omit) res[k] = v;\n    // });\n    return res;\n}\n\nfunction filterArr(src, pred, right = false, omit = false) {\n    if (T.isArr(pred)) {\n        let a = Object.assign([], pred)\n        if (omit) pred = (v, k, i) => !any(a, i);\n        else pred = (v, k, i) => any(a, i);\n    } else\n        pred = predicate(pred, () => true);\n    let res = [];\n    const len = src.length;\n    if (!right) {\n        for (let i = 0; i < len; i++) {\n            const v = src[i]\n            if (pred(v, i, i, src) !== omit) {\n                res.push(v);\n            }\n        }\n    } else {\n        for (let i = len - 1; i >= 0; i--) {\n            const v = src[i]\n            if (!pred(v, i, i, src) !== omit) {\n                res.push(v);\n            }\n        }\n    }\n    return res;\n}\n\n/**\n * A more versatile alternative to native \"filter\" method\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src - source\n * @param {Function|Array|Object} pred - predicate function/{key:value}/[keys]\n * @param {boolean} [right] - reverse loop\n * @returns {Array|Object|String}\n */\nfunction filter(src, pred, right = false) {\n    if (T.isStr(src)) return filterStr(src, pred, right);\n    if (T.isArr(src) || T.isList(src)) return filterArr(src, pred, right);\n    return filterObj(src, pred, right);\n}\n\n/**\n * Opposite of filter, returns items not matching predicate\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src - source\n * @param {Function|Array|Object} pred - predicate function/{key:value}/[keys]\n * @param {boolean} [right] - reverse loop\n * @returns {Array|Object|String}\n */\nfunction omit(src, pred, right = false) {\n    if (T.isStr(src)) return filterStr(src, pred, right, true);\n    if (T.isArr(src) || T.isList(src)) return filterArr(src, pred, right, true);\n    return filterObj(src, pred, right, true);\n}\n\n/**\n * {@link filter} in reverse order (right)\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src - source\n * @param {Function|Array|Object} pred - predicate function/{key:value}/[keys]\n * @returns {Array|Object|String}\n */\nfunction filterRight(src, pred) {\n    return filter(src, pred, true);\n}\n\n/**\n * Find max index\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} list\n * @param {Function|String} pred - predicate function/key\n * @return {number}\n */\nfunction maxIndex(list, pred) {\n    pred = funOrKey(pred);\n    let mx;\n    let index = -1;\n    forEach(list, function (i, ix) {\n        let x = pred(i, ix);\n        if (!mx) {\n            mx = x;\n            index = ix;\n        } else if (x >= mx) {\n            mx = x;\n            index = ix;\n        }\n    });\n    return index;\n}\n\n/**\n * Find max\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} list\n * @param {Function|String} pred - predicate function/key\n * @return {number}\n */\nfunction max(list, pred) {\n    return list[maxIndex(list, pred)];\n}\n\n/**\n * Find min index\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} list\n * @param {Function|String} pred - predicate function/key\n * @return {number}\n */\nfunction minIndex(list, pred) {\n    pred = funOrKey(pred);\n    let mn;\n    let index = -1;\n    forEach(list, function (i, ix) {\n        let x = pred(i, ix);\n        if (!mn) {\n            mn = x;\n            index = ix;\n        } else if (x <= mn) {\n            mn = x;\n            index = ix;\n        }\n    });\n    return index;\n}\n\n/**\n * Find min\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} list\n * @param {Function|String} pred - predicate function/key\n * @return {number}\n */\nfunction min(list, pred) {\n    return list[minIndex(list, pred)];\n}\n\nfunction mapArr(src, func, right = false) {\n    let res = [];\n    // let loop = right ? ForEachRight : ForEach;\n    const len = src.length;\n    if (!right) {\n        for (let i=0; i<len; i++) {\n            let r = func(src[i], i, src);\n            if (r === BREAK) break;\n            if (!T.isUnd(r))\n                res.push(r);\n        }\n    } else {\n        for (let i=len; i>=0; i--) {\n            let r = func(src[i], i, src);\n            if (r === BREAK) break;\n            if (!T.isUnd(r))\n                res.push(r);\n        }\n    }\n    // loop(src, function (a, i) {\n    //     let r = func(a, i, src);\n    //     if (!T.isUnd(r))\n    //         res.push(r);\n    // });\n    return res;\n}\n\nfunction mapObj(src, func, right = false) {\n    let res = {};\n    // let loop = right ? ForEachRight : ForEach;\n    const keys = Object.keys(src);\n    const len = src.length;\n    if (!right) {\n        for (let i=0; i<len; i++) {\n            const k = keys[i];\n            const v = src[k];\n            let r = func(v, k, i, src);\n            if (r === BREAK) break;\n            if (!T.isUnd(r))\n                res[k] = r\n        }\n    } else {\n        for (let i=len; i>=0; i--) {\n\n            const k = keys[i];\n            const v = src[k];\n            let r = func(v, k, i, src);\n            if (r === BREAK) break;\n            if (!T.isUnd(r))\n                res[k] = r\n        }\n    }\n    // loop(src, function (v, k, i) {\n    //     let r = func(v, k, i, src);\n    //     if (!T.isUnd(r))\n    //         res[k] = r\n    // });\n    return res;\n}\n\n/**\n * A more versatile alternative to native \"map\" method\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src - source\n * @param {Function|Array|Object} transform - transformer function\n * @param {boolean} [right] - reverse loop\n * @returns {Array|Object|String}\n */\nfunction map(src, transform, right = false) {\n    transform = predicate(transform, (v) => v);\n    if (T.isArr(src)) return mapArr(src, transform, right);\n    else if (T.isObj(src)) return mapObj(src, transform, right);\n}\n\n/**\n * A more versatile alternative to native \"flatMap\" method, flattens first level items\n *\n * @param {Array|Object|String|NodeList|HTMLCollection} src - source\n * @param {Function|Array|Object} [transform] - transformer function\n * @returns {Array|Object|String}\n */\nfunction flatMap(src, transform) {\n    let res;\n    if (T.isStr(src)) res = \"\"\n    else if (T.isArr(src)) res = []\n    else res = {};\n    forEach(src, function (a, i) {\n        let f;\n        if (!!transform) {\n            f = transform(a, i, src);\n        } else {\n            if (!T.isArr(res) && T.isObj(res)) {\n                f = {};\n                f[i] = a;\n            } else {\n                f = a\n            }\n        }\n        res = concat(res, f);\n    });\n    return res;\n}\n\n/**\n * A more versatile alternative to native \"reduce\" method\n *\n * @param {any} src - source\n * @param {Function|Array|Object} func - reducer function\n * @param {any} [acc] - accumulator\n * @returns {any}\n */\nfunction reduce(src, func, acc = src) {\n    if (T.isUnd(func)) {\n        func = (rs, v) => rs + v\n    }\n    forEach(src, (v, k, src) => {\n        acc = func(acc, v, k, src);\n    });\n    return acc\n}\n\n/**\n * {@link reduce} in reverse\n * @see reduce\n * @param {any} src - source\n * @param {Function|Array|Object} func - reducer function\n * @param {any} [acc] - accumulator\n * @returns {any}\n */\nfunction reduceRight(src, func, acc = src) {\n    forEachRight(src, (v, k, src) => {\n        acc = func(acc, v, k, src);\n    });\n}\n\n/**\n * Extract single key-value pairs from object\n *\n * @param object\n * @return {Object[]}\n */\nfunction keyValuePairs(object) {\n    let entries = [];\n    forEach(object, (v, k) => {\n        entries.push(T.dict(k, v));\n    });\n    return entries;\n}\n\n/**\n * Like Object.entries extracts key-value pairs as [[key1,value1],[key2,value2],...]\n *\n * @param {Object} object\n * @return {Array[]}\n */\nfunction entries(object) {\n    let entries = [];\n    forEach(object, (v, k) => {\n        entries.push([k, v]);\n    });\n    return entries;\n}\n\n/**\n * Translate(rename) object fields using dict parameter, omitting undefined keys\n * @param {Object} source\n * @param {Object|Array} dict\n * @return {Array|Object|String}\n */\nfunction translateObject(source, dict) {\n    if (T.isArr(dict)) {\n        filter(source, dict);\n    }\n    const keys = Object.keys(dict);\n    let res = filter(source, keys);\n    for (let key of keys) {\n        res[dict[key]] = res[key];\n        delete res[key];\n    }\n    return res;\n}\n\n/**\n * Recursive deep merge {@param target} with {@param source}\n *\n * @param {Object|Array} target\n * @param {Object|Array} source\n * @param {Array} excludeKeys - keys to be skipped while merging\n * @param maxDepth - maximum recursive depth\n * @param allowUnsafeProps - allow unsafe properties like __proto__\n * @return {Object|Array}\n */\nfunction deepMerge(target,\n                   source,\n                   {\n                       excludeKeys = [],\n                       maxDepth = 999,\n                       allowUnsafeProps = false\n                   } = {excludeKeys: [], maxDepth: 999, allowUnsafeProps: false},\n                   depth = 0) {\n    if (depth >= maxDepth) return target;\n    forEach(source, (v, k) => {\n        if (excludeKeys && contains(excludeKeys, k)) return;\n        if (allowUnsafeProps && contains(UNSAFE_PROPS, k)) return;\n        if (T.isObj(source[k])) {\n            target[k] = deepMerge(emptyOf(source[k]), source[k], {excludeKeys, maxDepth, depth: depth + 1});\n        } else\n            target[k] = v\n    });\n    return target;\n}\n\n/**\n * Recursive deep clone {@param source}\n * @see deepMerge\n *\n * @param {Object|Array} source\n * @param {Array} excludeKeys - keys to be skipped while merging\n * @param {Number} [maxDepth] - maximum recursive depth\n * @param {boolean} [allowUnsafeProps] - allow unsafe properties like __proto__\n * @return {Object|Array}\n */\nfunction deepClone(source,\n                   {\n                       excludeKeys = [],\n                       maxDepth = 999,\n                       allowUnsafeProps = false\n                   } = {excludeKeys: [], maxDepth: 999, allowUnsafeProps: false},) {\n    return deepMerge(emptyOf(source), source, {excludeKeys, maxDepth, allowUnsafeProps})\n}\n\nfunction _keyGen(key, fnName) {\n    let keyGen = key\n    if (T.isStr(key)) {\n        keyGen = (item)=> item[key]\n    } else if (T.isArr(key)) {\n        keyGen = (item) => reduce(item, (res, v, k)=> {\n            if (contains(key, k)) {\n                return res + v;\n            }\n        }, \"\")\n    } else if (!T.isFun(key)) {\n        throw Error(`${fnName} key only accepts: String, [String,...], Function`)\n    }\n    return keyGen;\n}\n\n/**\n * Join arrays of objects based on a generated or static key\n *\n * @param {Function|String} key\n * @param {Object[]} lists\n * @return {Object}\n */\nfunction join(key, ...lists) {\n    if (lists.length === 0) return [];\n    if (!all(lists, T.isArr)) throw Error(\"Join only accepts arrays of data!\");\n    let keyGen = _keyGen(key, \"Join\")\n    const joined = {};\n    forEach(lists, (list)=>{\n        forEach(list, (item) => {\n            const joinKey = keyGen(item);\n            const presentValue = joined[joinKey];\n            if (!presentValue) {\n                joined[joinKey] = item;\n            } else {\n                joined[joinKey] = concat(presentValue, item)\n            }\n        });\n    })\n\n    return (joined)\n\n}\n\n/**\n * Group arrays based on generated or static key(s)\n *\n * @param {Function|String} key\n * @param {Object[]} lists\n * @return {Object}\n */\nfunction groupBy(key, ...lists) {\n    if (lists.length === 0) return {};\n    if (!all(lists, T.isArr)) throw Error(\"GroupBy only accepts arrays of data!\");\n    let keyGen = _keyGen(key, \"GroupBy\")\n    const group = {};\n    forEach(lists, (list)=>{\n        forEach(list, (item) => {\n            const joinKey = keyGen(item);\n            const presentValue = group[joinKey];\n            if (!presentValue) {\n                group[joinKey] = [item];\n            } else {\n                group[joinKey] = concat(presentValue, item)\n            }\n        });\n    })\n\n    return (group)\n\n}\n\n// noinspection JSUnusedGlobalSymbols\nmodule.exports = {\n    ANY, ALL, BREAK, item, contains, add, remove, toggle, objMatchOne, objMatchAll,\n    deepMerge, deepClone, forN, forEachRange, forEach, forEachRight, firstIndex, first,\n    startsWith, lastIndex, last, endsWith, reverse, any, all, filter, filterRight, reduce, reduceRight,\n    map, flatMap, keyValuePairs, entries, maxIndex, max, minIndex, min,\n    translateObject, omit, join, groupBy, objectValues\n}","const {Enum} = require(\"./types\");\n\n/**\n * @module core/logging\n * @memberOf core\n */\n\n/** @private */\nfunction _logTime() {\n    let t = new Date();\n    return `${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}`;\n}\n\n/** @private */\nfunction _logTitle(flag) {\n    return `[${flag}] [${_logTime()}]`;\n}\n\n/** @private */\nfunction _prepareLog(args, lt) {\n    args.reverse();\n    args.push(\"display: inline-block; font-weight: bold; color: black\", \"%c\"+lt);\n    args.reverse();\n}\n\n/**\n * @type {Object}\n */\nconst LogLevels = {TRACE:0, INFO:0, WARN:0, ERROR:0, SILENT:0};\n/**\n * Log config\n * @type {{LogLevel: *}}\n */\nconst Config = {\n    LogLevel : LogLevels.TRACE\n}\n\n/** Set `Config.LogLevel` to TRACE */\nfunction showTrace() {Config.LogLevel = LogLevels.TRACE;}\n\n/** Set `Config.LogLevel` to INFO */\nfunction showInfo() {Config.LogLevel = LogLevels.INFO;}\n\n/** Set `Config.LogLevel` to WARN */\nfunction showWarn() {Config.LogLevel = LogLevels.WARN;}\n\n/** Set `Config.LogLevel` to ERROR */\nfunction showError() {Config.LogLevel = LogLevels.ERROR;}\n\n/** Set `Config.LogLevel` to SILENT */\nfunction silent() {Config.LogLevel = LogLevels.SILENT;}\n\n/** Set Config.LogLevel\n * @param l - LogLevel */\nfunction lvl(l) {\n    return Config.LogLevel !== LogLevels.SILENT && Config.LogLevel <= l\n}\n\n/**\n * Log Trace\n * @param {any} args\n */\nfunction trace(...args) {\n    if (!lvl(LogLevels.TRACE)) return;\n    args.reverse();\n    args.push(_logTitle(\"X-TRACE\"));\n    args.reverse();    // args.push(\"\\n\");\n    console.trace.apply(this, args);\n}\n/**\n * Log Info\n * @param {any} args\n */\nfunction info(...args) {\n    if (!lvl(LogLevels.INFO)) return;\n    _prepareLog(args, _logTitle(\"X-INFO\"));\n    console.log.apply(this, args);\n}\n/**\n * Log Warning\n * @param {any} args\n */\nfunction warn(...args) {\n    if (!lvl(LogLevels.WARN)) return;\n    _prepareLog(args, _logTitle(\"X-WARN\"));\n    console.warn.apply(this, args);\n}\n/**\n * Log Error\n * @param {any} args\n */\nfunction error(...args) {\n    if (!lvl(LogLevels.ERROR)) return;\n    _prepareLog(args, _logTitle(\"X-ERROR\"));\n    console.error.apply(this, args);\n}\n\nmodule.exports = {\n    Config,\n    LogLevels,\n    showTrace, showInfo, showWarn, showError, silent, trace, info, warn, error\n};","/**\n * @module\n * @memberOf core\n */\n/**\n * @static\n * @param name\n * @returns {string}\n */\nfunction kebab(name) {\n    let kb = \"\";\n    let pres = false;\n    for (let i=0;i<name.length; i++) {\n        let c = name.charAt(i);\n        if (c === '_') {\n            kb += '-';\n            pres = true;\n            continue;\n        }\n        if (c >= 'A' && c <= 'Z') {\n            if (i>0 && !pres) {\n                kb+='-';\n            }\n        }\n        kb+=c.toLowerCase();\n        pres = false;\n    }\n    return kb;\n}\n/**\n * @static\n * @param name\n * @returns {string}\n */\nfunction snake(name) {\n    let snk = \"\";\n    let pres = false;\n    for (let i=0;i<name.length; i++) {\n        let c = name.charAt(i);\n        if (c === '-') {\n            snk += '_';\n            pres = true;\n            continue;\n        }\n        if (c >= 'A' && c <= 'Z') {\n            if (i>0 && !pres) {\n                snk+='_';\n            }\n        }\n        snk+=c.toLowerCase();\n        pres = false;\n    }\n    return snk;\n}\n/**\n * @static\n * @param name\n * @returns {string}\n */\nfunction camel(name) {\n    let cml = \"\";\n    let pres = false;\n    for (let i=0;i<name.length; i++) {\n        let c = name.charAt(i);\n        if (c === '-' || c === '_') {\n            pres = true;\n        } else if (pres === true) {\n            cml+=c.toUpperCase();\n            pres = false;\n        } else {\n            if (i === 0) {\n                cml += c.toLowerCase();\n            } else {\n                cml += c;\n            }\n        }\n    }\n    return cml;\n}\n/**\n * @static\n * @param name\n * @returns {string}\n */\nfunction pascal(name) {\n    let psc = \"\";\n    let pres = false;\n    for (let i=0;i<name.length; i++) {\n        let c = name.charAt(i);\n        if (c === '-' || c === '_') {\n            pres = true;\n        } else if (pres === true) {\n            psc+=c.toUpperCase();\n            pres = false;\n        } else {\n            if (i === 0) {\n                psc += c.toUpperCase();\n            } else {\n                psc += c;\n            }\n        }\n    }\n    return psc;\n}\n\nmodule.exports = {kebab, camel, pascal, snake}","const decimalRegex = /^[-+]?\\d*(\\.\\d+|\\d*)(e[-+]?\\d+)?$/\nconst hexRegex = /^[-+]?[a-f0-9]+$/\nconst octRegex = /^[-+]?[0][0-7]+$/\nconst binRegex = /^[-+]?[01]+$/\nconst emailRegex = /^[a-z0-9]([a-z0-9._%-+][a-z0-9]|[a-z0-9])*@[a-z0-9]([a-z0-9.-][a-z0-9]|[a-z0-9])*\\.[a-z]{2,6}$/i\n/**\n * @module core/strings\n * @memberOf core\n */\n\n\n/**\n * String is decimal number\n * @param {String} str\n * @return {boolean}\n */\nfunction isDecimal(str) {\n    return decimalRegex.test(str);\n}\n\n/**\n * String is binary number\n * @param {String} str\n * @return {boolean}\n */\nfunction isBinary(str) {\n    return binRegex.test(str);\n}\n\n/**\n * String is octal number\n * @param {String} str\n * @return {boolean}\n */\nfunction isOctal(str) {\n    return octRegex.test(str);\n}\n\n/**\n * String is hexadecimal number\n * @param {String} str\n * @return {boolean}\n */\nfunction isHex(str) {\n    return hexRegex.test(str);\n}\n\n/**\n * String is valid email address\n * @param {String} str\n * @return {boolean}\n */\nfunction isEmail(str) {\n    return emailRegex.test(str);\n}\n\n/**\n * String starts with sequence polyfill\n * @param {String} str\n * @param {String} seq\n * @return {boolean}\n */\nfunction startsWith(str, seq) {\n    return str.indexOf(seq) === 0;\n}\n\n/**\n * String ends with sequence polyfill\n * @param {String} str\n * @param {String} seq\n * @return {boolean}\n */\nfunction endsWith(str, seq) {\n    return str.indexOf(seq) === seq.length-1;\n}\n\n/**\n * String contains sequence\n * @param {String} str\n * @param {String} seq\n * @return {boolean}\n */\nfunction contains(str, seq) {\n    return str.indexOf(seq)>=0;\n}\n\nmodule.exports = {isDecimal, isHex, isOctal, isBinary, isEmail,startsWith, endsWith, contains};","const T = require(\"./types\");\n\nclass Queryable {\n    __src__\n    keys\n    get count() {\n        return this.keys.length\n    }\n\n    static of(s) {\n        let c = new Queryable();\n        c.__src__ = s;\n        c.keys = Object.keys(s);\n        c.len = c.keys.length;\n        return c\n    }\n\n    slice(start = 0, end = this.count-1) {\n        this.keys = this.keys.slice(start, end);\n    }\n\n    key(i=0) {\n        return this.keys[i]\n    }\n\n    value(i = 0) {\n        return this.__src__[this.key(i)]\n    }\n    loop(f, reverse = false) {\n        if (reverse) {\n            for (let i=this.count-1; i>=0; i--) {\n                if (f(this.value(i), this.key(i), i) === null) break;\n            }\n        } else {\n            for (let i=0; i<this.count; i++) {\n                if (f(this.value(i), this.key(i), i) === null) break;\n            }\n        }\n        return this;\n    }\n    values(reverse = false) {\n        let vs = [];\n        this.loop(function (v, k, i) {\n            vs.push(v)\n        }, reverse);\n        return vs;\n    }\n\n    item(i) {\n        if (i === undefined) return undefined;\n        if (T.isArr(this.__src__)) return this.value(i);\n        let o = {};\n        o[this.key(i)] = this.value(i);\n        return o;\n    }\n\n    asObject() {\n        // if (T.isArr(this.__src__)) return this.values();\n        let o = {};\n        this.loop(function (v, k, i) {\n            o[k] = v\n        })\n        return o;\n    }\n\n    asArray(reverse = false) {\n        return this.values(reverse)\n    }\n\n    filter(f, reverse = false) {\n        let nk = [];\n        this.loop(function (v, k, i) {\n            let r = f(v, k, i);\n            if (r === true) {\n                nk.push(k);\n            } else if (r === null) return null;\n        }, reverse);\n        this.keys = nk;\n        return this;\n    }\n\n    map(f, reverse = false) {\n        let arr = []\n        this.loop(function (v, k, i) {\n            arr.push(f(v, k, i));\n        }, reverse)\n        return arr;\n    }\n\n    any(f) {\n        let r = false;\n        this.loop(function (v, k, i) {\n            r = f(v, k, i);\n            if (r === true) {\n                return null;\n            }\n        });\n        return r;\n    }\n\n    all(f) {\n        let r = true;\n        this.loop(function (v, k, i) {\n            r = f(v, k, i);\n            if (r === false) {\n                return null;\n            }\n        });\n        return r;\n    }\n\n    first(f) {\n        if (!f) { return this.item(0) }\n        let it;\n        this.loop(function (v, k, i) {\n            if (f(v, k, i) === true) {\n                it = i;\n                return null;\n            }\n        });\n        return this.item(it);\n    }\n\n    last(f) {\n        if (!f) { return this.item(this.count-1) }\n        let it;\n        this.loop(function (v, k, i) {\n            if (f(v, k, i) === true) {\n                it = i;\n                return null;\n            }\n        }, true);\n        return this.item(it);\n    }\n}\n\nmodule.exports = {Queryable};","/**\n * @module\n * @memberOf core\n */\n\nfunction bodyOf(func) {\n    return func.toString().match(/{[\\w\\W]*}/)[0]\n}\n\n/**\n * Check if function bodies are equal\n * @param {Function} f1\n * @param {Function} f2\n * @return {boolean}\n */\nfunction funcBodyEquals(f1, f2) {\n    return bodyOf(f1) === bodyOf(f2)\n}\n\n/**\n * Throttle function execution.\n * {@link https://css-tricks.com/debouncing-throttling-explained-examples/}\n *\n * @param {Function} func - function\n * @param {Number} intervalMs\n * @return {Function} - throttled function\n */\nfunction throttle(func, intervalMs) {\n    var ___last___ = new Date().getTime();\n    function throttled(args) {\n        if (new Date().getTime()-___last___ >= intervalMs) {\n            ___last___ = new Date().getTime();\n            func.call(this, args);\n        }\n    }\n    return throttled;\n}\n\n/**\n * Debounce function execution.\n * {@link https://css-tricks.com/debouncing-throttling-explained-examples/}\n *\n * @param {Function} func - function\n * @param {Number} afterMs - milliseconds after last call\n * @return {Function} - debounced function\n */\nfunction debounce(func, afterMs) {\n    var ___timeout___ = null;\n\n    function caller(_this, args) {\n        func.apply(_this, args);\n    }\n\n    function flush(args) {\n        func(args);\n    }\n\n    function debounced(...args) {\n        clearTimeout(___timeout___);\n        ___timeout___ = setTimeout(caller, afterMs, this, args)\n    }\n\n    return debounced\n}\n\n/**\n * Bind args to function and return a no-arg function\n * @param {Function} func - source function\n * @param {any[]} args - array of arguments to bind\n * @return {Function}\n */\nfunction bindArgs(func, args) {\n    return function () {return func.apply(this,args)}\n}\n\nmodule.exports = {\n    funcBodyEquals,\n    throttle,\n    debounce\n}","let collections = require('./collections');\nlet logging = require('./logging');\nlet types = require('./types');\nlet cases = require('./cases');\nlet strings = require('./strings');\nlet queryable = require('./queryable');\nlet functions = require('./functions');\nmodule.exports = {\n    ...collections,\n    ...logging,\n    ...types,\n    ...cases,\n    ...strings,\n    ...queryable,\n    ...functions\n}\n/**\n * @namespace core\n */\n","/**\n * @module DOM\n * @memberOf dom\n */\n\nconst {isEl, isEls, isStr, isVal} = require(\"../core/types\");\nconst L = require(\"../core/logging\");\nconst {cls} = require(\"../dom/classes\");\n//\n// import {isEl, isEls, isStr, isVal} from \"../core/types\";\n// import {error} from \"../core/logging\";\n// import {cls} from \"../dom/classes\";\n//\n/**\n * jQuery-like select \"all\" by query accepts element, nodes or query\n * @param {String|HTMLElement|Element|Node|HTMLCollection|NodeList} q - query string\n * @param {HTMLElement|Element|Node} [root] - root which query is issued from\n * @return {Array}\n */\nfunction $(q, root = document) {\n    if (isEl(q)) return Array.of(q);\n    if (isEls(q)) return Array.from(q);\n    if (!isStr(q)) {\n        L.error(`Query is not string nor element X.$(${q})`);\n        return null;\n    }\n    if (!isEl(root)) {\n        L.error(`Query root is not a node!\\t[X.$(${q}, ${root})]`);\n        return null;\n    }\n    return Array.from(root.querySelectorAll(q));\n}\n\n/**\n * jQuery-like select \"one\" by query accepts element, node or query\n * @param {String|HTMLElement|Element|Node} q - query string\n * @param {HTMLElement|Element|Node} [root] - root which query is issued from\n * @return {Array} - returns array of length=1\n */\nfunction $$(q, root = document) {\n    if (isEl(q)) return Array.of(q);\n    if (!isStr(q)) {\n        L.error(`Query is not string nor element X.$$(${q})`);\n        return null;\n    }\n    if (!isEl(root)) {\n        L.error(`Query root is not a node!\\t[X.$(${q}, ${root})]`);\n        return null;\n    }\n    return Array.of(root.querySelector(q));\n}\n\n/**\n * Generate relative query of given element/node\n * @param {HTMLElement|Element|Node} e - element/node\n * @param {HTMLElement|Element|Node} maxParent - parent where the query relates to\n * @return {String} - query relative to maxParent\n */\nfunction queryOf(e, maxParent, q) {\n    if ((!isVal(e) || !isEl(e))) {\n        L.error(`\\nQuery generator's first parameter must be Element/Node! CAUSE: X.queryOf(${e}, ${maxParent})`);\n        return null;\n    }\n    maxParent = maxParent || document.body;\n    let gen = e.tagName;\n    q = q || \"\";\n\n    if (e.id) {\n        gen += e.id ? ('#' + e.id) : \"\";\n        return gen + (!(q === \"\") ? ' ' + q : \"\");\n    }\n\n    cls(e).items.forEach(function (value) {\n        gen = gen + (value !== '' ? '.' + value : '')\n    });\n\n    if (gen) {\n        let sibs = $(gen, e.parentElement);\n        if (sibs.length>1) {\n            let idx = Array.from(e.parentElement.children).findIndex(function (i) {\n                return e === i;\n            });\n\n            if (idx > 0) {\n                gen = gen + \":nth-child(\"+(idx+1)+\")\";\n            }\n        }\n    }\n    if (e.parentElement && (e.parentElement !== maxParent) && e.parentElement !== document) {\n\n        return (queryOf(e.parentElement, maxParent) + \" > \" + gen) + (!(q === \"\") ? ' ' + q : \"\");\n    } else {\n        return gen + (!(q === \"\") ? ' ' + q : \"\");\n    }\n}\n\nmodule.exports = {$, $$, queryOf};","/**\n * @module DOM\n * @memberOf dom\n */\nconst T = require(\"../core/types\");\nconst {toggle, any, all, contains, filter, flatMap, forEach} = require(\"../core/collections\");\n\n/**\n * Element classes CRUD wrapper\n * @memberOf dom\n */\nclass Classes {\n    /**\n     * Split element `className`\n     * @param className\n     * @return {String[]}\n     */\n    static split(className) {\n        return className.trim().replace(/\\s+/,' ').split(' ');\n    }\n\n    /**\n     * @param {HTMLElement|Element|Node} e - element\n     */\n    constructor(e) {\n        this.element = e;\n        Object.defineProperty(this, 'items', {\n            get() {\n                return this.classes;\n            },\n            set(v) {\n                let upd = false;\n                if (this.classes) upd = true;\n                if (!T.isVal(v) || T.isEmpty(v)) this.classes = [];\n                else if (T.isArr(v)) this.classes = v;\n                else if (T.isStr(v)) this.classes = Classes.split(v);\n                else if (v instanceof DOMTokenList) this.classes = Array.from(v);\n                if (upd)\n                    this.__update__();\n            }\n        });\n        this.items = e.getAttribute('class');\n    }\n\n    /**\n     * Equivalent of `new Classes(e)`\n     * @param e\n     * @return {dom.Classes}\n     */\n    static of(e) {\n        return new Classes(e)\n    }\n\n    __update__() {\n        this.element.setAttribute('class', this.classes.join(' '))\n    }\n\n    /**\n     * Element has class(es)\n     * @param {String} c - class(es)\n     * @return {boolean}\n     */\n    contains(...c) {\n        c = flatMap(c);\n        return all(c, (it)=>contains(this.classes, it));\n    }\n\n    /**\n     * Add class(es)\n     * @param {String} c - class(es)\n     */\n    add(...c) {\n        c = flatMap(c);\n        forEach(c, (it)=>{\n            if (!this.contains(it)) {\n                this.classes.push(it.toString());\n            }\n        });\n        this.__update__();\n    }\n\n    /**\n     * Remove class(es)\n     * @param {String} c - class(es)\n     * @return {boolean}\n     */\n    remove(...c) {\n        c = flatMap(c);\n        let l = this.classes.length;\n        this.classes = filter(this.classes, (it)=>{\n            return !any(c, (ci) => ci.endsWith('*')?it.startsWith(ci.replace('*','')):it===ci);\n        });\n        this.__update__();\n        return l !== this.classes.length\n    }\n\n    /**\n     * Toggle class(es) - if exists toggle else adds\n     * @param {String} c - class(es)\n     */\n    toggle(...c) {\n        toggle(this.classes, c);\n        this.__update__();\n    }\n}\nObject.seal(Classes);\n\n/**\n * Equivalent of `[new Classes(e)]{@link dom.Classes}`\n * @param e\n * @return {dom.Classes}\n */\nfunction cls(e) {\n    return Classes.of(e);\n}\n\n/**\n * Add class(es) [cls(e).add()]{@link dom.Classes#add}\n * @param {HTMLElement|Element|Node} e - element\n * @param c\n */\nfunction addClass(e, ...c) {\n    Classes.of(e).add(c);\n}\n\n/**\n * Remove class(es) [cls(e).remove()]{@link dom.Classes#remove}\n * @param {HTMLElement|Element|Node} e - element\n * @param c\n */\nfunction removeClass(e, ...c) {\n    Classes.of(e).remove(c);\n}\n\n/**\n * Has class(es) [cls(e).contains()]{@link dom.Classes#contains}\n * @param {HTMLElement|Element|Node} e - element\n * @param c\n */\nfunction hasClass(e, ...c) {\n    Classes.of(e).contains(c);\n}\n\n/**\n * Toggle classes [cls(e).toggle()]{@link dom.Classes#toggle}\n * @param {HTMLElement|Element|Node} e - element\n * @param c\n */\nfunction toggleClass(e, ...c) {\n    Classes.of(e).toggle(c);\n}\n\nmodule.exports = {Classes, cls, addClass, hasClass, removeClass, toggleClass}","/**\n * @module DOM\n * @memberOf dom\n */\n\nconst scope = require(\"../core/scope\");\nconst {isArr, hasField, isEmpty} = require(\"../core/types\");\nconst {contains, forEach, filter} = require(\"../core/collections\");\nconst {error} = require(\"../core/logging\");\nconst {funcBodyEquals} = require(\"../core/functions\");\n\n/**\n * Set listener for event type(s) on element, removes identical event listeners to avoid duplication\n *\n * @param {HTMLElement|Element|Node} target - target element\n * @param {String|Array} event - event type(s)\n * @param {Function} listener\n * @param {AddEventListenerOptions?} [options]\n */\nfunction setEvent(target, event, listener, options) {\n    if (!scope.isBrowser()) {\n        error(\"Events are browser only!\");\n        return\n    }\n    if (!isArr(event)) {\n        if (contains(event,' ')) {\n            event = event.split(' ').Map((it)=>it.trim())\n        } else\n            event = [event];\n    }\n    target.__EVENTS__ = target.__EVENTS__ || {};\n    forEach(event,function (ev) {\n        target.__EVENTS__[ev] = target.__EVENTS__[ev] || [];\n        let f = function (e) {\n            listener(e, target);\n        };\n        if (!hasField(options, 'duplicates', (a)=>a)) {\n            // console.log('removing dups')\n            target.__EVENTS__[ev] = filter(target.__EVENTS__[ev],(fl)=> {\n                if (funcBodyEquals(fl.l, listener)) {\n                    target.removeEventListener(ev, fl.f, fl.o);\n                    return false\n                } else {\n                    console.log('notEqual',fl.l.toString(), listener.toString())\n                }\n            });\n        }\n\n        target.__EVENTS__[ev].push({f:f, l:listener, o: options});\n        target.addEventListener(ev, f, options);\n    });\n}\n\n/**\n * Clear all event listeners of type from element\n *\n * @param {HTMLElement|Element|Node} target - target element\n * @param {String|Array} event - event type(s)\n */\nfunction clearEvent(target, event) {\n    if (!scope.isBrowser()) {\n        error(\"Events are browser only!\");\n        return\n    }\n    if (!isArr(event)) {\n        if (contains(event,' ')) {\n            event = event.split(' ').Map((it)=>it.trim())\n        } else\n            event = [event];\n    }\n    target.__EVENTS__ = target.__EVENTS__ || {};\n    if (isEmpty(target.__EVENTS__)) return;\n    forEach(event,function (ev) {\n        target.__EVENTS__[ev] = target.__EVENTS__[ev] || [];\n        if (isEmpty(target.__EVENTS__[ev])) return;\n\n        forEach(target.__EVENTS__[ev],(fl)=> {\n            target.removeEventListener(ev, fl.f, fl.o);\n            return false\n        });\n        target.__EVENTS__[ev] = [];\n\n    });\n}\n\n/**\n * Target has event listener for event type\n *\n * @param {HTMLElement|Element|Node} target - target element\n * @param {String} type - event type\n * @return {boolean}\n */\nfunction hasEvent(target, type) {\n    return target.__EVENTS__ && target.__EVENTS__[type] && !isEmpty(target.__EVENTS__[type])\n}\n\nmodule.exports = {setEvent, clearEvent, hasEvent};","/**\n * @module DOM\n * @memberOf dom\n */\n\nconst I = require(\"../core/collections\")\nconst T = require(\"../core/types\")\n\n/**\n * Get all element attributes\n * @param {HTMLElement|Element|Node} e - element\n * @return {Object}\n */\nfunction getAttributes(e) {\n    let atr = {};\n    I.forEach(e.getAttributeNames(), (n) => atr[n] = e.getAttribute(n));\n    return atr;\n}\n\n/**\n *\n * @param {HTMLElement|Element|Node} e - element\n * @param {String} a - attribute name\n * @param {String} [v] - attribute value\n * @return {boolean}\n */\nfunction hasAttr(e, a, v) {\n    if (e.hasAttribute(a)) {\n        if (v) return e.getAttribute(a) === v\n        return true\n    }\n\n    return false\n}\n\n/**\n * Get element attribute\n * @param {HTMLElement|Element|Node} e - element\n * @param {String} a - attribute name\n * @return {string} - attribute value\n */\nfunction getAttr(e, a) {\n    return e.getAttribute(a)\n}\n\n/**\n * Set element attribute\n * @param {HTMLElement|Element|Node} e - element\n * @param {String} a - attribute name\n * @param {String} [v] - attribute value\n */\nfunction setAttr(e, a, v) {\n    if (T.isArr(a)) {\n        I.forEach(a, (n) => this.set(n, v))\n    } else if (T.isObj(a)) {\n        I.forEach(a, (v, k) => this.set(k, v))\n    } else {\n        e.setAttribute(a, v);\n    }\n}\n\n/**\n * Element attributes CRUD wrapper\n * @memberOf dom\n */\nclass Attributes {\n    /**\n     * @param {HTMLElement|Element|Node} e - element\n     */\n    constructor(e) {\n        this.element = e;\n    }\n\n    /**\n     * All attribute names\n     * @return {String[]}\n     */\n    keys() {\n        return this.element.getAttributeNames()\n    }\n\n    /**\n     * All attributes\n     * @return {Object}\n     */\n    all() {\n        return getAttributes(this.element);\n    }\n\n    /**\n     * Set attribute\n     * @param {String} a - attribute name\n     * @param {String} v - attribute value\n     * @return {this}\n     */\n    set(a, v) {\n        setAttr(this.element, a, v);\n        return this;\n    }\n\n    /**\n     * Get attribute\n     * @param {String} a - attribute name\n     * @return {String}\n     */\n    get(a) {\n        return getAttr(this.element, a)\n    }\n\n    /**\n     * Has attribute\n     * @param {String} a - attribute name\n     * @param {String} v - attribute value\n     * @return {boolean}\n     */\n    has(a, v) {\n        return hasAttr(this.element, a, v);\n    }\n\n    /**\n     * Remove attribute\n     * @param a\n     */\n    remove(a) {\n        this.set(a, undefined);\n    }\n}\n\n/**\n * Equivalent of `[new Attributes(e)]{@link dom.Attributes}`\n * @param {HTMLElement|Element|Node} e - element\n * @return {dom.Attributes}\n */\nfunction attrs(e) {\n    return new Attributes(e)\n}\n\nmodule.exports = {getAttributes, Attributes, getAttr, hasAttr, setAttr, attrs}","/**\n * @module DOM\n * @memberOf dom\n */\n\n/**\n * Element's offsetLeft (relative)\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relLeft(e) {\n    return e.offsetLeft\n}\n\n/**\n * Element's clientLeft\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absLeft(e) {\n    return e.clientLeft\n}\n\n/**\n * Element's offsetWidth\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relWidth(e) {\n    return e.offsetWidth\n}\n\n/**\n * Element's clientWidth\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absWidth(e) {\n    return e.clientWidth\n}\n\n/**\n * Element's offsetLeft + offsetWidth\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relRight(e) {\n    return relLeft(e) + relWidth(e)\n}\n\n/**\n * Element's clientLeft + clientWidth\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absRight(e) {\n    return absLeft(e) + absWidth(e)\n}\n\n/**\n * Element's offsetTop\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relTop(e) {\n    return e.offsetTop\n}\n\n/**\n * Element's clientTop\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absTop(e) {\n    return e.clientTop\n}\n\n/**\n * Element's offsetHeight\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relHeight(e) {\n    return e.offsetHeight\n}\n\n/**\n * Element's clientHeight\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absHeight(e) {\n    return e.clientHeight\n}\n\n/**\n * Element's offsetTop + offsetHeight\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction relBottom(e) {\n    return relTop(e) + relHeight(e)\n}\n\n/**\n * Element's clientTop + clientHeight\n * @param {HTMLElement|Element|Node} e\n * @return {number}\n */\nfunction absBottom(e) {\n    return absTop(e) + absHeight(e)\n}\n\nmodule.exports = {left: relLeft, leftWin: absLeft, right: relRight, rightWin: absRight, width: relWidth, widthWin: absWidth}","/**\n * @module DOM\n * @memberOf dom\n */\n\n/**\n * Append node(s) to parent and dispatch an event\n * @param {HTMLElement|Element|Node} parent - parent element\n * @param {HTMLElement|Element|Node} elements - appended children\n */\nfunction append(parent, ...elements) {\n    window.dispatchEvent(new CustomEvent(\"x.dom.append\", {detail: {parent, elements}}))\n    parent.append(...elements);\n}\n\nmodule.exports = {append}","/**\n * @module DOM\n * @memberOf dom\n */\nconst {error} = require(\"../core/logging\");\nconst {forEach} = require(\"../core/collections\");\nconst {isVal, isArr, isObj, isEl, hasField} = require(\"../core/types\");\nconst {setAttr} = require(\"./attributes\");\nconst {setEvent} = require(\"./event\");\n// const {cls} = require(\"./classes\");\nconst ATR = 'atr'\nconst CLS = 'cls'\nconst EVT = 'evt'\n\n/**\n * Modify a DOM element/node\n * @param {HTMLElement|Element|Node} node - DOM element/node\n * @param {Object} object - patch data {atr: Attributes, cls: Classes, evt: Events}\n */\nfunction patch(node, object) {\n    if (!isVal(node)) {\n        error(`Node is ${node}`)\n        return\n    }\n    if (!isEl(node)) {\n        error(`\"${node}\" is not Element or Node`);\n        return\n    }\n    if (hasField(object, ATR)) {\n        if (isObj(object[ATR])) {\n            forEach(object[ATR], (v, k)=>{\n                setAttr(node, k, v)\n            })\n        }\n    }\n    if (hasField(object, CLS)) {\n        const cls = object[CLS];\n        if (isArr(cls)){\n            node.className = cls.join(' ')\n        } else {\n            node.className = cls\n        }\n    }\n    if (hasField(object, EVT)) {\n        if (isObj(object[EVT])) {\n            forEach(object[EVT], (v, k)=>{\n                setEvent(node, k, v)\n            })\n        }\n    }\n}\n\nmodule.exports = {patch}","/**\n * @module DOM\n * @memberOf dom\n */\n\nconst {isUnd, isStr} = require(\"../core/types\")\nconst {filter, contains} = require(\"../core/collections\")\n\nconst emptyStyle = ['', 'initial', 'unset', undefined, null];\n\n/**\n * Set style / Get style / Get all styles\n * @param {HTMLElement|Element|Node} e - element/node\n * @param {String} [p] - style property name\n * @param {String} [v] - style property value\n * @return {Array|Object|String|*|string}\n */\nfunction style(e, p, v) {\n    if (isUnd(p)) {\n        // let stl = {};\n        let cs = getComputedStyle(e);\n        cs = filter(cs, (s, n) => isStr(n)&&!contains(emptyStyle, s))\n        // ForEach(cs, (s) => stl[s] = cs[s]);\n        return cs\n    }\n    if (isUnd(v)) return e.style[p] || getComputedStyle(e)[p];\n    e.style[p] = v;\n}\n\n/**\n * Element has style property\n * @param {HTMLElement|Element|Node} e - element/node\n * @param {String} p - style property name\n * @return {boolean}\n */\nfunction hasStyle(e, p) {\n    let s = style(e, p);\n    return !contains(emptyStyle, s)\n}\n\nmodule.exports = {style, hasStyle}","/**\n * @namespace dom\n */\nconst query = require('./query');\nconst event = require('./event');\nconst classes = require('./classes');\nconst attributes = require('./attributes');\nconst position = require('./position');\nconst append = require('./append');\nconst patch = require('./patch');\nconst styles = require('./styles');\nmodule.exports = {\n    ...query,\n    ...event,\n    ...classes,\n    ...attributes,\n    ...position,\n    ...append,\n    ...patch,\n    ...styles\n};","const T = require(\"../core/types\");\nconst {$, $$} = require(\"../dom/query\")\n\n/**\n * Http Content class\n */\nclass HttpContent{\n    constructor(type, data) {\n        /**\n         * @type {String}\n         */\n        this.type = type;\n        /**\n         * @type {String|Object|Element}\n         */\n        this.data = data;\n    }\n}\n\n/**\n * Http request class\n * @class\n */\nclass HttpRq{\n    /**\n     * @param {HttpMethod} m\n     */\n    setMethod(m) {\n        this.method = m.toUpperCase();\n    };\n\n    /**\n     * @param {String} u\n     */\n    setUrl(u) {\n        this.url = encodeURI(u);\n    };\n\n    /**\n     * Set request param/arg\n     * @param {String} n - name\n     * @param {String} v - value\n     */\n    setArg(n, v) {\n        this.args[n] = v;\n    };\n\n    buildUrlEncoded(args) {\n        let ue = \"\";\n        args = args || this.args;\n\n        let argNames = Object.keys(args);\n        if (argNames.length>0) {\n            for (let i = 0; i < argNames.length; i++) {\n                ue += encodeURIComponent(argNames[i]) + '=' + encodeURIComponent(args[argNames[i]]);\n                if (i < argNames.length - 1) {\n                    ue += '&';\n                }\n            }\n        }\n        return ue;\n    };\n\n    /**\n     * Set request header\n     * @param {String} n - name\n     * @param {String} v - value\n     */\n    setHeader(n, v) {\n        this.headers[n] = v.toString();\n    };\n\n    /**\n     * Get request header\n     * @param {String} n - name\n     */\n    getHeader(n) {\n        return this.headers[n];\n    };\n\n    /**\n     * Set request content\n     * @param {String} contentType\n     * @param {any} data\n     */\n    setContent(contentType, data) {\n        this.content.type = contentType.toLowerCase();\n        this.content.data = data;\n    };\n\n    /**\n     * Set request json content\n     * @param {String|Object} data\n     */\n    jsonContent(data) {\n        let str = \"\";\n        if (typeof data === \"string\") {\n            str = data;\n        } else {\n            str = JSON.stringify(data);\n        }\n        this.setContent('json', str);\n        this.setHeader('Content-Type', 'application/json');\n    };\n\n    /**\n     * Set request xml content\n     * @param {String|Node} data\n     */\n    xmlContent(data) {\n        if (T.isStr(data))\n            this.setContent('xml', data);\n        else this.setContent('xml', data.outerHTML);\n        this.setHeader('Content-Type', 'application/xml');\n    };\n    /**\n     * Set request multipart data from Form element\n     * @param {String|Node|Element} form - form element/id\n     */\n    formContent(form) {\n        let formElement = $$(form)[0];\n        let frm = new FormData(formElement);\n        this.formMultiPartContent(frm);\n    };\n\n    /**\n     * Set request multipart data from FormData object\n     * @param {FormData} frm - custom form data object\n     */\n    formMultiPartContent(frm) {\n        this.setContent('form_multipart', frm);\n        // this.setHeader('Content-Type', 'multipart/form-data; boundary=' + frm.boundary)\n    };\n\n    /**\n     * Set request data as urlencoded\n     * @param {Object} data\n     */\n    formUrlEncodedContent(data) {\n        this.setContent('form_urlencoded', this.buildUrlEncoded(data));\n        this.setHeader('Content-Type', 'application/x-www-form-urlencoded');\n    };\n\n    /**\n     *\n     * @param {HttpMethod} method\n     * @param {String} url\n     * @param {Object} args\n     * @param {Object} headers\n     * @param {HttpContent} content\n     */\n    constructor(method='GET', url, args, headers, content) {\n        this.args = args || {};\n        this.headers = headers || {};\n        this.content = content || new HttpContent('#urlencoded', {});\n\n        this.setMethod(method);\n\n        this.setUrl(url);\n    }\n\n}\n\nmodule.exports = {HttpContent, HttpRq};\n","/**\n * Http Response class\n * @property json {Object}\n * @property xml {XMLDocument}\n *\n */\nclass HttpRs {\n    json\n    xml\n\n    /**\n     * @constructor\n     * @param {XMLHttpRequest} xhr\n     */\n    constructor(xhr) {\n        this.xhr = xhr\n        this.status = {\n            code: xhr.status,\n            text: xhr.statusText\n        };\n        this.headers = xhr.getAllResponseHeaders();\n        this.contentLength = xhr.response.length || 0;\n        this.data = xhr.response;\n        if (xhr.responseType === 'text' || xhr.responseType === '')\n            this.text = xhr.responseText;\n        Object.defineProperty(this, 'json', {\n            get() {\n                try {\n                    if (!xhr.responseJSON) {\n                        xhr.responseJSON = JSON.parse(this.xhr.responseText);\n                    }\n                } catch (e) {\n                    console.log(e);\n                }\n                return xhr.responseJSON\n            }\n        });\n\n        Object.defineProperty(this, 'xml', {\n            get() {\n                try {\n                    if (!xhr.responseXML && !xhr.responseXml) {\n                        let parser = new DOMParser();\n                            xhr.responseXml = parser.parseFromString(self.text,\"text/xml\");\n                    }\n                }catch (e) {\n                    console.log(e)\n                }\n\n                return xhr.responseXml;\n            }\n        })\n    }\n\n}\nmodule.exports = {HttpRs};","/**\n * Wrapper class for XHR\n * @module http/ajax\n * @memberOf http\n */\nconst {HttpRq, HttpContent} = require(\"./request\");\nconst {HttpRs} = require(\"./response\");\nconst T = require(\"../core/types\");\nconst {forEach} = require(\"../core/collections\");\n\n\n/**\n * A wrapper class for {@link XMLHttpRequest} to facilitate sending requests and handling events\n * @class\n */\nclass Ajax {\n     /**\n     * @constructor\n     * @param {HttpMethod|HttpRq} m - Request method string or {@link http.HttpRq}\n     * @param {String} [url]\n     * @param {Object} [params] - Request parameters object\n     * @param {Object?} [headers] - Headers object\n     * @param {HttpContent?} [content] - Optional http content {@link HttpContent}\n     */\n    constructor(m, url, params = {}, headers = {}, content = new HttpContent()) {\n         /** @type {HttpRq}\n          * @see {http.HttpRq}\n          */\n        this.rq = {}\n         /** @type {http.HttpRs}\n          * @see {http.HttpRs}\n          */\n         this.rs = {}\n        if (m instanceof HttpRq) {\n            this.rq = m\n        } else {\n            this.rq = new HttpRq(m, url, params, headers, content);\n        }\n        // Fields\n        this.rs = {readyState: 0};\n        this.xhr = new XMLHttpRequest();\n\n        this.preparedCallback = function (rq) {\n        };\n\n        this.progressCallback = function (ev, rq) {\n        };\n\n        this.uploadProgressCallback = function (xhr) {\n        };\n\n        this.successCallback = function (rq, rs) {\n        };\n        this.uploadFinishCallback = function (xhr) {\n\n        };\n        this.failCallback = function (rq, rs) {\n        };\n        Object.defineProperty(this, 'xhr', {enumerable: false})\n    }\n\n    // Methods\n    /**\n     * Set header\n     * @param {String} n - header name\n     * @param {String} [v] - header value\n     * @returns {Ajax}\n     */\n    header(n, v) {\n        this.rq.setHeader(n, v);\n        return this;\n    };\n\n    /**\n     * Add/Set headers\n     * @param {Object} hdrs - headers object\n     * @returns {Ajax}\n     */\n    headers(hdrs = {}) {\n        forEach(hdrs, (v, k) => {\n            this.rq.setHeader(k, v);\n        });\n        return this;\n    };\n\n    /**\n     * @param {Function} callbackRqRs\n     * @returns {Ajax}\n     */\n    onSuccess(callbackRqRs) {\n        this.successCallback = callbackRqRs;\n        return this;\n    };\n\n    /**\n     * @param {Function} callbackRqRs\n     * @returns {Ajax}\n     */\n    onUploadSuccess(callbackRqRs) {\n        this.uploadFinishCallback = callbackRqRs;\n        return this;\n    };\n\n    /**\n     * @param {Function} callbackRqRs\n     * @returns {Ajax}\n     */\n    onFail(callbackRqRs) {\n        this.failCallback = callbackRqRs;\n        return this;\n    };\n\n    /**\n     * @param {Function} callbackRqRs\n     * @returns {Ajax}\n     */\n    onProgress(callbackRqRs) {\n        this.progressCallback = callbackRqRs;\n        return this;\n    };\n\n    /**\n     * @param {Function} callbackRqRs\n     * @returns {Ajax}\n     */\n    onUploadProgress(callbackRqRs) {\n        this.uploadProgressCallback = callbackRqRs;\n        return this;\n    };\n\n    /**\n     * Set custom content {@link HttpContent}\n     * @param {HttpContent} content\n     * @returns {Ajax}\n     */\n    withContent(content={}) {\n        switch (content.type) {\n            case 'json': this.rq.jsonContent(content.data); break;\n            case 'xml': this.rq.xmlContent(content.data); break;\n            case 'form': this.rq.formContent(content.data); break;\n            case 'form_multipart': this.rq.formMultiPartContent(content.data); break;\n            case 'form_urlencoded': this.rq.formUrlEncodedContent(content.data); break;\n            default: this.rq.setContent(content.type, content.data);\n        }\n        return this;\n    }\n\n    /**\n     * Set xml request data\n     * @param {XMLDocument} data\n     * @returns {Ajax}\n     */\n    xmlData(data) {\n        this.rq.xmlContent(data);\n        return this;\n    }\n\n    /**\n     * Set form-data request data\n     * @param {String|Node} form\n     * @returns {Ajax}\n     */\n    formData(form) {\n        this.rq.formContent(form);\n        return this;\n    };\n\n    /**\n     * Set json request data\n     * @param {String|Object} data\n     * @returns {Ajax}\n     */\n    jsonData(data) {\n        this.rq.jsonContent(data);\n        return this;\n    };\n\n    /**\n     * Set url-encoded request data\n     * @param {Object} data - simple data object\n     * @returns {Ajax}\n     */\n    urlEncodedData(data) {\n        this.rq.formUrlEncodedContent(data);\n        return this;\n    };\n\n    _prepare(reset) {\n        if (this.isPrepared && !reset) {\n            // self.onprepare && self.onprepare(self.rq);\n            return this\n        }\n\n        // prepare url\n        let url = this.rq.url;\n\n        if (this.rq.args && !T.isEmpty(this.rq.args)) {\n            url.indexOf('?') >= 0 || (url += '?');\n            url += this.rq.buildUrlEncoded();\n        }\n        reset && (this.xhr = new XMLHttpRequest());\n        this.xhr.open(this.rq.method, url);\n\n        // prepare headers\n        for (let h in this.rq.headers) {\n            if (this.rq.headers.hasOwnProperty(h))\n                this.xhr.setRequestHeader(h, this.rq.headers[h]);\n        }\n\n        this.isPrepared = true;\n        this.preparedCallback && this.preparedCallback(this.rq);\n        // preparedCallback && preparedCallback();\n        return this;\n    };\n\n    /**\n     * Send XHR request\n     * @param {Function} [finishCallback] - called after all other callbacks\n     * @returns {Ajax}\n     */\n    send(finishCallback) {\n        this._prepare();\n        let ajax = this;\n        let xhr = this.xhr;\n        this.xhr.onreadystatechange = function (ev) {\n\n            // onloadend\n            if (xhr.readyState === 4) {\n                let callback;\n                if (xhr.status >= 200 && xhr.status <= 399) {\n                    callback = ajax.successCallback;\n                } else {\n                    callback = ajax.failCallback;\n                }\n                ajax.rs = new HttpRs(xhr);\n                finishCallback && finishCallback(ajax.rq, ajax.rs, ajax.xhr);\n                callback && callback(ajax.rq, ajax.rs, ajax.xhr);\n            }\n        };\n        this.xhr.onprogress = function (ev) {\n            ajax.progressCallback && ajax.progressCallback(ev, ajax);\n        };\n\n        this.xhr.upload.onprogress = function (ev) {\n            ajax.uploadProgressCallback && ajax.uploadProgressCallback(ev, ajax);\n        };\n\n        this.xhr.upload.onloadend = function (ev) {\n            ajax.uploadFinishCallback && ajax.uploadFinishCallback(ev, ajax);\n        };\n\n        try {\n            this.xhr.send(this.rq.content.data);\n        } catch (e) {\n            this.onFail(e);\n        }\n\n        return ajax;\n    }\n\n    /**\n     * Send request with Promise\n     * @return {Promise<Ajax>}\n     */\n    async sendAsync() {\n        const ajax = this;\n        const promise = new Promise((res, rej) => {\n            ajax.onSuccess(()=>{\n                return res(ajax)\n            });\n            ajax.onFail(()=>rej(ajax));\n        });\n        ajax.send();\n        return promise;\n    }\n}\n\nmodule.exports = {Ajax: Ajax};","/**\n * @fileOverview\n *\n * @module http/methods\n * @memberOf http\n */\n\n\nconst {Ajax} = require(\"./ajax\");\nconst {HttpContent} = require(\"./request\");\n\n/**\n * A factory for {@link http.Ajax}\n * @private\n * @param {HttpMethod} method - {@link HttpMethod}\n * @param {String} url\n * @param {Object} params\n * @param {Object} headers\n * @param {HttpContent} content\n * @param {Object} callbacks - {success:Function?, fail: Function?, progress: Function?, prepare: Function?,uploadProgress: Function?, uploadFinish: Function?}\n * @return {http.Ajax}\n */\nfunction makeHttpRequest(method, url, params, headers, content, callbacks) {\n    let ajax = new Ajax(method.toUpperCase(), url, params, headers);\n    if (content && content.type) {\n        if (content.type.toLowerCase() === 'json') {\n            ajax.jsonData(content.data);\n        } else if (content.type.toLowerCase() === 'urlencoded') {\n            ajax.urlEncodedData(content.data);\n        } else if (content.type.toLowerCase() === 'form') {\n            ajax.formData(content.data);\n        } else {\n            ajax.Rq.setContent(content.type, content.data);\n        }\n    }\n    callbacks.success && ajax.onSuccess(callbacks.success);\n    callbacks.fail && ajax.onFail(callbacks.fail);\n    callbacks.progress && ajax.onProgress(callbacks.progress);\n    callbacks.prepare && (ajax.preparedCallback = callbacks.prepare);\n    callbacks.uploadProgress && (ajax.uploadProgressCallback = callbacks.uploadProgress);\n    callbacks.uploadFinish && (ajax.uploadFinishCallback = callbacks.uploadFinish);\n    return ajax;\n}\n\n//{method, url, args, headers, type, data, success, fail, progress, prepare, uploadProgress, uploadFinish}\n/**\n * A factory for {@link http.Ajax}. creates Ajax request with supplied {@link HttpRequestOptions}\n *\n * @param {HttpRequestOptions} opts\n * @return {http.Ajax}\n */\nfunction makeRequest(opts) {\n    return makeHttpRequest(opts.method || 'OPTIONS', opts.url, opts.params, opts.headers, new HttpContent(opts.type, opts.data), {\n        success: opts.success,\n        fail: opts.fail,\n        progress: opts.progress,\n        prepare: opts.prepare,\n        uploadProgress: opts.uploadProgress,\n        uploadFinish: opts.uploadFinish\n    })\n}\n\n/**\n * @private\n * @param {http.Ajax} r - Ajax request\n * @param {Function} resolved - resolved callback\n * @param {array<any>} params - passed to resolved callback\n * @returns {Promise<Ajax>}\n */\nfunction makePromise(r, resolved = null, params = null) {\n    return new Promise((res, rej) => {\n        r.onSuccess(()=>{\n            if (resolved)\n                try {\n                    resolved(params);\n                } catch (e) {}\n            return res(r)\n        });\n        r.onFail(()=>rej(r));\n    })\n}\n\n/**\n * Send request asynchronously\n *\n * @param {HttpRequestOptions} opts\n * @return {Promise<any>}\n */\nasync function sendRequest(opts) {\n    let r = makeRequest(opts);\n    r.send(opts.finish);\n    return await makePromise(r);\n}\n\n/**\n * Create Ajax GET request\n *\n * @param {String} url - server url\n * @param {Object} [params] - query string params\n * @returns {http.Ajax}\n */\nfunction Get(url, params){\n    return new Ajax('GET', url, params);\n}\n\n/**\n * Create Ajax POST request\n *\n * @param {String} url - server url\n * @param {Object} [params] - query string params\n */\nfunction Post(url, params){\n    return new Ajax('POST', url, params);\n}\n\n/**\n * Create Ajax DELETE request\n *\n * @param {String} url - server url\n * @param {Object} params - query string params\n * @returns {http.Ajax}\n */\nfunction Delete(url, params){\n    return new Ajax('DELETE', url, params);\n}\n\n/**\n * Create Ajax PUT request\n *\n * @param {String} url - server url\n * @param {Object} params - query string params\n * @returns {Ajax}\n */\nfunction Put(url, params){\n    return new Ajax('PUT', url, params);\n}\n\n/**\n * Create Ajax PATCH request\n *\n * @param {String} url - server url\n * @param {Object} params - query string params\n * @returns {http.Ajax}\n */\nfunction Patch(url, params){\n    return new Ajax('PATCH', url, params);\n}\n\n/**\n * Create and send GET request\n *\n * @param {HttpRequestOptions} opt\n * @return {Promise<http.Ajax>}\n */\nfunction sendGet(opt) {\n    opt.method = 'GET';\n    opt.type = undefined;\n    opt.data = undefined;\n    return sendRequest(opt)\n}\n\n/**\n * Create and send DELETE request\n *\n * @param {HttpRequestOptions} opt\n * @return {Promise<http.Ajax>}\n */\nfunction sendDelete(opt) {\n    opt.method = 'DELETE';\n    return sendRequest(opt)\n}\n\n/**\n * Create and send POST request\n *\n * @param {HttpRequestOptions} opt\n * @return {Promise<http.Ajax>}\n */\nfunction sendPost(opt) {\n    opt.method = 'POST';\n    return sendRequest(opt)\n}\n\n/**\n * Create and send PUT request\n *\n * @param {HttpRequestOptions} opt\n * @return {Promise<http.Ajax>}\n */\nfunction sendPut(opt) {\n    opt.method = 'PUT';\n    return sendRequest(opt)\n}\n\n/**\n * Create and send PATCH request\n *\n * @param {HttpRequestOptions} opt\n * @return {Promise<http.Ajax>}\n */\nfunction sendPatch(opt) {\n    opt.method = 'PATCH';\n    return sendRequest(opt)\n}\n\nmodule.exports = {\n    makeHttpRequest, makeRequest, makePromise, sendRequest,\n    Get, Post, Delete, Put, Patch,\n    sendGet, sendDelete, sendPost, sendPut, sendPatch\n};","/**\n * Asynchronous Http Client using XHR\n * @module http/client\n * @memberOf http\n */\n\nconst http = require('./methods');\nconst {startsWith, endsWith, filter, forEach} = require('../core/collections');\n\n\nclass InterceptorStore {\n    all = []\n    use(interceptor) {\n        this.all.push(interceptor);\n    }\n}\n\n/**\n * Async Http Client using XHR\n * @class\n */\nclass XHttpClient {\n    /**\n     *\n     * @param {String} host - Server host address\n     * @param {Number} [ratePerMinute] - Maximum requests allowed per minute (default 300)\n     */\n    constructor(host = '' ,{ratePerMinute = 300}={}) {\n        if (endsWith(host, '/')) {\n            host = host.split('').splice(host.length-1).join()\n        }\n        /**\n         * Interceptors\n         * @type {{request: InterceptorStore, response: InterceptorStore}}\n         */\n        this.interceptors = {\n            request : new InterceptorStore(),\n            response: new InterceptorStore()\n        }\n        this.host = host\n        this.__queue = []\n        this.__sending = []\n        this.__interval = undefined\n        this.__ratePerMinute = ratePerMinute\n        this.__timeBetween = 60000/ratePerMinute\n        this.__lastRequestTime = new Date().getTime() - this.__timeBetween;\n    }\n\n    /**\n     *\n     * @param client\n     * @private\n     */\n    _intervalSend(client) {\n        if (client.__queue.length === 0) {\n            clearInterval(client.__interval);\n            client.__interval = undefined;\n            return;\n        }\n        let now = new Date().getTime();\n        if (now - client.__lastRequestTime > client.__timeBetween) {\n            let ajax = client.__queue.pop().send();\n            client.__sending.push(ajax);\n            client.__lastRequestTime = now;\n        }\n    }\n\n    /**\n     *\n     * @param ajax\n     * @param responseType\n     * @param cancelToken\n     * @return {Promise<Ajax>}\n     * @private\n     */\n    _addRequest(ajax, {responseType, cancelToken}) {\n        this.__queue.push(ajax);\n        if (!this.__interval) {\n            this.__interval = setInterval(this._intervalSend, 1, this);\n        }\n        ajax.cancelToken = cancelToken;\n        if (responseType) ajax.xhr.responseType = responseType;\n        return http.makePromise(ajax, ({client, request}) => {\n            let rqi = client.__sending.indexOf(request);\n            if (rqi >= 0) {\n                client.__sending.splice(rqi);\n            }\n        }, {client: this, request: ajax});\n    }\n\n    /**\n     * Add ajax request to queue\n     * @param {Ajax} ajax\n     */\n    send(ajax) {\n        this._addRequest(ajax)\n    }\n\n    /**\n     *\n     * @param method\n     * @param route\n     * @param params\n     * @param headers\n     * @param content\n     * @param responseType\n     * @param cancelToken\n     * @return {Promise<Ajax>}\n     * @private\n     */\n    _contentRequest(method, route, {params, headers, content,responseType, cancelToken}) {\n        if (!startsWith(route, '/') && route.length > 1) {\n            route = '/' + route;\n        }\n        return this._addRequest(\n            method(this.host+route, params || {})\n                .headers(headers || {})\n                .withContent(content || {type: '', data: ''})\n        , {responseType, cancelToken})\n    }\n\n    /**\n     * Equeue http GET request\n     *\n     * @param {String} route - request route - appends to host address\n     * @param {Object} [params] - request params(args)\n     * @param {Object} [headers] - request headers\n     * @param {String} [responseType] - \"text\"|\"json\"|\"xml\"|\"document\"|\"arraybuffer\"|\"blob\"|\"ms-stream\"|\"\"\n     * @param {String} [cancelToken] - A token used to cancel a group of requests\n     * @return {Promise<Ajax>}\n     */\n    get(route, {params, headers, responseType, cancelToken}={}) {\n        if (!startsWith(route, '/') && route.length > 1) {\n            route = '/' + route;\n        }\n        return this._addRequest(http.Get(this.host+route, params).headers(headers), {responseType, cancelToken});\n    }\n\n    /**\n     * Equeue http POST request\n     *\n     * @param {String} route - request route - appends to host address\n     * @param {Object} [params] - request params(args)\n     * @param {Object} [headers] - request headers\n     * @param {http.HttpContent} [content] - request content. example: {type:'json', data={count: 13}}\n     * @param {String} [responseType] - \"text\"|\"json\"|\"xml\"|\"document\"|\"arraybuffer\"|\"blob\"|\"ms-stream\"|\"\"\n     * @param {String} [cancelToken] - A token used to cancel a group of requests\n     * @return {Promise<Ajax>}\n     */\n    post(route, {params, headers, content,responseType, cancelToken}={}) {\n        return this._contentRequest(http.Post, route, {params, headers, content,responseType, cancelToken});\n    }\n\n    /**\n     * Equeue http PUT request\n     *\n     * @param {String} route - request route - appends to host address\n     * @param {Object} [params] - request params(args)\n     * @param {Object} [headers] - request headers\n     * @param {http.HttpContent} [content] - request content. example: {type:'json', data={count: 13}}\n     * @param {String} [responseType] - \"text\"|\"json\"|\"xml\"|\"document\"|\"arraybuffer\"|\"blob\"|\"ms-stream\"|\"\"\n     * @param {String} [cancelToken] - A token used to cancel a group of requests\n     * @return {Promise<Ajax>}\n     */\n    put(route, {params, headers, content,responseType, cancelToken}={}) {\n        return this._contentRequest(http.Put, route, {params, headers, content,responseType, cancelToken});\n    }\n\n    /**\n     * Equeue http PATCH request\n     *\n     * @param {String} route - request route - appends to host address\n     * @param {Object} [params] - request params(args)\n     * @param {Object} [headers] - request headers\n     * @param {http.HttpContent} [content] - request content. example: {type:'json', data={count: 13}}\n     * @param {String} [responseType] - \"text\"|\"json\"|\"xml\"|\"document\"|\"arraybuffer\"|\"blob\"|\"ms-stream\"|\"\"\n     * @param {String} [cancelToken] - A token used to cancel a group of requests\n     * @return {Promise<Ajax>}\n     */\n    patch(route, {params, headers, content,responseType, cancelToken}={}) {\n        return this._contentRequest(http.Patch, route, {params, headers, content,responseType, cancelToken});\n    }\n\n    /**\n     * Equeue http DELETE request\n     *\n     * @param {String} route - request route - appends to host address\n     * @param {Object} [params] - request params(args)\n     * @param {Object} [headers] - request headers\n     * @param {http.HttpContent} [content] - request content. example: {type:'json', data={count: 13}}\n     * @param {String} [responseType] - \"text\"|\"json\"|\"xml\"|\"document\"|\"arraybuffer\"|\"blob\"|\"ms-stream\"|\"\"\n     * @param {String} [cancelToken] - A token used to cancel a group of requests\n     * @return {Promise<Ajax>}\n     */\n    delete(route, {params, headers, content,responseType, cancelToken}={}) {\n        return this._contentRequest(http.Delete, route, {params, headers, content,responseType, cancelToken});\n    }\n\n    /**\n     * Cancel all requests(sending or enqueued) with given token\n     * @param {String} token\n     */\n    cancel(token) {\n        this.__queue = filter(this.__queue, (a)=>a.cancelToken !== token);\n        let sending = filter(this.__sending, (a)=>a.cancelToken === token);\n        forEach(sending, (ajax)=>{\n            try {\n                ajax.xhr.abort();\n            } catch (e) {\n                console.log(e)\n            }\n        });\n\n        this.__sending = filter(this.__sending, (a)=>a.cancelToken !== token);\n    }\n}\n\nmodule.exports = {XHttpClient}","/**\n * @namespace http\n */\n\nconst request = require('./request');\nconst response = require('./response');\nconst ajax = require('./ajax');\nconst methods = require('./methods');\nconst client = require('./client');\n\nmodule.exports = {\n    ...request,\n    ...response,\n    ...ajax,\n    ...methods,\n    ...client\n}\n\n/**\n * @typedef {\"GET\"|\"POST\"|\"PUT\"|\"DELETE\"|\"PATCH\"|\"OPTIONS\"} HttpMethod\n */\n\n/**\n * @typedef {Object} HttpRequestOptions - Http request arguments\n * @property {HttpMethod} [method]\n * @property {String} [url]\n * @property {Object} [params]\n * @property {Object} [headers]\n * @property {string} [type] - request type \"json\"|\"xml\"|\"array-buffer\"|\"blob\"|undefined\n * @property {any} [data] - request content data\n * @property {Function} [finish] - finish callback, called after all other callbacks\n * @property {Function} [success] - success callback\n * @property {Function} [fail] - fail callback\n * @property {Function} [progress] - progress callback\n * @property {Function} [prepare] - prepare callback, called before send\n * @property {Function} [uploadProgress] - upload progress callback\n * @property {Function} [uploadFinish] - upload finish callback\n */","import {isFun} from \"../core/types\";\n\nclass Component {\n    constructor() {\n        this.name = \"\";\n        this.state = {};\n        this.view = (ctx)=>\"\";\n    }\n\n    static create({name, state, view}) {\n        let c = new Component();\n        c.name = name;\n        c.state = state;\n        if (!isFun(view))\n            throw `\"Component.view\" must be a function: \\nComponent:${c} \\nview:${view}`;\n\n        c.view = view;\n    }\n}\n\nmodule.exports = {Component}","/**\n * @module DOM\n * @memberOf dom\n */\n\nconst {contains} = require(\"../core/collections\");\n\n/**\n * @class\n * @see dom.parseQuery\n */\nclass QueryParams {\n    constructor() {\n        /** @type {String} */\n        this.tag = \"\"\n        /** @type {String|null} */\n        this.id = null\n        /** @type {String[]} */\n        this.classes = []\n    }\n}\n\n/**\n * Parse Jade-like query to an object containing tag, id and classes\n *\n * @param {String} query - A string containing jade-like tag, id and classes\n * @param {QueryParams} def - Default value if empty\n * @returns {QueryParams}\n *\n * @example\n *  parseQuery('div#root.main.container');\n *  // returns {tag: 'div', id: 'root', classes: ['main', 'container']}\n */\nfunction parseQuery(query, def={}) {\n    let params = new QueryParams();\n    params.tag = \"\";\n    query = query.trim();\n    let hasHash = contains(query,\"#\");\n    let hasDot = contains(query,\".\");\n    if (hasDot || hasHash) {\n        let sp = query.split('#');\n        if (hasHash) {\n            params.tag = sp[0].toUpperCase();\n            if (!hasDot) {\n                params.id = query.split(\"#\")[1];\n            }\n        }\n        if (hasDot) {\n            let ic = (sp.length>1?sp[1]:sp[0]).split(\".\");\n            if (!hasHash) {\n                params.tag = ic[0].toUpperCase();\n            } else {\n                params.id = ic[0];\n            }\n            params.classes = ic.slice(1);\n            if (params.classes.length>0) params.hasClass = true;\n        }\n    } else {\n        params.tag = query.toUpperCase();\n    }\n    if (params.tag === \"\" || params.tag === undefined)\n        params.tag = \"div\";\n\n    return params;\n}\n\nmodule.exports = {parseQuery}","const {parseQuery} = require(\"../dom/tic\");\nconst {map, flatMap} = require(\"../core/collections\");\nconst {isStr, isObj, isFun, isEmpty, isVal} = require(\"../core/types\");\n\nclass VNode {\n    constructor(tag=\"#text\") {\n        this.tag = tag;\n        this.id = undefined;\n        this.text = undefined;\n        this.element = undefined;\n        this.attr = {}\n    }\n\n    get isText() {\n        return this.tag === '#text';\n    }\n\n    get $first() {\n        return this.nodes[0];\n    }\n\n    get $text() {\n        if (this.isText) return this.text;\n        return (this.$first&&this.$first.isText)?this.$first.text:undefined;\n    }\n\n    set $text(v) {\n        if (this.isText) {\n            this.text = v;\n        } else {\n            if (this.$text) {\n                this.$first.$text = v;\n            } else {\n                this.text = v;\n            }\n        }\n    }\n\n    static createRef(type, props) {\n        // console.log(\"REF\",type)\n        let vRef = new VNode(!isVal(type.name) || isEmpty(type.name)?type.constructor.name:type.name);\n        vRef.target = type;\n        vRef.isRef = true;\n        vRef.props = props;\n        return vRef;\n    }\n\n    static create(type, args={attr:{}, on: {}}, ...children) {\n        if (args === null) args = {attr: {}, on:{}};\n        // Fragment\n        // if (type instanceof Array) {\n        //     console.log(\"FRAG\", type)\n        //     children = flatMap(children);\n        //     children = map(children,(ch)=>isStr(ch)?VNode.createText(ch):ch);\n        //     console.log(\"FRAG Children\",children)\n        //     vNode.nodes = children;\n        //     return children\n        // }\n        if (isFun(type) || isObj(type))\n            return VNode.createRef(type, args);\n        // if (children[0] instanceof Array)\n        //     children = children[0]\n        children = flatMap(children);\n        children = map(children,(ch)=>isStr(ch)?VNode.createText(ch):ch);\n\n        let query = parseQuery(type);\n        let vNode = new VNode(query.tag);\n        vNode.id = query.id;\n        vNode.attr = args.attr || {};\n        if (args.style) vNode.attr.style = args.style\n        if (!vNode.attr.class && query.hasClass)\n            vNode.attr.class = query.classes.join(' ');\n\n        vNode.nodes = children;\n        return vNode;\n    }\n\n    static createText(text) {\n        let vn = new VNode();\n        vn.text = text;\n        return vn;\n    }\n}\n\nmodule.exports = {VNode}","const {warn} = require(\"../core/logging\");\nconst {first, forEach} = require(\"../core/collections\");\n\nfunction detachChildren(root) {\n    let children = Array.from(root.children);\n    forEach(children, (c)=>{c.remove()});\n    return children;\n}\n\nfunction replaceFirstChild(root, element) {\n    // ideal case\n    if (root.children.length === 0) {\n        return root.append(element);\n    }\n\n    if (root.children.length>0) {\n        warn('Root is not empty');\n        let children = detachChildren(root);\n        if (children[0].__X_VDOM__) {\n            children[0] = element\n        } else {\n            children = children.reverse().push(element);\n            children = children.reverse();\n        }\n        root.append(...children);\n    }\n}\n\nfunction replaceChildren(root, element) {\n    detachChildren(root);\n    root.append(element);\n}\n\nmodule.exports = {\n    detachChildren,\n    replaceChildren,\n    replaceFirstChild\n}","import {Component} from \"./component\";\nimport {VNode} from \"./vnode\";\nimport {forEach, map} from \"../core/collections\";\nimport {hasField, isArr, isFun, isStr} from \"../core/types\";\nimport {kebab} from \"../core/cases\";\nimport {append} from \"../dom/append\";\n\n\n/**\n *\n * @param {VNode|{view:Function}|Function} node\n * @param {Object} ctx\n * @returns {Text|*}\n */\nfunction createVDom(node, ctx = {}) {\n    // console.log(\"PRENODE\", node)\n    if (Component.isPrototypeOf(node)) { // is component\n        // console.log(\"COMP\", node)\n        let inst = Object.create(node.prototype);\n        node = inst.view(ctx);\n    } else if (hasField(node, 'view')) { // is object\n        // console.log(\"VIEW\", node)\n        node = node.view(ctx);\n        // console.log(\"VIEW-AFTER\", node)\n    } else if (isFun(node)) { // is function\n        // console.log(\"FUN\")\n        node = node(ctx);\n    } else if (isStr(node)) { // is text\n        // console.log(\"STR\")\n        node = VNode.createText(node);\n    }\n    // console.log(\"NODE\", node)\n\n    if (node.isRef === true) {\n        node = createVDom(node.target, node.props);\n    }\n    // console.log(\"NODEREF\", node);\n\n\n    // console.log(\"ARR\", node)\n    // if (node instanceof Array) return node;\n\n    if (!(node instanceof VNode)) {\n        console.log(\"ILL\", node)\n        throw Error(`Illegal value \"${node}\", not supported in VirtualDOM tree`);\n    }\n    // if (node.tag === 'FRAGMENT') {\n    //     console.log(\"FRAG\")\n    //     return map(node.nodes, (ch)=>createDom(ch))\n    // }\n    // let frags =\n    if (node.nodes)\n        node.nodes = map(node.nodes, function (child, i) {\n            // console.log(\"CHIIILD\", child)\n            return createVDom(child)\n        });\n\n    return node;\n}\n\n/**\n *\n * @param {VNode} vn\n * @param {Object} ctx\n * @returns {Text|*}\n */\nfunction createDom(vn, ctx = {}) {\n    if (vn.tag === \"#text\") {\n        let text = document.createTextNode(vn.text);\n        vn.element = text;\n        text.__X_VDOM__ = vn;\n        return text;\n    }\n\n    let element = document.createElement(vn.tag);\n    vn.id && (element.id = vn.id);\n    vn.attr && forEach(vn.attr, function (a, k, atr) {\n        if (k === \"style\" && !isStr(a)) {\n            let ns = \"\";\n            forEach(a, (v, k) => {\n                ns += `${kebab(k)}: ${v};`;\n            });\n            element.setAttribute(k, ns);\n        } else if (k === \"class\" && isArr(a)) {\n            element.setAttribute(k, a.join(' '));\n        } else if (k === \"className\") {\n            element.className = a;\n        } else {\n            element.setAttribute(k, a);\n        }\n    });\n\n    forEach(vn.nodes, function (n) {\n        append(element, createDom(n));\n    });\n\n    vn.element = element;\n    element.__X_VDOM__ = vn;\n    return element\n}\n\nfunction render(c, ctx) {\n    let vdom = createVDom(c, ctx);\n    // console.log(\"VDOM\", vdom);\n    return createDom(vdom);\n}\n\nmodule.exports = {\n    createDom,\n    createVDom,\n    render\n}","import {render} from \"./renderer\";\nimport {VNode} from \"./vnode\";\nimport {Component} from \"./component\";\nimport {$$} from \"../dom\";\n\n\nfunction mount(rootElement, component, force = false) {\n    rootElement = $$(rootElement)[0];\n    if (rootElement.__X_VDOM__ && !force) {\n        console.log(\"must patch\", component);\n        return;\n    }\n    rootElement.__X_VDOM__ = true;\n    console.log(rootElement);\n    let rendered = render(component, {});\n    // console.log(\"Rendered\", rendered);\n    // console.log(\"Component\", component);\n    rootElement.append(rendered);\n}\n\nmodule.exports = {mount, VNode, Component}","const Core = require('./core');\nconst Dom = require('./dom');\nconst Http = require('./http');\nconst VM = {\n    ...require('./vm/component'),\n    ...require('./vm/vnode'),\n    ...require('./vm/utility'),\n    ...require('./vm/renderer'),\n    ...require('./vm/app')\n};\nmodule.exports = {\n    Core,\n    Dom,\n    Http,\n    VM\n}","const scope = require(\"./core/scope\")\n\nconst index = require(\"./index\")\n// const hscript = require(\"./vm/hscript.helpers\")\n\nscope.setGlobal({\n    X: {\n        ...index.Core,\n        ...index.Dom,\n        ...index.Http\n    },\n    VM: {\n        ...index.VM,\n        // ...hscript\n    }\n})\n\n// require(\"./ext/collections.ext\")\n// require(\"./ext/dom.ext\")"],"names":["$parcel$global","globalThis","self","window","global","isBrowser","undefined","document","navigator","HTMLElement","Element","Node","HTMLCollection","NodeList","$d70da93f4e155e2ba10f1adb402e229f$exports","setGlobal","obj","key","Object","keys","Extension","constructor","types","$d70da93f4e155e2ba10f1adb402e229f$var$_defineProperty","this","define","namedFunc","name","err","console","error","code","p","toString","pcode","polyfill","isUnd","x","isNull","isVal","isFun","isObj","hasField","field","pred","hasOwnProperty","$da84cb86f0fc8adc5561c3cc5dd2$exports","typeName","isNum","isStr","String","isArr","Array","isPrim","isList","length","item","isMutableList","add","isSet","Set","isMap","Map","isError","Error","isEl","isEls","isEmpty","Enum","src","c","MAP","i","dict","args","o","_X_LOOP_BREAK_","Symbol","_X_ANY_","_X_ALL_","BREAK","ANY","ALL","UNSAFE_PROPS","s","contains","value","indexOf","v","forEach","vi","push","remove","it","flatMap","any","idx","splice","objMatchOne","match","m","k","objMatchAll","predicate","f","def","inc","RegExp","test","funOrKey","emptyOf","nodeType","createTextNode","textContent","createElement","tagName","__proto__","create","concat","target","source","func","len","forEachRight","range","firstIndex","r","first","lastIndex","last","fn","all","filterStr","right","omit","res","filterObj","a","assign","filterArr","filter","maxIndex","list","mx","index","ix","minIndex","mn","map","transform","mapArr","mapObj","reduce","acc","rs","deepMerge","excludeKeys","maxDepth","allowUnsafeProps","depth","_keyGen","fnName","keyGen","$a0158b085de035a2f4c3c57ff6b4958$exports","toggle","cl","deepClone","forN","init","finish","step","forEachRange","start","end","startsWith","endsWith","reverse","rev","filterRight","reduceRight","keyValuePairs","object","entries","max","min","translateObject","join","lists","joined","joinKey","presentValue","groupBy","group","objectValues","values","_logTitle","flag","t","Date","getHours","getMinutes","getSeconds","getMilliseconds","_logTime","_prepareLog","lt","LogLevels","TRACE","INFO","WARN","ERROR","SILENT","Config","LogLevel","lvl","l","$a3893bd5dab7a15cc466b48a2d$exports","showTrace","showInfo","showWarn","showError","silent","trace","apply","info","log","warn","$d3d34283650256dce8a19461d991c48$exports","kebab","kb","pres","charAt","toLowerCase","camel","cml","toUpperCase","pascal","psc","snake","snk","decimalRegex","hexRegex","octRegex","binRegex","emailRegex","$eb2eb743c604ee0ad26a5daa5e4a9a8a$exports","isDecimal","str","isHex","isOctal","isBinary","isEmail","seq","Queryable","[object Object]","$af786bde8e533f81510775d359f7092$var$_defineProperty","count","__src__","slice","loop","vs","asObject","asArray","nk","arr","$af786bde8e533f81510775d359f7092$exports","bodyOf","$dfe880299931d5a37f48f00ed8443$exports","funcBodyEquals","f1","f2","throttle","intervalMs","___last___","getTime","call","debounce","afterMs","___timeout___","caller","_this","clearTimeout","setTimeout","$af1f41873c630aac11ca6abe22f$exports","Classes","className","trim","replace","split","e","element","defineProperty","get","classes","set","upd","DOMTokenList","from","__update__","items","getAttribute","setAttribute","ci","seal","$cd13c0b4a28db8e277ae8e6e074cf37$exports","cls","of","addClass","hasClass","removeClass","toggleClass","$","q","root","querySelectorAll","$c775515117e7394dc2bc42b55000c24d$exports","$$","querySelector","queryOf","maxParent","body","gen","id","parentElement","children","findIndex","$ef3294cf02081459627b2af4db0915e$exports","setEvent","event","listener","options","__EVENTS__","ev","fl","removeEventListener","addEventListener","clearEvent","hasEvent","type","getAttributes","atr","getAttributeNames","n","hasAttr","hasAttribute","getAttr","setAttr","Attributes","has","$de8d088b78f98968ffb308442503e4$exports","attrs","relLeft","offsetLeft","absLeft","clientLeft","relWidth","offsetWidth","absWidth","clientWidth","$e886ff5f79346d353b5fb9f52f57ee$exports","left","leftWin","rightWin","width","widthWin","$f0f71b9d355f86207991be699884462b$exports","append","parent","elements","dispatchEvent","CustomEvent","detail","$dfe58cbc6bd7c6106464a17162d59ff7$exports","patch","node","emptyStyle","style","cs","getComputedStyle","$ccbbcabea1a0c04b366d88ca0e986a$exports","hasStyle","$d5500a4d20c35dd28c3a0f4ca9e$exports","HttpContent","data","$feee369d139a6e9228f1e369abeec212$exports","HttpRq","setMethod","method","setUrl","u","url","encodeURI","setArg","buildUrlEncoded","ue","argNames","encodeURIComponent","setHeader","headers","getHeader","setContent","contentType","content","jsonContent","JSON","stringify","xmlContent","outerHTML","formContent","form","formElement","frm","FormData","formMultiPartContent","formUrlEncodedContent","$ebf62aa85bb9001ed7c715667408d27$exports","HttpRs","xhr","$ebf62aa85bb9001ed7c715667408d27$var$_defineProperty","status","text","statusText","getAllResponseHeaders","contentLength","response","responseType","responseText","responseJSON","parse","responseXML","responseXml","parser","DOMParser","parseFromString","$f1f1fdec45e8e7bbe5c80c3eb0618245$exports","Ajax","params","rq","readyState","XMLHttpRequest","preparedCallback","progressCallback","uploadProgressCallback","successCallback","uploadFinishCallback","failCallback","enumerable","header","hdrs","onSuccess","callbackRqRs","onUploadSuccess","onFail","onProgress","onUploadProgress","withContent","xmlData","formData","jsonData","urlEncodedData","_prepare","reset","isPrepared","open","h","setRequestHeader","send","finishCallback","ajax","onreadystatechange","callback","onprogress","upload","onloadend","promise","Promise","rej","makeHttpRequest","callbacks","Rq","success","fail","progress","prepare","uploadProgress","uploadFinish","makeRequest","opts","makePromise","resolved","async","sendRequest","$e7741166b7a0212e956f7504cc$exports","Get","Post","Delete","Put","Patch","sendGet","opt","sendDelete","sendPost","sendPut","sendPatch","InterceptorStore","use","interceptor","$d8f34e1f7afdb0b89a68ab664473573d$exports","XHttpClient","host","ratePerMinute","interceptors","request","__queue","__sending","__interval","__ratePerMinute","__timeBetween","__lastRequestTime","_intervalSend","client","clearInterval","now","pop","_addRequest","cancelToken","setInterval","rqi","_contentRequest","route","post","put","delete","cancel","token","sending","abort","$eb7668f284ffece23259a974b2a2fd90$exports","Component","state","view","ctx","$dfd6ff969fb560795ebea152c4764$exports","QueryParams","tag","$f68a9fa0552fe986d36a8733648d9b94$exports","parseQuery","query","hasHash","hasDot","sp","ic","VNode","attr","isText","$first","nodes","$text","props","vRef","isRef","on","createRef","ch","createText","vNode","class","vn","$ea85173c693c23476394f92c4d396ce$exports","detachChildren","$fcad401278191f7eb6697bb444098$exports","replaceChildren","replaceFirstChild","__X_VDOM__","createVDom","isPrototypeOf","prototype","child","createDom","ns","$f703e030a79d11a31827818ef1b5ab$exports","render","$e5fd3ced22dbd7fce412fd27314c827$exports","mount","rootElement","component","force","rendered","VM","$ee12400dde7bc966a3d6f3e8a569094$exports","Core","Dom","Http","X"],"version":3,"file":"exir-bundle.js.map"}
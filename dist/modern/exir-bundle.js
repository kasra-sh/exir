!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={};function n(){return void 0!==e.window&&void 0!==e.document&&void 0!==e.navigator}n()||(e.HTMLElement=e.HTMLElement?e.HTMLElement:function(){},e.Element=e.Element?e.Element:function(){},e.Node=e.Node?e.Node:function(){},e.HTMLCollection=e.HTMLCollection?e.HTMLCollection:function(){},e.NodeList=e.NodeList?e.NodeList:function(){}),t={setGlobal:function(t){for(let n of Object.keys(t))e[n]=t[n]},Extension:class{constructor(e){this.types=e,this.types=[],this.pcode="\n"}define(e){if(!e.name){let t=`Function must have a name [Extension.define(f)]\n<<${e}>>`;return console.error(t),`\n/**\n *${t}\n */`}let t="\n";for(let n of this.types)void 0!==n&&(t+=`${n.name||n}.prototype.${e.name} = `);return t+=e.toString()+";\n",this.pcode+=t,t}polyfill(e){if(!e.name){let t=`Extension function must have a name:\n<<${e}>>`;return console.error(t),`\n/**\n *${t}\n */`}let t="\n";for(let n of this.types)t+=`if (${n.name||n}.prototype.${e.name} === undefined) ${n.name||n}.prototype.${e.name} = ${e.toString()};\n`;this.pcode+=t}},isBrowser:n};var r,s,o={},i={};function a(e){return null!==e&&void 0===e}function l(e){return null===e}function c(e){return!a(e)&&!l(e)}function u(e){return"function"==typeof e}function f(e){return null!==e&&"object"==typeof e}function h(e,t,n){return!!c(e)&&(u(n)?n(e[t]):e.hasOwnProperty(t))}i={typeName:function(e){return e.hasOwnProperty("constructor")?e.constructor.name:typeof e},isUnd:a,isNull:l,isVal:c,isNum:function(e){return"number"==typeof e},isStr:function(e){return"string"==typeof e||e instanceof String},isFun:u,isObj:f,isArr:function(e){return e instanceof Array},isPrim:function(e){return c(e)&&!f(e)&&!u(e)||"symbol"==typeof e},isList:function(e){return c(e.length)&&u(e.item)},isMutableList:function(e){return c(e.length)&&u(e.item)&&u(e.add)},isSet:function(e){return e instanceof Set},isMap:function(e){return e instanceof Map},isError:function(e){return e instanceof Error},isEl:function(e){return e instanceof Element||e instanceof HTMLElement||e instanceof Node},isEls:function(e){return e instanceof HTMLCollection||e instanceof NodeList},hasField:h,isEmpty:function(e){return h(e,"length")?e.length<=0:!u(e)&&(!f(e)||Object.keys(e).length<=0)},Enum:function(e){let t=0,n={};for(let r of Object.keys(e))n[n[t]=r]=t++;return n},dict:function(...e){let t={};for(let n=0;n<e.length;n++)n%2==0&&(t[e[n]]=e[n+1]);return t}},e._X_LOOP_BREAK_||(e._X_LOOP_BREAK_=Symbol("BREAK_LOOP"),e._X_ANY_=Symbol("ANY"),e._X_ALL_=Symbol("ALL"));const d=e._X_LOOP_BREAK_,p=e._X_ANY_,m=e._X_ALL_,y=["__proto__","constructor","__defineGetter__","__defineSetter__","prototype"];function _(e,t){if(i.isVal(e))return i.isObj(e)||i.isStr(e)||i.isArr(e)?e[t]:e.item(t)}function g(e,t,n){return!!i.isVal(e)&&(!i.isArr(e)&&i.isObj(e)?e[n]===t:e.indexOf(t)>=0)}function b(e,...t){i.isArr(e)?x(t,(t=>e.push(t))):i.isMutableList(e)&&e.add(t)}function E(e,...t){t=I(t);let n=!1;return x(t,(t=>{let r=e.indexOf(t);r>=0&&(n=!0,e.splice(r,1))})),n}function v(e,t){let n=Object.keys(t);for(let r of n){if(t[r]===p&&e.hasOwnProperty(r))return!0;if(t[r]===e[r])return!0}return!1}function T(e,t){let n=Object.keys(t);for(let r of n)if(t[r]!==p&&t[r]!==e[r])return!1;return!0}function C(e,t=(()=>!0),n=!0){return i.isUnd(e)?t:i.isFun(e)?e:e instanceof RegExp?(t,n,r,s)=>!i.isObj(t)&&e.test(t.toString()):i.isObj(e)?0===Object.keys(e).length?t:n?(t,n,r,s)=>v(t,e):(t,n,r,s)=>T(t,e):(t,n,r,s)=>t===e}function w(e){if(i.isUnd(e))return e=>e;if(i.isFun(e))return e;if(i.isStr(e)){const t=e;e=e=>e[t]}throw Error(`Predicate ${e} cannot be of type ${typeof e}`)}function $(e,t={}){return i.isStr(e)?"":i.isList(e)||i.isArr(e)?[]:i.isObj(e)?i.isEl(e)?3===e.nodeType||8===e.nodeType?document.createTextNode(e.textContent):document.createElement(e.tagName):e.__proto__?Object.create(e.__proto__):{}:t}function A(e,t,n=!1){if(i.isStr(e))return e.concat(t);if(i.isArr(e))return e.concat(t);for(let r of Object.keys(t))e[r]&&!n||(e[r]=t[r]);return e}function x(e,t){if(!i.isVal(e))return-1;if(!i.isArr(e)||!i.isStr(e)||!i.isList(e)){let n=0,r=Object.keys(e);const s=r.length;for(;n<s;n++){const s=r[n];if(t(e[s],s,n,e)===d)return n}return n}const n=e.length;if(i.isArr(e))for(let r=0;r<n;r++){if(t(_(e,r),r,r,e)===d)return r}else for(let r=0;r<n;r++){if(t(e[r],r,r,e)===d)return r}return e.length}function k(e,t,n=[]){if(!i.isArr(e)||!i.isStr(e)){let r=0,s=Object.keys(e);for(let r=s.length-1;r>=0;r--){if(r<n[1])continue;if(r>=n[0])return r;if(t(e[s[r]],s[r],r,e)===d)return r}return r}for(let n=e.length-1;n>=0;n--){if(t(_(e,n),n,n,e)===d)return n}return e.length}function S(e,t){t=C(t,(()=>!0));let n=-1;return x(e,(function(r,s,o){if(n=t(r,s,o,e),!0===n)return n=o,d})),n}function O(e,t){return _(e,S(e,t))}function N(e,t){t=C(t,(()=>!0));let n=-1;return k(e,(function(e,r,s){if(n=t(e,r,s),!0===n)return n=s,d})),n}function P(e,t){return e[N(e,t)]}function j(e,t){let n=C(t),r=!1;return x(e,(function(e,t,s,o){if(r=n(e,t,s,o),!0===r)return d})),r}function L(e,t){t=C(t,(()=>!0));let n=!0;return x(e,(function(e,r,s,o){if(n=t(e,r,s,o),!1===n)return d})),n}function q(e,t,n=!1,r=!1){t=C(t,(()=>!0));let s="";return(n?k:x)(e,(function(n,o,i){t&&t(n,o,i,e)!==r||(s+=n)})),s}function R(e,t,n=!1,r=!1){if(i.isArr(t)){let e=Object.assign({},t);t=r?(t,n)=>!j(e,n):(t,n)=>j(e,n)}else t=C(t,(()=>!0));let s={};const o=Object.keys(e),a=o.length;if(n)for(let n=a-1;n>=0;n--){const i=o[n],a=e[i];t(a,i,n,e)!==r&&(s[i]=a)}else for(let n=0;n<a;n++){const i=o[n],a=e[i];t(a,i,n,e)!==r&&(s[i]=a)}return s}function V(e,t,n=!1,r=!1){if(i.isArr(t)){let e=Object.assign([],t);t=r?(t,n,r)=>!j(e,r):(t,n,r)=>j(e,r)}else t=C(t,(()=>!0));let s=[];const o=e.length;if(n)for(let n=o-1;n>=0;n--){const o=e[n];!t(o,n,n,e)!==r&&s.push(o)}else for(let n=0;n<o;n++){const o=e[n];t(o,n,n,e)!==r&&s.push(o)}return s}function M(e,t,n=!1){return i.isStr(e)?q(e,t,n):i.isArr(e)||i.isList(e)?V(e,t,n):R(e,t,n)}function U(e,t){let n;t=w(t);let r=-1;return x(e,(function(e,s){let o=t(e,s);n?o>=n&&(n=o,r=s):(n=o,r=s)})),r}function D(e,t){let n;t=w(t);let r=-1;return x(e,(function(e,s){let o=t(e,s);n?o<=n&&(n=o,r=s):(n=o,r=s)})),r}function H(e,t,n=!1){return t=C(t,(e=>e)),i.isArr(e)?function(e,t,n=!1){let r=[];const s=e.length;if(n)for(let n=s;n>=0;n--){let s=t(e[n],n,e);if(s===d)break;i.isUnd(s)||r.push(s)}else for(let n=0;n<s;n++){let s=t(e[n],n,e);if(s===d)break;i.isUnd(s)||r.push(s)}return r}(e,t,n):i.isObj(e)?function(e,t,n=!1){let r={};const s=Object.keys(e),o=e.length;if(n)for(let n=o;n>=0;n--){const o=s[n];let a=t(e[o],o,n,e);if(a===d)break;i.isUnd(a)||(r[o]=a)}else for(let n=0;n<o;n++){const o=s[n];let a=t(e[o],o,n,e);if(a===d)break;i.isUnd(a)||(r[o]=a)}return r}(e,t,n):void 0}function I(e,t){let n;return n=i.isStr(e)?"":i.isArr(e)?[]:{},x(e,(function(r,s){let o;t?o=t(r,s,e):!i.isArr(n)&&i.isObj(n)?(o={},o[s]=r):o=r,n=A(n,o)})),n}function F(e,t,n=e){return i.isUnd(t)&&(t=(e,t)=>e+t),x(e,((e,r,s)=>{n=t(n,e,r,s)})),n}function W(e,t,{excludeKeys:n=[],maxDepth:r=999,allowUnsafeProps:s=!1}={excludeKeys:[],maxDepth:999,allowUnsafeProps:!1},o=0){return o>=r||x(t,((a,l)=>{n&&g(n,l)||s&&g(y,l)||(i.isObj(t[l])?e[l]=W($(t[l]),t[l],{excludeKeys:n,maxDepth:r,depth:o+1}):e[l]=a)})),e}function X(e,t){let n=e;if(i.isStr(e))n=t=>t[e];else if(i.isArr(e))n=t=>F(t,((t,n,r)=>{if(g(e,r))return t+n}),"");else if(!i.isFun(e))throw Error(`${t} key only accepts: String, [String,...], Function`);return n}o={ANY:p,ALL:m,BREAK:d,item:_,contains:g,add:b,remove:E,toggle:function(e,...t){if(0===t.length)return;let n;if(1===(t=I(t)).length)E(e,t)||b(e,t[0]);else{t.push(t[0]);let r=!1;x(e,((s,o)=>{n=t.indexOf(s),n>=0&&t.length>n+1&&(r=!0,e[o]=t[n+1])})),r||e.push(t[0])}},concat:A,emptyOf:$,objMatchOne:v,objMatchAll:T,deepMerge:W,deepClone:function(e,{excludeKeys:t=[],maxDepth:n=999,allowUnsafeProps:r=!1}={excludeKeys:[],maxDepth:999,allowUnsafeProps:!1}){return W($(e),e,{excludeKeys:t,maxDepth:n,allowUnsafeProps:r})},forN:function(e,t=0,n=0,r=(t<n?1:-1)){if(r>0)for(;t<=n;t+=r)e(t);for(;t>=n;t+=r)e(t)},forEachRange:function(e,t,n=0,r){if(!i.isArr(e)||!i.isStr(e)){let s=Object.keys(e);r=r||s.length-1;for(let o=n;o<=r;o++){if(t(e[s[o]],s[o],o,e)===d)return o}return r}r=r||e.length;for(let s=n;s<r;s++){if(t(_(e,s),s,s,e)===d)return s}return r},forEach:x,forEachRight:k,firstIndex:S,first:O,startsWith:function(e,t){return i.isStr(e)&&i.isStr(t)?0===e.indexOf(t):(t=C(t,(()=>!0)))(O(e))},lastIndex:N,last:P,endsWith:function(e,t){return i.isStr(e)&&i.isStr(t)?e.indexOf(t)===e.length-t.length:(t=C(t,(()=>!0)))(P(e))},reverse:function(e){if(i.isArr(e))return e.reverse();let t="";return k(e,(function(e){t+=e})),t},any:j,all:L,filter:M,filterRight:function(e,t){return M(e,t,!0)},reduce:F,reduceRight:function(e,t,n=e){k(e,((e,r,s)=>{n=t(n,e,r,s)}))},map:H,flatMap:I,keyValuePairs:function(e){let t=[];return x(e,((e,n)=>{t.push(i.dict(n,e))})),t},entries:function(e){let t=[];return x(e,((e,n)=>{t.push([n,e])})),t},maxIndex:U,max:function(e,t){return e[U(e,t)]},minIndex:D,min:function(e,t){return e[D(e,t)]},shuffle:function(e){return Array.prototype.sort.call(e,(()=>Math.random()-.5))},sortAsc:function(e,t,n="en"){let r=t?function(e,r){return(""+t(e)).localeCompare(""+t(r),n)}:void 0;return Array.prototype.sort.call(e,r)},sortDesc:function(e,t,n="en"){let r=t?function(e,r){return(""+t(r)).localeCompare(""+t(e),n)}:void 0;return Array.prototype.sort.call(e,r)},translateObject:function(e,t){i.isArr(t)&&M(e,t);const n=Object.keys(t);let r=M(e,n);for(let e of n)r[t[e]]=r[e],delete r[e];return r},omit:function(e,t,n=!1){return i.isStr(e)?q(e,t,n,!0):i.isArr(e)||i.isList(e)?V(e,t,n,!0):R(e,t,n,!0)},join:function(e,...t){if(0===t.length)return[];if(!L(t,i.isArr))throw Error("Join only accepts arrays of data!");let n=X(e,"Join");const r={};return x(t,(e=>{x(e,(e=>{const t=n(e),s=r[t];r[t]=s?A(s,e):e}))})),r},groupBy:function(e,...t){if(0===t.length)return{};if(!L(t,i.isArr))throw Error("GroupBy only accepts arrays of data!");let n=X(e,"GroupBy");const r={};return x(t,(e=>{x(e,(e=>{const t=n(e),s=r[t];r[t]=s?A(s,e):[e]}))})),r},objectValues:function(e){return Object.values?Object.values(e):H(e,(e=>e))}};var B={};function z(e){return`[${e}] [${function(){let e=new Date;return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}:${e.getMilliseconds()}`}()}]`}function G(e,t){e.reverse(),e.push("display: inline-block; font-weight: bold; color: black","%c"+t),e.reverse()}const K={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:-1},J={LogLevel:K.TRACE};function Q(e){return J.LogLevel!==K.SILENT&&J.LogLevel<=e}B={Config:J,LogLevels:K,showTrace:function(){J.LogLevel=K.TRACE},showInfo:function(){J.LogLevel=K.INFO},showWarn:function(){J.LogLevel=K.WARN},showError:function(){J.LogLevel=K.ERROR},silent:function(){J.LogLevel=K.SILENT},trace:function(...e){Q(K.TRACE)&&(e.reverse(),e.push(z("ðŸ” TRACE")),e.reverse(),console.trace.apply(this,e))},info:function(...e){Q(K.INFO)&&(G(e,z("ðŸ”µ INFO")),console.log.apply(this,e))},warn:function(...e){Q(K.WARN)&&(G(e,z("ðŸš¨ WARN")),console.warn.apply(this,e))},error:function(...e){Q(K.ERROR)&&(G(e,z("ðŸ’¥ ERROR")),console.error.apply(this,e))}};var Y;Y={kebab:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let s=e.charAt(r);"_"!==s?(s>="A"&&s<="Z"&&r>0&&!n&&(t+="-"),t+=s.toLowerCase(),n=!1):(t+="-",n=!0)}return t},camel:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let s=e.charAt(r);"-"===s||"_"===s?n=!0:!0===n?(t+=s.toUpperCase(),n=!1):t+=0===r?s.toLowerCase():s}return t},pascal:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let s=e.charAt(r);"-"===s||"_"===s?n=!0:!0===n?(t+=s.toUpperCase(),n=!1):t+=0===r?s.toUpperCase():s}return t},snake:function(e){let t="",n=!1;for(let r=0;r<e.length;r++){let s=e.charAt(r);"-"!==s?(s>="A"&&s<="Z"&&r>0&&!n&&(t+="_"),t+=s.toLowerCase(),n=!1):(t+="_",n=!0)}return t}};var Z;const ee=/^[-+]?\d*(\.\d+|\d*)(e[-+]?\d+)?$/,te=/^[-+]?[a-f0-9]+$/,ne=/^[-+]?[0][0-7]+$/,re=/^[-+]?[01]+$/,se=/^[a-z0-9]([a-z0-9._%-+][a-z0-9]|[a-z0-9])*@[a-z0-9]([a-z0-9.-][a-z0-9]|[a-z0-9])*\.[a-z]{2,6}$/i;Z={isDecimal:function(e){return ee.test(e)},isHex:function(e){return te.test(e)},isOctal:function(e){return ne.test(e)},isBinary:function(e){return re.test(e)},isEmail:function(e){return se.test(e)},startsWith:function(e,t){return 0===e.indexOf(t)},endsWith:function(e,t){return e.indexOf(t)===t.length-1},contains:function(e,t){return e.indexOf(t)>=0}};var oe;class ie{constructor(){this.__src__=void 0,this.keys=void 0}get count(){return this.keys.length}static of(e){let t=new ie;return t.__src__=e,t.keys=Object.keys(e),t.len=t.keys.length,t}slice(e=0,t=this.count-1){this.keys=this.keys.slice(e,t)}key(e=0){return this.keys[e]}value(e=0){return this.__src__[this.key(e)]}loop(e,t=!1){if(t)for(let t=this.count-1;t>=0&&null!==e(this.value(t),this.key(t),t);t--);else for(let t=0;t<this.count&&null!==e(this.value(t),this.key(t),t);t++);return this}values(e=!1){let t=[];return this.loop((function(e,n,r){t.push(e)}),e),t}item(e){if(void 0===e)return;if(i.isArr(this.__src__))return this.value(e);let t={};return t[this.key(e)]=this.value(e),t}asObject(){let e={};return this.loop((function(t,n,r){e[n]=t})),e}asArray(e=!1){return this.values(e)}filter(e,t=!1){let n=[];return this.loop((function(t,r,s){let o=e(t,r,s);if(!0===o)n.push(r);else if(null===o)return null}),t),this.keys=n,this}map(e,t=!1){let n=[];return this.loop((function(t,r,s){n.push(e(t,r,s))}),t),n}any(e){let t=!1;return this.loop((function(n,r,s){if(t=e(n,r,s),!0===t)return null})),t}all(e){let t=!0;return this.loop((function(n,r,s){if(t=e(n,r,s),!1===t)return null})),t}first(e){if(!e)return this.item(0);let t;return this.loop((function(n,r,s){if(!0===e(n,r,s))return t=s,null})),this.item(t)}last(e){if(!e)return this.item(this.count-1);let t;return this.loop((function(n,r,s){if(!0===e(n,r,s))return t=s,null}),!0),this.item(t)}}oe={Queryable:ie};var ae;function le(e){let t=e.toString().match(/{[\w\W]*}/);return null===t?e.toString():t[0]}ae={funcBodyEquals:function(e,t){return le(e)===le(t)},throttle:function(e,t){var n=(new Date).getTime();return function(r){(new Date).getTime()-n>=t&&(n=(new Date).getTime(),e.call(this,r))}},debounce:function(e,t){var n=null;function r(...r){clearTimeout(n),n=setTimeout((function(t){return e.apply(t,r)}),t,this)}return r.flush=function(...t){return clearTimeout(n),e.apply(this,t)},r},bindArgs:function(e,t){return function(){return e.apply(this,t)}},once:function(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}},s={...o,...B,...i,...Y,...Z,...oe,...ae};var ce,ue;const{isEl:fe,isEls:he,isStr:de,isVal:pe}=i;var me;const{toggle:ye,any:_e,all:ge,contains:be,filter:Ee,flatMap:ve,forEach:Te}=o;class Ce{static split(e){return e.trim().replace(/\s+/," ").split(" ")}constructor(e){this.element=e,Object.defineProperty(this,"items",{get(){return this.classes},set(e){let t=!1;this.classes&&(t=!0),!i.isVal(e)||i.isEmpty(e)?this.classes=[]:i.isArr(e)?this.classes=e:i.isStr(e)?this.classes=Ce.split(e):e instanceof DOMTokenList&&(this.classes=Array.from(e)),t&&this.__update__()}}),this.items=e.getAttribute("class")}static of(e){return new Ce(e)}__update__(){this.element.setAttribute("class",this.classes.join(" "))}contains(...e){return e=ve(e),ge(e,(e=>be(this.classes,e)))}add(...e){e=ve(e),Te(e,(e=>{this.contains(e)||this.classes.push(e.toString())})),this.__update__()}remove(...e){e=ve(e);let t=this.classes.length;return this.classes=Ee(this.classes,(t=>!_e(e,(e=>e.endsWith("*")?t.startsWith(e.replace("*","")):t===e)))),this.__update__(),t!==this.classes.length}toggle(...e){ye(this.classes,e),this.__update__()}}Object.seal(Ce),me={Classes:Ce,cls:function(e){return Ce.of(e)},addClass:function(e,...t){Ce.of(e).add(t)},hasClass:function(e,...t){Ce.of(e).contains(t)},removeClass:function(e,...t){Ce.of(e).remove(t)},toggleClass:function(e,...t){Ce.of(e).toggle(t)}};const{cls:we}=me;function $e(e,t=document){return fe(e)?Array.of(e):he(e)?Array.from(e):de(e)?fe(t)?Array.from(t.querySelectorAll(e)):(B.error(`Query root is not a node!\t[X.$(${e}, ${t})]`),null):(B.error(`Query is not string nor element X.$(${e})`),null)}ue={$:$e,$$:function(e,t=document){return fe(e)?Array.of(e):de(e)?fe(t)?Array.of(t.querySelector(e)):(B.error(`Query root is not a node!\t[X.$(${e}, ${t})]`),null):(B.error(`Query is not string nor element X.$$(${e})`),null)},queryOf:function e(t,n,r){if(!pe(t)||!fe(t))return B.error(`\nQuery generator's first parameter must be Element/Node! CAUSE: X.queryOf(${t}, ${n})`),null;n=n||document.body;let s=t.tagName;if(r=r||"",t.id)return s+=t.id?"#"+t.id:"",s+(""!==r?" "+r:"");if(we(t).items.forEach((function(e){s+=""!==e?"."+e:""})),s){if($e(s,t.parentElement).length>1){let e=Array.from(t.parentElement.children).findIndex((function(e){return t===e}));e>0&&(s=s+":nth-child("+(e+1)+")")}}return t.parentElement&&t.parentElement!==n&&t.parentElement!==document?e(t.parentElement,n)+" > "+s+(""!==r?" "+r:""):s+(""!==r?" "+r:"")}};var Ae;const{isArr:xe,hasField:ke,isEmpty:Se}=i,{contains:Oe,forEach:Ne,filter:Pe}=o,{error:je}=B,{funcBodyEquals:Le}=ae;Ae={setEvent:function(e,n,r,s){t.isBrowser()?(xe(n)||(n=Oe(n," ")?n.split(" ").Map((e=>e.trim())):[n]),e.__EVENTS__=e.__EVENTS__||{},Ne(n,(t=>{e.__EVENTS__[t]=e.__EVENTS__[t]||[];let n=function(t){r(t,e)};ke(s,"duplicates",(e=>e))||(e.__EVENTS__[t]=Pe(e.__EVENTS__[t],(n=>{if(Le(n.l,r))return e.removeEventListener(t,n.f,n.o),!1}))),e.__EVENTS__[t].push({f:n,l:r,o:s}),e.addEventListener(t,n,s)}))):je("Events are browser only!")},clearEvent:function(e,n){t.isBrowser()?(xe(n)||(n=Oe(n," ")?n.split(" ").Map((e=>e.trim())):[n]),e.__EVENTS__=e.__EVENTS__||{},Se(e.__EVENTS__)||Ne(n,(function(t){e.__EVENTS__[t]=e.__EVENTS__[t]||[],Se(e.__EVENTS__[t])||(Ne(e.__EVENTS__[t],(n=>(e.removeEventListener(t,n.f,n.o),!1))),e.__EVENTS__[t]=[])}))):je("Events are browser only!")},hasEvent:function(e,t){return e.__EVENTS__&&e.__EVENTS__[t]&&!Se(e.__EVENTS__[t])}};var qe;function Re(e){let t={};return o.forEach(e.getAttributeNames(),(n=>t[n]=e.getAttribute(n))),t}function Ve(e,t,n){return!!e.hasAttribute(t)&&(!n||e.getAttribute(t)===n)}function Me(e,t){return e.getAttribute(t)}function Ue(e,t,n){i.isArr(t)?o.forEach(t,(e=>this.set(e,n))):i.isObj(t)?o.forEach(t,((e,t)=>this.set(t,e))):e.setAttribute(t,n)}class De{constructor(e){this.element=e}keys(){return this.element.getAttributeNames()}all(){return Re(this.element)}set(e,t){return Ue(this.element,e,t),this}get(e){return Me(this.element,e)}has(e,t){return Ve(this.element,e,t)}remove(e){this.set(e,void 0)}}qe={getAttributes:Re,Attributes:De,getAttr:Me,hasAttr:Ve,setAttr:Ue,attrs:function(e){return new De(e)}};var He;function Ie(e){return e.offsetLeft}function Fe(e){return e.clientLeft}function We(e){return e.offsetWidth}function Xe(e){return e.clientWidth}He={left:Ie,leftWin:Fe,right:function(e){return Ie(e)+We(e)},rightWin:function(e){return Fe(e)+Xe(e)},width:We,widthWin:Xe};var Be;Be={append:function(e,...t){window.dispatchEvent(new CustomEvent("x.dom.append",{detail:{parent:e,elements:t}})),e.append(...t)}};var ze;const{error:Ge}=B,{forEach:Ke}=o,{isVal:Je,isArr:Qe,isObj:Ye,isEl:Ze,hasField:et}=i,{setAttr:tt}=qe,{setEvent:nt}=Ae,rt="atr",st="evt";ze={patch:function(e,t){if(Je(e))if(Ze(e)){if(et(t,rt)&&Ye(t.atr)&&Ke(t.atr,((t,n)=>{tt(e,n,t)})),et(t,"cls")){const n=t.cls;Qe(n)?e.className=n.join(" "):e.className=n}et(t,st)&&Ye(t.evt)&&Ke(t.evt,((t,n)=>{nt(e,n,t)}))}else Ge(`"${e}" is not Element or Node`);else Ge(`Node is ${e}`)}};var ot;const{isUnd:it,isStr:at}=i,{filter:lt,contains:ct}=o,ut=["","initial","unset",void 0,null];function ft(e,t,n){if(it(t)){let t=getComputedStyle(e);return t=lt(t,((e,t)=>at(t)&&!ct(ut,e))),t}if(it(n))return e.style[t]||getComputedStyle(e)[t];e.style[t]=n}ot={style:ft,hasStyle:function(e,t){let n=ft(e,t);return!ct(ut,n)}},ce={...ue,...Ae,...me,...qe,...He,...Be,...ze,...ot};var ht,dt;const{$:pt,$$:mt}=ue;class yt{constructor(e,t){this.type=e,this.data=t}}dt={HttpContent:yt,HttpRq:class{setMethod(e){this.method=e.toUpperCase()}setUrl(e){this.url=encodeURI(e)}setArg(e,t){this.args[e]=t}buildUrlEncoded(e){let t="";e=e||this.args;let n=Object.keys(e);if(n.length>0)for(let r=0;r<n.length;r++)t+=encodeURIComponent(n[r])+"="+encodeURIComponent(e[n[r]]),r<n.length-1&&(t+="&");return t}setHeader(e,t){this.headers[e]=t.toString()}getHeader(e){return this.headers[e]}setContent(e,t){this.content.type=e.toLowerCase(),this.content.data=t}jsonContent(e){let t="";t="string"==typeof e?e:JSON.stringify(e),this.setContent("json",t),this.setHeader("Content-Type","application/json")}xmlContent(e){i.isStr(e)?this.setContent("xml",e):this.setContent("xml",e.outerHTML),this.setHeader("Content-Type","application/xml")}formContent(e){let t=mt(e)[0],n=new FormData(t);this.formMultiPartContent(n)}formMultiPartContent(e){this.setContent("form_multipart",e)}formUrlEncodedContent(e){this.setContent("form_urlencoded",this.buildUrlEncoded(e)),this.setHeader("Content-Type","application/x-www-form-urlencoded")}constructor(e="GET",t,n,r,s){this.args=n||{},this.headers=r||{},this.content=s||new yt("#urlencoded",{}),this.setMethod(e),this.setUrl(t)}}};var _t;_t={HttpRs:class{constructor(e){this.xhr=e,this.status={code:e.status,text:e.statusText},this.headers=e.getAllResponseHeaders(),this.contentLength=e.response.length||0,this.data=e.response,this.json=void 0,this.xml=void 0,"text"!==e.responseType&&""!==e.responseType||(this.text=e.responseText),Object.defineProperty(this,"json",{get(){try{e.responseJSON||(e.responseJSON=JSON.parse(this.xhr.responseText))}catch(e){console.log(e)}return e.responseJSON}}),Object.defineProperty(this,"xml",{get(){try{if(!e.responseXML&&!e.responseXml){let t=new DOMParser;e.responseXml=t.parseFromString(self.text,"text/xml")}}catch(e){console.log(e)}return e.responseXml}})}}};var gt;const{HttpRq:bt,HttpContent:Et}=dt,{HttpRs:vt}=_t,{error:Tt}=B,{forEach:Ct,deepClone:wt}=o;gt={Ajax:class{constructor(e,t,n={},r={},s=new Et){this.rq={},this.rs={},this.rq=e instanceof bt?e:new bt(e,t,n,r,s),this.rs={readyState:0},this.xhr=new XMLHttpRequest,this.preparedCallback=function(e){},this.progressCallback=function(e,t){},this.uploadProgressCallback=function(e,t){},this.successCallback=function(e){},this.uploadFinishCallback=function(e){},this.failCallback=function(e,t){},this.timeoutCallback=function(e){},this.abortCallback=function(e){},Object.defineProperty(this,"xhr",{enumerable:!1})}header(e,t){return this.rq.setHeader(e,t),this}headers(e={}){return Ct(e,((e,t)=>{this.rq.setHeader(t,e)})),this}onSuccess(e){return this.successCallback=e,this}onUploadSuccess(e){return this.uploadFinishCallback=e,this}onFail(e){return this.failCallback=e,this}onTimeout(e){return this.timeoutCallback=e,this}onAbort(e){return this.abortCallback=e,this}onProgress(e){return this.progressCallback=e,this}onUploadProgress(e){return this.uploadProgressCallback=e,this}withContent(e={}){switch(e.type){case"json":this.rq.jsonContent(e.data);break;case"xml":this.rq.xmlContent(e.data);break;case"form":this.rq.formContent(e.data);break;case"form_multipart":this.rq.formMultiPartContent(e.data);break;case"form_urlencoded":this.rq.formUrlEncodedContent(e.data);break;default:this.rq.setContent(e.type,e.data)}return this}xmlData(e){return this.rq.xmlContent(e),this}formData(e){return this.rq.formContent(e),this}jsonData(e){return this.rq.jsonContent(e),this}urlEncodedData(e){return this.rq.formUrlEncodedContent(e),this}prepare(e){if(this.isPrepared&&!e)return this;let t=this.rq.url;this.rq.args&&!i.isEmpty(this.rq.args)&&(t.indexOf("?")>=0||(t+="?"),t+=this.rq.buildUrlEncoded()),this.rs={readyState:0},e&&(this.xhr=new XMLHttpRequest),this.xhr.open(this.rq.method,t),Ct(this.rq.headers,((e,t)=>{try{this.xhr.setRequestHeader(t,this.rq.headers[e])}catch(e){Tt("Error while setting default header \n>>(",t,")<< Non-standard header name.")}}));let n=this,r=this.xhr;return this.xhr.onreadystatechange=function(e){if(4===r.readyState&&0!==r.status){let e=n.failCallback;r.status>=200&&r.status<=399&&(e=n.successCallback),n.rs=new vt(r),e&&e(n)}},this.xhr.onerror=function(e){n.failCallback&&n.failCallback(n,e)},this.xhr.onprogress=function(e){n.progressCallback&&n.progressCallback(n,e)},this.xhr.upload.onprogress=function(e){n.uploadProgressCallback&&n.uploadProgressCallback(n,e)},this.xhr.upload.onloadend=function(e){n.uploadFinishCallback&&n.uploadFinishCallback(n,e)},this.xhr.ontimeout=function(e){n.timeoutCallback&&n.timeoutCallback(n,e)},this.xhr.onabort=function(e){n.abortCallback&&n.abortCallback(n,e)},this.isPrepared=!0,this.preparedCallback&&this.preparedCallback(this.rq),this}send(){this.prepare();try{this.xhr.send(this.rq.content.data)}catch(e){this.failCallback(this,e)}return this}resend(){return this.prepare(!0).send()}async sendAsync(){const e=this,t=new Promise(((t,n)=>{e.onSuccess((()=>t(e))),e.onFail((()=>{n(e)}))}));return e.send(),t}}};var $t={};const{Ajax:At}=gt,{HttpContent:xt}=dt;function kt(e,t,n,r,s,o){let i=new At(e.toUpperCase(),t,n,r);return s&&s.type&&("json"===s.type.toLowerCase()?i.jsonData(s.data):"urlencoded"===s.type.toLowerCase()?i.urlEncodedData(s.data):"form"===s.type.toLowerCase()?i.formData(s.data):i.Rq.setContent(s.type,s.data)),o.success&&i.onSuccess(o.success),o.fail&&i.onFail(o.fail),o.progress&&i.onProgress(o.progress),o.prepare&&(i.preparedCallback=o.prepare),o.uploadProgress&&(i.uploadProgressCallback=o.uploadProgress),o.uploadFinish&&(i.uploadFinishCallback=o.uploadFinish),i}function St(e){return kt(e.method||"OPTIONS",e.url,e.params,e.headers,new xt(e.type,e.data),{success:e.success,fail:e.fail,progress:e.progress,prepare:e.prepare,uploadProgress:e.uploadProgress,uploadFinish:e.uploadFinish})}function Ot(e,t={},n={}){return new Promise(((r,s)=>{e.onSuccess((async()=>{t.default&&t.default(e,r,s,n);let o=t.onSuccess;if(o)try{o(e,r,s,n)}catch(e){}else r(e)})),e.onFail((async()=>{t.default&&t.default(e,r,s,n);let o=t.onFail;if(o)try{o(e,r,s,n)}catch(e){}else s(e)})),e.onAbort((async()=>{t.default&&t.default(e,r,s,n);let o=t.onAbort;if(o)try{o(e,r,s,n)}catch(e){}else s(e)})),e.onTimeout((async()=>{t.default&&t.default(e,r,s,n);let o=t.onTimeout;if(o)try{o(e,r,s,n)}catch(e){}else s(e)}))}))}async function Nt(e){let t=St(e);return t.send(e.finish),await Ot(t)}$t={makeHttpRequest:kt,makeRequest:St,makePromise:Ot,sendRequest:Nt,Get:function(e,t){return new At("GET",e,t)},Post:function(e,t){return new At("POST",e,t)},Delete:function(e,t){return new At("DELETE",e,t)},Put:function(e,t){return new At("PUT",e,t)},Patch:function(e,t){return new At("PATCH",e,t)},sendGet:function(e){return e.method="GET",e.type=void 0,e.data=void 0,Nt(e)},sendDelete:function(e){return e.method="DELETE",Nt(e)},sendPost:function(e){return e.method="POST",Nt(e)},sendPut:function(e){return e.method="PUT",Nt(e)},sendPatch:function(e){return e.method="PATCH",Nt(e)}};var Pt;const{error:jt}=B,{Ajax:Lt}=gt,{startsWith:qt,endsWith:Rt,filter:Vt,forEach:Mt}=o;class Ut{constructor(){this.all=[],this.any=!1}use(e){this.all.push(e),this.any=!0}async intercept(e){for(let t=0;t<this.all.length;t++)e=await this.all[t](e);return e}}Pt={XHttpClient:class{constructor(e="",{ratePerMinute:t=300,defaultParams:n,defaultHeaders:r,timeout:s,retries:o}={}){Rt(e,"/")&&(e=e.split("").splice(e.length-1).join()),this.interceptors={request:new Ut,response:new Ut},this.host=e,this.__queue=[],this.__sending=[],this.__interval=void 0,this.__ratePerMinute=t,this.__timeBetween=6e4/t,this.__lastRequestTime=(new Date).getTime()-this.__timeBetween,this.timeout=s||6e4,this.retries=o||0,this.defaultHeaders=r||{},this.defaultParams=n||{}}_intervalSend(e){if(0===e.__queue.length)return clearInterval(e.__interval),void(e.__interval=void 0);let t=(new Date).getTime();if(t-e.__lastRequestTime>e.__timeBetween){let n=e.__queue.shift();e._sendImmediately(n,t)}}_sendImmediately(e,t){this.interceptors.request.any?this.interceptors.request.intercept(e).then((()=>{e.send(),this.__sending.push(e),this.__lastRequestTime=t})).catch((e=>{console.error(e)})):(e.send(),this.__sending.push(e),this.__lastRequestTime=t)}_removeSendingRequest(e){let t=this.__sending.indexOf(e);t>=0&&this.__sending.splice(t)}_addRequest(e,{responseType:t,cancelToken:n}){this.__queue.push(e),this.__interval||(this.__interval=setInterval(this._intervalSend,1,this)),e.cancelToken=n,t&&(e.xhr.responseType=t),e.RETRIES=0,e.xhr.timeout=this.timeout,this.defaultHeaders&&e.headers(this.defaultHeaders),this.defaultParams&&Mt(this.defaultParams,((t,n)=>{e.rq.setArg(n,t)}));let r=$t.makePromise(e,{default(e,t,n,r){r._removeSendingRequest(e)},onSuccess(e,t,n,r){r.interceptors.response.any?r.interceptors.response.intercept(e).then((()=>t(e))).catch((e=>n(e))):t(e)},onFail:(e,t,n,r)=>(r.interceptors.response.any?r.interceptors.response.intercept(e).then((()=>n(e))).catch(((e,t)=>n(e,t))):n(e),n(e,Error("Request failed."))),onTimeout(e,t,n,r){if(e.RETRIES>=r.retries)return n(e,Error("Request timed out after "+e.RETRIES+" retries."));r.__sending.push(e.resend()),e.RETRIES+=1}},this);return e._promise_=r,r}send(e){return this._addRequest(e)}_contentRequest(e,t,{params:n,headers:r,content:s,responseType:o,cancelToken:i}){return!qt(t,"/")&&t.length>1&&(t="/"+t),this._addRequest(e(this.host+t,n||{}).headers(r||{}).withContent(s||{type:"",data:""}),{responseType:o,cancelToken:i})}get(e,{params:t,headers:n,responseType:r,cancelToken:s}={}){return!qt(e,"/")&&e.length>1&&(e="/"+e),this._addRequest($t.Get(this.host+e,t).headers(n),{responseType:r,cancelToken:s})}post(e,{params:t,headers:n,content:r,responseType:s,cancelToken:o}={}){return this._contentRequest($t.Post,e,{params:t,headers:n,content:r,responseType:s,cancelToken:o})}put(e,{params:t,headers:n,content:r,responseType:s,cancelToken:o}={}){return this._contentRequest($t.Put,e,{params:t,headers:n,content:r,responseType:s,cancelToken:o})}patch(e,{params:t,headers:n,content:r,responseType:s,cancelToken:o}={}){return this._contentRequest($t.Patch,e,{params:t,headers:n,content:r,responseType:s,cancelToken:o})}delete(e,{params:t,headers:n,content:r,responseType:s,cancelToken:o}={}){return this._contentRequest($t.Delete,e,{params:t,headers:n,content:r,responseType:s,cancelToken:o})}cancel(e){this.__queue=Vt(this.__queue,(t=>t.cancelToken!==e));let t=Vt(this.__sending,(t=>t.cancelToken===e));Mt(t,(e=>{try{e.xhr.abort()}catch(e){console.error(e)}})),this.__sending=Vt(this.__sending,(t=>t.cancelToken!==e))}cancelAll(){this.__interval>=0&&clearInterval(this.__interval),setTimeout((()=>{Mt(this.__sending,(function(e){try{e.xhr.abort()}catch(e){}})),this.__queue=[]}),1)}}},ht={...dt,..._t,...gt,...$t,...Pt};var Dt;const{error:Ht}=B,{randomId:It}=Yt,{createNode:Ft}=Kt;var Wt,Xt;const{error:Bt}=B,{flatMap:zt}=o;var Gt,Kt={};Gt={FRAG:-1,TEXT:0,NODE:1,VIEW:2};const{deepClone:Jt}=o,{flatMap:Qt}=o;var Yt={},Zt={};const{kebab:en}=Y,{forEach:tn}=o;function nn(e){let t=[];return tn(e,((e,n)=>{t.push(`${en(n)}: ${e};`)})),t}Zt={generateStyles:nn,generateCss:function(e,t="\n"){return nn(e).sort(((e,t)=>e[0].localeCompare(t[0]))).join(t)}};const{isArr:rn}=i,{isStr:sn}=i,{isVal:on}=i,{setEvent:an}=Ae,{forEach:ln}=o,{isPrim:cn}=i;function un(e,t){return on(e)?sn(e)?e:rn(e)?e.join(t):Zt.generateCss(e,t):""}Yt={randomId:function(){return Date.now().toString(24).slice(2)+Math.random().toString(24).slice(6)},normalize:function e(t,{createText:n,parent:r,empty:s}){if(!(t instanceof Array)){if(null==t)return s||[];t=[t]}let o=[];const i=t.length;for(let s=0;s<i;s++){let i=t[s];if(null==i||cn(i))"symbol"==typeof i&&(i=i.toString()),i=n(""+i),i.$parent=r,o.push(i);else if(i.isNode&&null===i.tag&&(i=i.children||[]),i instanceof Array){i=e(i,{createText:n});for(let e=0;e<i.length;e++)i[e].$parent=r,o.push(i[e])}else i.$parent=r,o.push(i)}return 0===o.length&&(o=s||[]),o},setElementProps:function(e,t,n,r){t&&ln(t,((t,n)=>{"style"===n?t=un(t," "):"className"===n&&(n="class"),e.setAttribute(n,t)})),n&&ln(n,((t,n)=>{r&&(t=t.bind(r)),an(e,n,t)}))},compileProps:function(e){const t={events:{},attrs:{}};return ln(e,((e,n)=>{var r;/on[A-Z]+/.test(n)?t.events[(r=n,r.slice(2).toLowerCase())]=e:t.attrs[n]=e})),t},compileStyles:un};const{setElementProps:fn,compileProps:hn,normalize:dn}=Yt;function pn(e="#text",t,n){if(e=e.toLowerCase(),this.tag=e,this.element=void 0,"#text"===e)return this.$t=Gt.TEXT,this.isText=!0,this.text=t,void Object.defineProperty(this,"$clone",{value:function(){return mn(this.text)},configurable:!1,writable:!1,enumerable:!1});this.$t=Gt.NODE,this.isNode=!0;let r=hn(t||{});this.attrs=r.attrs,this.events=r.events,this.props=r.props,this.children=dn(n||[],{createText:mn,parent:this}),this.isEmpty=()=>0===this.children.length,Object.defineProperty(this,"$clone",{value:function(){return new pn(this.tag,Jt(this.props||{}),(n||[]).map((e=>e.$clone())))}})}function mn(e){return new pn("#text",e)}Object.defineProperty(pn.prototype,"$parent",{value:void 0,configurable:!1,writable:!0,enumerable:!1}),Object.defineProperty(pn.prototype,"isEmpty",{get(){return 0===this.children.length}}),pn.prototype.$destroy=function(){this.element.remove()},Kt={VNode:pn,TYPE:Gt,createNode:function(e,t,n){return new pn(e,t,n)},createText:mn};const{createNode:yn}=Kt,{normalize:_n,setElementProps:gn}=Yt,{createText:bn}=Kt;function En(e,t,n,r){let s=document.createElement(e);return gn(s,t,n,r),s}function vn(e){return document.createTextNode(e)}function Tn(e,t){if(e.beforeMount)try{e.beforeMount.call(e)}catch(t){setTimeout(Bt("("+e.$name+").beforeMount",t))}e.$nodes||e.$renderAndSetNodes(),e.$rootElement=t;let n=e.$nodes.map((n=>n.$isView?Tn(n,t):Cn(n,e)));return e.Mounted&&setTimeout((function(){try{e.Mounted.call(e)}catch(t){Bt("("+e.$name+").Mounted",t)}}),0),n}function Cn(e,t){if(e.isText)return e.element=vn(e.text),e.element.__node=e,e.element;if(e.element=En(e.tag,e.attrs,e.events,t),e.element.__node=e,!e.isEmpty){let n=e.children.map((n=>wn(n,t,e.element)));HTMLElement.prototype.append.apply(e.element,_n(n,{createText:bn,parent:this}))}return e.element}function wn(e,t,n){return e.$isView?Tn(e,n):Cn(e,t)}Xt={render:function(e,t){if(!t)throw Error("render(): rootElement is undefined");if(t.__view)return void console.error("already rendered");e.$rootElement=t,t.innerHTML="";let n=wn(e,e,t);n instanceof Array||(n=[n]),n=zt(n);for(let e=0;e<n.length;e++)Node.prototype.appendChild.call(t,n[e]);t.__view=e},createDom:wn,createNodeDom:Cn,createViewDom:Tn,createTextDom:vn,createElement:En};const{createDom:$n}=Xt,{createNodeDom:An}=Xt,{error:xn}=B;var kn;const{clearEvent:Sn,setEvent:On}=Ae,{forEach:Nn}=o,{compileStyles:Pn}=Yt;kn={patchAttrs:function(e,t,n){const r=Object.keys(e),s=Object.keys(t),o=Object.keys(e);for(let r of o){const s=e[r],o=t[r];if("style"===r){const e=Pn(s," ");e!==Pn(o," ")&&n.setAttribute("style",e)}else"className"===r?n.setAttribute("class",s):n.setAttribute(r,s)}for(let e of s)r.indexOf(e)<0&&n.removeAttribute(e)},patchEvents:function(e={},t={},n){Nn(t,(function(t,r){e[r]!==t&&Sn(n,r)})),Nn(e,(function(e,t){On(n,t,e)}))}};const{patchAttrs:jn,patchEvents:Ln}=kn,{concat:qn}=o,{createText:Rn}=Kt,{normalize:Vn}=Yt;function Mn(e,t,n){if(e.shouldUpdate)try{if(!e.shouldUpdate.call(e,{oldProps:e.props,newProps:t}))return}catch(t){setTimeout(xn("("+e.$name+").shouldUpdate",t),0)}if(e.beforeUpdate)try{e.beforeUpdate.call(e,t)}catch(t){setTimeout(xn("("+e.$name+").Updated",t))}e.$children=Vn(n,{createText:Rn}),qn(e.props,t||{});const r=e.$renderNodes();e.$nodes=Hn(r,e.$nodes,e,e.$rootElement),e.Updated&&setTimeout((function(){try{e.Updated.call(e)}catch(t){xn("("+e.$name+").Updated",t)}}),0)}function Un(e,t,n){e.tag===t.tag?(e.element=t.element,e.element.__node=e,jn(e.attrs,t.attrs,t.element),Ln(e.events,t.events,e.element),e.element||xn("Fatal: current node has no element",t,e),Hn(e.children,t.children,n,e.element)):(e.element=An(e,n),t.element.replaceWith(e.element),e.element.__node=e)}function Dn(e,t){e.text!==t.text&&(t.element.textContent=e.text),e.element=t.element,e.element.__node=e}function Hn(e,t,n,r){if(!r)throw Error("patchNodes: rootElement is not defined");let s=e.length,o=t.length,i=s>=o,a=i?o:s,l=0;for(;l<a;l++){const s=t[l],o=e[l];if(s.$t===o.$t){if(s.isNode){Un(o,s,n);continue}if(s.isText){Dn(o,s);continue}if(s.$name===o.$name)Mn(s,o.props,o.$children),s.$parent=o.$parent,o.$parent=void 0,e[l]=s;else{const e=$n(o,n,r);let t;t=s.$destroy(!0),Element.prototype.replaceWith.apply(t,e),o.element=e}}else{const e=$n(o,n,r);let t;t=s.isNode||s.isText?s.element:s.$destroy(!0),t?(Element.prototype.replaceWith.apply(t,e),o.element=e):console.error("Empty anchor",s)}}if(i)for(let t=l;t<s;t++){let s=$n(e[t],n,r);r.append(s)}else if(o>s)for(let e=l;e<o;e++)t[e].$destroy();return e}Wt={patchView:Mn};const{patchView:In}=Wt,{warn:Fn}=B,{deepClone:Wn,concat:Xn}=o,{normalize:Bn}=Yt,{createText:zn}=Kt;var Gn;const Kn=Object.seal({queue:[],busy:!1,interval:null});function Jn(){if(0===Kn.queue.length)return clearInterval(Kn.interval),void(Kn.interval=null);if(!Kn.busy){let[e,t]=Kn.queue.shift();if(Kn.queue.some((t=>t[0]===e)))return;t(),Kn.busy=!1}}Gn={dispatchTask:function(e,t){Kn.queue.some((e=>e[0]===t))||(Kn.queue.push([t,e]),null===Kn.interval&&(Kn.interval=setInterval(Jn,20)))}};const{dispatchTask:Qn}=Gn;function Yn(e={}){this.$t=Gt.VIEW,e.name="View::"+It(),this.$name=e.name,this.$proto=Object.freeze(e);let t=Object.getOwnPropertyNames(e);for(let n=0;n<t.length;n++){const r=t[n];e[r]instanceof Function?this[r]=e[r].bind(this):this[r]=Wn(e[r])}this.$instanceId=Symbol("view"),this.props=this.props||{},this.state=this.state||{},this.render||(Fn("View has no render!"),this.render=()=>""),Object.defineProperty(this,"$elements",{get(){return this.$nodes.flatMap((e=>null==e?[]:e.$isView?e.$elements:e.element))}})}function Zn(e){return Object.prototype.isPrototypeOf.call(Yn,e)}Object.defineProperty(Yn.prototype,"$parent",{value:void 0,configurable:!1,writable:!0,enumerable:!1}),Yn.prototype.$isView=!0,Yn.prototype.$clone=function(){return new Yn({...this.$proto})},Yn.prototype.$updateWith=function(e,t){},Yn.prototype.$renderNodes=function(e=this.props){return Bn(this.render({props:Xn(this.props,e,!0),state:this.state}),{createText:zn,parent:this,empty:[Ft("slot",{style:"display: none"})]})},Yn.prototype.$renderAndSetNodes=function(){if(this.beforeCreate)try{this.beforeCreate()}catch(e){setTimeout(Ht("("+this.$name+").beforeCreate()",e))}if(this.$nodes=this.$renderNodes(),this.Created)try{this.Created()}catch(e){setTimeout(Ht("("+this.$name+").Created()",e))}return this},Yn.prototype.$destroy=function(e){if(this.beforeDestroy)try{this.beforeDestroy()}catch(e){setTimeout(Ht("("+this.$name+").beforeDestroy()",e))}let t;for(let e=0;e<this.$nodes.length;e++){let n=this.$nodes[e];n.element?t?n.element.remove():t=n.element:t=t||n.$destroy()}if(e)return t;t&&t.remove()},Yn.prototype.$clean=function(){this.$nodes=void 0,this.state=void 0,this.props=void 0},Yn.prototype.$update=function(){Qn((()=>In(this,this.props,this.$children)),this.$instanceId)},Dt={View:Yn,isViewClass:Zn,getViewInstance:function(e,t){if(Zn(e))return new e(t);if(e instanceof Yn)return e;if(e===Yn)return new Yn(t);throw TypeError("Cannot get view instance of "+e)},createView:function(e){return new Yn(e)},renderView:function(e,t,n){return t&&Xn(e.props,t,!0),n=Bn(n||[],{createText:zn}),e.$children=n,e.$renderAndSetNodes(),e}};const{View:er,createView:tr}=Dt;var nr;const{normalize:rr}=Yt,{renderView:sr}=Dt,{createNode:or,createText:ir}=Kt;nr={h:function(e,t,...n){return null===e?n||[]:(null==t&&(t={}),e.$isView?sr(e.$clone(),t,n):or(e,t,rr(n,{createText:ir})))},t:function(e){return ir(e)}};const{render:ar}=Xt;r={Core:s,Dom:ce,Http:ht,UI:{View:er,createComponent:tr,jsx:nr,mount:ar}},t.setGlobal({X:{...r.Core,...r.Dom,...r.Http},...r.UI})}();
//# sourceMappingURL=exir-bundle.js.map
